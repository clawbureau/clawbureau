Menu

## Cloud Deployment

Relevant source files
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [docs/docs.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/docs.json)
- [docs/help/faq.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md)
- [docs/help/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/index.md)
- [docs/help/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md)
- [docs/install/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md)
- [docs/install/installer.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/installer.md)
- [docs/install/migrating.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md)
- [docs/northflank.mdx](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx)
- [docs/platforms/digitalocean.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/digitalocean.md)
- [docs/platforms/exe-dev.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/gcp.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md)
- [docs/platforms/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md)
- [docs/platforms/linux.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/linux.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/platforms/oracle.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/oracle.md)
- [docs/platforms/windows.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/windows.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [docs/start/hubs.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/hubs.md)
- [docs/vps.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/vps.md)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/discord/monitor/presence-cache.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/discord/monitor/presence-cache.test.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)

This page covers deploying OpenClaw Gateway to cloud platforms (Fly.io, Railway, Northflank, GCP) using containerized deployments with persistent volumes. For traditional VPS deployments (DigitalOcean, Hetzner, Oracle Cloud), see [VPS Deployment](https://deepwiki.com/openclaw/openclaw/13.2-vps-deployment). For local development and production on your own hardware, see [Local Deployment](https://deepwiki.com/openclaw/openclaw/13.1-local-deployment). For network security and access patterns, see [Network Configuration](https://deepwiki.com/openclaw/openclaw/13.4-network-configuration).

## Purpose and Scope

Cloud deployment refers to running the OpenClaw Gateway on Platform-as-a-Service (PaaS) offerings that provide:

- **Containerization**: Docker-based runtime isolation
- **Persistent volumes**: Durable storage for state/workspace that survives restarts
- **Managed ingress**: HTTPS endpoints and load balancing
- **Environment-based configuration**: Secrets via environment variables
- **Auto-restart**: Supervisor processes that recover from crashes

This deployment model differs from VPS deployment in that the platform manages the container lifecycle, networking, and TLS termination, while you provide the application image and configuration.

## Cloud Platform Architecture

```
External ServicesPersistent StorageContainer RuntimePlatform IngressUser AccessOutboundAPI CallsBrowser
(Control UI)Mobile Apps
(iOS/Android)CLI Client
(openclaw)HTTPS Endpoint
(platform-managed)Reverse Proxy
(port 3000 → 443)node dist/index.js gateway
--bind lan --port 3000OPENCLAW_STATE_DIR
/dataPlatform Volume
(openclaw_data)openclaw.json
credentials/
agents/workspace/
AGENTS.md, SOUL.mdMessaging Channels
(Discord, Telegram)Model Providers
(Anthropic, OpenAI)
```

**Sources:**[docs/platforms/fly.md 1-466](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L1-L466) [fly.toml 1-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L35)

## Deployment Patterns

### Container Configuration

All cloud platforms use a similar container startup pattern. The Gateway process binds to a high port inside the container, and the platform's reverse proxy forwards HTTPS traffic to it.

```
force_https=trueport mappingPlatform Ingress
(443/HTTPS)Container
(internal_port)Gateway Process
(--bind lan)
```

**Fly.io Configuration** ([fly.toml 17-26](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L17-L26)):

```
[processes]
  app = "node dist/index.js gateway --allow-unconfigured --port 3000 --bind lan"

[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true
  min_machines_running = 1
```

**GCP Docker Compose** ([docs/platforms/gcp.md 242-280](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L242-L280)):

```
services:
  openclaw-gateway:
    ports:
      - "127.0.0.1:${OPENCLAW_GATEWAY_PORT}:18789"
    command:
      [
        "node",
        "dist/index.js",
        "gateway",
        "--bind",
        "${OPENCLAW_GATEWAY_BIND}",
        "--port",
        "${OPENCLAW_GATEWAY_PORT}"
      ]
```

The `--bind lan` flag tells the Gateway to listen on `0.0.0.0` so the platform's proxy can reach it. Without this, the Gateway would bind to `127.0.0.1` only, making it unreachable from outside the container.

**Sources:**[fly.toml 17-26](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L17-L26) [docs/platforms/gcp.md 242-280](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L242-L280)

### State Persistence

Cloud deployments use **volume mounts** to persist state across container restarts. The container's ephemeral filesystem is discarded on rebuild, so all important data must live on the volume.

```
Volume Mount (Persistent)/data
(OPENCLAW_STATE_DIR)openclaw.jsoncredentials/
(OAuth tokens)agents//
(sessions, memory)workspace/
(AGENTS.md, SOUL.md)Container Filesystem (Ephemeral)dist/
(built JS)node_modules/
(dependencies)/usr/local/bin/
(gog, wacli)
```

**Fly.io Volume Mount** ([fly.toml 32-34](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L32-L34)):

```
[mounts]
  source = "openclaw_data"
  destination = "/data"
```

The `OPENCLAW_STATE_DIR=/data` environment variable ([fly.toml 14](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L14-L14)) tells the Gateway to write all persistent state to the volume.

**GCP Volume Mount** ([docs/platforms/gcp.md 261-263](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L261-L263)):

```
volumes:
  - ${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw
  - ${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace
```

GCP uses two separate mounts for config and workspace, both pointing to host directories.

**Sources:**[fly.toml 14-34](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L14-L34) [docs/platforms/gcp.md 261-263](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L261-L263)

### Persistence Mapping Table

| Component | Container Path | Volume Source | Rebuild Safe? |
| --- | --- | --- | --- |
| Gateway config | `/data/openclaw.json` | Platform volume | ✅ Yes |
| OAuth tokens | `/data/credentials/` | Platform volume | ✅ Yes |
| Session history | `/data/agents/<agentId>/sessions/` | Platform volume | ✅ Yes |
| Workspace files | `/data/workspace/` | Platform volume | ✅ Yes |
| WhatsApp session | `/data/credentials/` | Platform volume | ✅ Yes |
| Node runtime | `/usr/local/bin/node` | Container image | ❌ No (rebuilt) |
| External binaries | `/usr/local/bin/gog` | Container image | ❌ No (must bake) |
| npm packages | `/app/node_modules/` | Container image | ❌ No (rebuilt) |

**Sources:**[docs/platforms/gcp.md 406-418](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L406-L418) [docs/platforms/fly.md 77-89](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L77-L89)

## Platform Comparison

```
Setup MethodDocker-FirstOne-Click DeploymentRailway
Template DeployNorthflank
Template DeployFly.io
fly.toml + DockerfileGCP Compute Engine
Docker ComposeWeb Setup Wizard
/setup endpointSSH + CLI
openclaw onboard
```

| Platform | Complexity | Setup Method | Cost | Best For |
| --- | --- | --- | --- | --- |
| Railway | Low | Web wizard | $5+/mo | Quick start, no terminal |
| Northflank | Low | Web wizard | $10+/mo | Browser-only setup |
| Fly.io | Medium | fly CLI + SSH | $10-15/mo | Production, HTTPS |
| GCP | High | gcloud + Docker | $5-12/mo | Custom control, baked binaries |

**Sources:**[docs/platforms/fly.md 461-465](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L461-L465) [docs/northflank.mdx 1-54](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx#L1-L54)

## Fly.io Deployment

Fly.io is the most documented cloud platform in the codebase. It uses a Dockerfile build + persistent volumes + HTTPS ingress.

### Configuration Files

The repository includes two Fly.io configurations:

1. **Standard** ([fly.toml 1-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L35)): Public HTTPS ingress
2. **Private** ([fly.private.toml 1-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L1-L40)): No public IP, proxy-only access

**Standard Configuration** ([fly.toml 1-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L35)):

```
app = "openclaw"
primary_region = "iad"

[build]
  dockerfile = "Dockerfile"

[env]
  NODE_ENV = "production"
  OPENCLAW_PREFER_PNPM = "1"
  OPENCLAW_STATE_DIR = "/data"
  NODE_OPTIONS = "--max-old-space-size=1536"

[processes]
  app = "node dist/index.js gateway --allow-unconfigured --port 3000 --bind lan"

[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true
  min_machines_running = 1

[[vm]]
  size = "shared-cpu-2x"
  memory = "2048mb"

[mounts]
  source = "openclaw_data"
  destination = "/data"
```

**Key Settings**:

- `--allow-unconfigured`: Starts without `openclaw.json`, allowing post-deploy SSH config
- `internal_port = 3000`: Must match `--port 3000` for health checks
- `memory = "2048mb"`: 512MB too small; 2GB recommended ([docs/platforms/fly.md 252-264](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L252-L264))
- `OPENCLAW_STATE_DIR = "/data"`: Points to the persistent volume

**Sources:**[fly.toml 1-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L35) [docs/platforms/fly.md 40-89](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L40-L89)

### Private Deployment

The private configuration ([fly.private.toml 1-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L1-L40)) removes the `[http_service]` block entirely, preventing public IP allocation. This is suitable for deployments that:

- Only make outbound calls (no inbound webhooks)
- Use `fly proxy` or WireGuard for access
- Want to avoid internet scanner discovery

**Access Methods** ([docs/platforms/fly.md 391-408](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L391-L408)):

```
# Local proxy (simplest)
fly proxy 3000:3000 -a my-openclaw

# WireGuard VPN
fly wireguard create

# SSH only
fly ssh console -a my-openclaw
```

**Sources:**[fly.private.toml 1-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L1-L40) [docs/platforms/fly.md 349-441](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L349-L441)

### Deployment Commands

```
# Create app and volume
fly apps create my-openclaw
fly volumes create openclaw_data --size 1 --region iad

# Set secrets (not in fly.toml)
fly secrets set OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
fly secrets set ANTHROPIC_API_KEY=sk-ant-...
fly secrets set DISCORD_BOT_TOKEN=MTQ...

# Deploy
fly deploy

# SSH to configure
fly ssh console
cat > /data/openclaw.json << 'EOF'
{...}
EOF

# Restart
fly machine restart <machine-id>
```

**Sources:**[docs/platforms/fly.md 24-207](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L24-L207)

### Common Issues

**1\. Memory Issues** ([docs/platforms/fly.md 248-264](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L248-L264)):

512MB is too small. Symptoms: `SIGABRT`, `v8::internal::Runtime_AllocateInYoungGeneration`, silent restarts.

Fix:

```
fly machine update <machine-id> --vm-memory 2048 -y
```

**2\. Gateway Lock Issues** ([docs/platforms/fly.md 265-278](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L265-L278)):

The PID lock file persists on the volume across restarts, causing "already running" errors.

Fix:

```
fly ssh console --command "rm -f /data/gateway.*.lock"
fly machine restart <machine-id>
```

**3\. Port Binding** ([docs/platforms/fly.md 235-247](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L235-L247)):

If the Gateway binds to `127.0.0.1` instead of `0.0.0.0`, Fly's proxy can't reach it.

Fix: Add `--bind lan` to the process command ([fly.toml 18](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L18-L18)).

**Sources:**[docs/platforms/fly.md 234-305](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L234-L305)

## Northflank Deployment

Northflank provides a one-click template with browser-based setup. No terminal access required.

### Setup Flow

```
/setup EndpointOpenClaw GatewayDeployment EngineNorthflank TemplateUser/setup EndpointOpenClaw GatewayDeployment EngineNorthflank TemplateUserClick "Deploy OpenClaw"Prompt for SETUP_PASSWORDSet env vars + DeployStart containerExpose /setup endpointVisit /setup, enter passwordGenerate openclaw.jsonRestart with configOpen Control UI at /openclaw
```

**Configuration** ([docs/northflank.mdx 14-18](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx#L14-L18)):

1. Set `SETUP_PASSWORD` environment variable
2. Deploy stack
3. Visit `https://<your-domain>/setup`
4. Configure model auth and channels via web form
5. Access Control UI at `https://<your-domain>/openclaw`

The setup wizard can approve Telegram pairing codes directly from the browser ([docs/northflank.mdx 35](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx#L35-L35)).

**Sources:**[docs/northflank.mdx 1-54](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx#L1-L54)

## GCP Compute Engine Deployment

The GCP guide ([docs/platforms/gcp.md 1-499](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L1-L499)) shows a production-grade Docker Compose setup with baked binaries.

### Binary Persistence Pattern

Installing binaries at runtime is a footgun. Anything installed inside a running container is lost on restart. External binaries must be baked into the image at build time.

**Example Dockerfile** ([docs/platforms/gcp.md 307-337](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L307-L337)):

```
FROM node:22-bookworm

# Example: Gmail CLI
RUN curl -L https://github.com/steipete/gog/releases/latest/download/gog_Linux_x86_64.tar.gz \
  | tar -xz -C /usr/local/bin && chmod +x /usr/local/bin/gog

# Example: Google Places CLI
RUN curl -L https://github.com/steipete/goplaces/releases/latest/download/goplaces_Linux_x86_64.tar.gz \
  | tar -xz -C /usr/local/bin && chmod +x /usr/local/bin/goplaces

# Example: WhatsApp CLI
RUN curl -L https://github.com/steipete/wacli/releases/latest/download/wacli_Linux_x86_64.tar.gz \
  | tar -xz -C /usr/local/bin && chmod +x /usr/local/bin/wacli
```

After adding new binaries, rebuild and restart:

```
docker compose build
docker compose up -d
```

**Verification**:

```
docker compose exec openclaw-gateway which gog
docker compose exec openclaw-gateway which wacli
```

**Sources:**[docs/platforms/gcp.md 285-368](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L285-L368)

### Volume Mounts

GCP uses explicit host directory mounts ([docs/platforms/gcp.md 200-208](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L200-L208)):

```
mkdir -p ~/.openclaw
mkdir -p ~/.openclaw/workspace
```

Docker Compose configuration ([docs/platforms/gcp.md 261-263](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L261-L263)):

```
volumes:
  - ${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw
  - ${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace
```

This two-mount pattern separates config/credentials from workspace files, making backups easier.

**Sources:**[docs/platforms/gcp.md 200-280](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L200-L280)

## Environment Variables

Cloud deployments prefer environment variables over config files for secrets. This keeps sensitive data out of `openclaw.json` and logs.

### Required Variables

| Variable | Purpose | Example |
| --- | --- | --- |
| `OPENCLAW_GATEWAY_TOKEN` | Auth for Control UI | `openssl rand -hex 32` |
| `OPENCLAW_STATE_DIR` | State/workspace location | `/data` (Fly.io), `~/.openclaw` (GCP) |
| `OPENCLAW_GATEWAY_PORT` | Internal listen port | `3000` (Fly.io), `18789` (GCP) |
| `OPENCLAW_GATEWAY_BIND` | Bind address | `lan` (public proxy), `loopback` (tunnel-only) |

### Provider Credentials

| Variable | Provider | Format |
| --- | --- | --- |
| `ANTHROPIC_API_KEY` | Anthropic | `sk-ant-...` |
| `OPENAI_API_KEY` | OpenAI | `sk-...` |
| `GOOGLE_API_KEY` | Google | API key string |
| `DISCORD_BOT_TOKEN` | Discord | `MTQ...` |

**Fly.io Secrets** ([docs/platforms/fly.md 89-105](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L89-L105)):

```
fly secrets set OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
fly secrets set ANTHROPIC_API_KEY=sk-ant-...
fly secrets set DISCORD_BOT_TOKEN=MTQ...
```

**GCP.env File** ([docs/platforms/gcp.md 215-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L215-L228)):

```
OPENCLAW_GATEWAY_TOKEN=change-me-now
OPENCLAW_GATEWAY_BIND=lan
OPENCLAW_CONFIG_DIR=/home/$USER/.openclaw
GOG_KEYRING_PASSWORD=change-me-now
```

The Discord token can come from either the environment or the config file ([docs/platforms/fly.md 196-200](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L196-L200)):

- Environment: `DISCORD_BOT_TOKEN` (recommended)
- Config: `channels.discord.token`

If using the env var, no need to add it to `openclaw.json`.

**Sources:**[docs/platforms/fly.md 89-105](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L89-L105) [docs/platforms/gcp.md 215-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L215-L228) [fly.toml 10-15](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L10-L15)

## Security Considerations

### Binding Modes

The `--bind` flag controls where the Gateway listens:

| Mode | Address | Use Case | Auth Required? |
| --- | --- | --- | --- |
| `loopback` | `127.0.0.1` | SSH tunnel, proxy | Token/password |
| `lan` | `0.0.0.0` | Platform proxy, public | Token/password |
| `tailnet` | Tailscale IP | Tailnet only | Optional |

**Fly.io Standard** ([fly.toml 18](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L18-L18)): `--bind lan` with token auth **Fly.io Private** ([fly.private.toml 25](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L25-L25)): `--bind lan` but no public IP **GCP Default** ([docs/platforms/gcp.md 266](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L266-L266)): `127.0.0.1:18789` (loopback via SSH)

### Public Exposure Trade-offs

**Standard Deployment** ([docs/platforms/fly.md 40-89](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L40-L89)):

- Public HTTPS URL (convenient)
- Discoverable by internet scanners (Shodan, Censys)
- Requires strong `OPENCLAW_GATEWAY_TOKEN`

**Private Deployment** ([docs/platforms/fly.md 343-441](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L343-L441)):

- No public IP allocation
- Hidden from scanners
- Access via `fly proxy` or WireGuard only
- Suitable for outbound-only use cases

**Security Benefits** ([docs/platforms/fly.md 443-450](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L443-L450)):

| Aspect | Public | Private |
| --- | --- | --- |
| Internet scanners | Discoverable | Hidden |
| Direct attacks | Possible | Blocked |
| Control UI access | Browser | Proxy/VPN |
| Webhook delivery | Direct | Via tunnel |

**Sources:**[fly.toml 20-26](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L20-L26) [fly.private.toml 24-31](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L24-L31) [docs/platforms/fly.md 343-450](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L343-L450)

### Webhook Callbacks

Private deployments can still receive webhooks via tunnels ([docs/platforms/fly.md 416-439](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L416-L439)):

1. **ngrok tunnel**: Run ngrok inside the container or as a sidecar
2. **Tailscale Funnel**: Expose specific paths via Tailscale
3. **Outbound-only**: Some providers (Twilio) work without webhooks

Example voice-call config with ngrok:

```
{
  "plugins": {
    "entries": {
      "voice-call": {
        "enabled": true,
        "config": {
          "provider": "twilio",
          "tunnel": { "provider": "ngrok" }
        }
      }
    }
  }
}
```

The ngrok tunnel provides a public webhook URL without exposing the Fly app itself.

**Sources:**[docs/platforms/fly.md 416-439](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L416-L439)

## Update Strategy

```
Local Repo
(git pull)Docker Build
(new image)Deploy
(platform CLI)Container Restart
(platform supervisor)Persistent Volume
(state preserved)
```

### Fly.io

```
git pull
fly deploy
fly status
fly logs
```

**Sources:**[docs/platforms/fly.md 313-324](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L313-L324)

### GCP

```
cd ~/openclaw
git pull
docker compose build
docker compose up -d
```

**Sources:**[docs/platforms/gcp.md 423-430](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L423-L430)

### Update Safety

The persistent volume mount ensures that:

- Config survives image rebuilds
- OAuth tokens stay valid
- Session history is preserved
- WhatsApp login persists

The container itself is stateless and safe to rebuild/restart.

## Troubleshooting

### Port Conflicts

**Symptom**: "App is not listening on expected address"

**Cause**: Gateway bound to `127.0.0.1` instead of `0.0.0.0`

**Fix**: Add `--bind lan` to startup command ([docs/platforms/fly.md 235-240](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L235-L240))

### Health Check Failures

**Symptom**: Connection refused, service restarting

**Cause**: `internal_port` doesn't match `--port`

**Fix**: Ensure `internal_port = 3000` matches `--port 3000` ([docs/platforms/fly.md 241-247](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L241-L247))

### Memory Issues

**Symptom**: Silent restarts, `SIGABRT`, v8 allocation errors

**Cause**: 512MB too small for production workloads

**Fix**: Increase to 2GB ([docs/platforms/fly.md 252-264](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L252-L264))

```
# Fly.io
fly machine update <machine-id> --vm-memory 2048 -y

# GCP
# Stop, change machine type, restart
```

### Lock File Stale

**Symptom**: "Another gateway instance is already listening"

**Cause**: PID lock file persists on volume after crash

**Fix**: Delete lock file ([docs/platforms/fly.md 265-278](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L265-L278))

```
# Fly.io
fly ssh console --command "rm -f /data/gateway.*.lock"

# GCP
docker compose exec openclaw-gateway rm -f /home/node/.openclaw/gateway.*.lock
```

### Config Not Read

**Symptom**: Changes to `openclaw.json` not taking effect

**Cause**: Config written to wrong location, not on volume

**Verify**:

```
# Fly.io
fly ssh console --command "cat /data/openclaw.json"

# GCP
docker compose exec openclaw-gateway cat /home/node/.openclaw/openclaw.json
```

**Sources:**[docs/platforms/fly.md 234-305](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L234-L305)

## Cost Estimates (2026)

| Platform | Tier | Specs | Cost/mo | Notes |
| --- | --- | --- | --- | --- |
| Fly.io | shared-cpu-2x | 2 vCPU, 2GB RAM | $10-15 | Includes volume |
| Railway | Starter | 0.5 vCPU, 512MB RAM | $5+ | Usage-based |
| Northflank | Basic | 1 vCPU, 1GB RAM | $10+ | Managed |
| GCP Compute | e2-small | 2 vCPU, 2GB RAM | ~$12 | Plus egress |
| GCP Compute | e2-micro | 2 vCPU, 1GB RAM | Free tier eligible | May OOM |

**Sources:**[docs/platforms/fly.md 461-465](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L461-L465) [docs/platforms/gcp.md 115-119](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md#L115-L119)

- VPS deployment patterns: [VPS Deployment](https://deepwiki.com/openclaw/openclaw/13.2-vps-deployment)
- Network binding and security: [Network Configuration](https://deepwiki.com/openclaw/openclaw/13.4-network-configuration)
- Gateway configuration reference: [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration)
- Remote access patterns: [Remote Access](https://deepwiki.com/openclaw/openclaw/3.4-remote-access)
- Docker installation: [Docker Install](https://github.com/openclaw/openclaw/blob/bf6ec64f/Docker%20Install)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-hmbioix2qbm" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-z5tp3lz1enf" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>