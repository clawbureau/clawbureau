Menu

## Gateway Configuration

Relevant source files
- [docs/cli/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md)
- [docs/gateway/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md)
- [docs/gateway/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md)
- [docs/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md)
- [docs/start/getting-started.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md)
- [docs/start/wizard.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md)
- [scripts/protocol-gen-swift.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/protocol-gen-swift.ts)
- [src/config/config.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts)
- [src/cron/run-log.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/run-log.test.ts)
- [src/cron/run-log.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/run-log.ts)
- [src/cron/store.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/store.ts)
- [src/gateway/protocol/index.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/index.ts)
- [src/gateway/protocol/schema.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/schema.ts)
- [src/gateway/server.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/server.ts)

This page documents the configuration options for the Gateway WebSocket server, including port binding, network access modes, authentication methods, and Tailscale integration. For information about the Gateway protocol itself, see [Gateway Protocol](https://deepwiki.com/openclaw/openclaw/3.2-gateway-protocol). For service lifecycle management, see [Gateway Service Management](https://deepwiki.com/openclaw/openclaw/3.3-gateway-service-management). For remote access patterns, see [Remote Access](https://deepwiki.com/openclaw/openclaw/3.4-remote-access).

---

## Configuration Sources and Precedence

Gateway configuration is loaded from multiple sources with a clear precedence hierarchy:

```
CLI Flags
(--port, --bind, --token)Environment Variables
(OPENCLAW_GATEWAY_PORT,
OPENCLAW_GATEWAY_TOKEN)openclaw.json
(gateway.*)Built-in Defaults
(port: 18789, bind: loopback)Resolved Gateway Config
```

**Precedence order** (highest to lowest):

1. CLI flags (`--port`, `--bind`, `--token`, `--auth`, `--password`)
2. Environment variables (`OPENCLAW_GATEWAY_PORT`, `OPENCLAW_GATEWAY_TOKEN`, `OPENCLAW_GATEWAY_BIND`)
3. Configuration file fields (`gateway.port`, `gateway.bind`, `gateway.auth.token`)
4. Built-in defaults (port `18789`, bind `loopback`, auth `token`)

**Sources:**  
[docs/cli/index.md 594-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L594-L612) [docs/gateway/index.md 42-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L43) [docs/start/wizard.md 113-117](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L117)

---

## Configuration File Structure

The Gateway configuration lives under the `gateway` key in `~/.openclaw/openclaw.json`. The complete structure:

```
{
  gateway: {
    // Required: local or remote
    mode: "local",
    
    // Server binding
    port: 18789,
    bind: "loopback",  // loopback | lan | tailnet | auto | custom
    host: "127.0.0.1",  // when bind=custom
    
    // Authentication
    auth: {
      mode: "token",  // token | password | none
      token: "gway_...",
      password: "..."  // optional, for password mode
    },
    
    // Tailscale integration
    tailscale: {
      mode: "off",  // off | serve | funnel
      resetOnExit: false
    },
    
    // Remote Gateway (when mode=remote)
    remote: {
      url: "ws://...",
      token: "..."
    },
    
    // Hot reload behavior
    reload: {
      mode: "hybrid"  // hybrid | restart | off
    },
    
    // Control UI settings
    controlUi: {
      allowInsecureAuth: false
    }
  },
  
  // Canvas host (separate HTTP server for node WebViews)
  canvasHost: {
    enabled: true,
    port: 18793,
    bind: "loopback"
  }
}
```

**Sources:**  
[docs/start/wizard.md 293-306](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L293-L306) [docs/gateway/troubleshooting.md 126-149](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L126-L149) [docs/gateway/index.md 22-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L22-L43)

---

## Port Configuration

### Gateway Port

**Configuration Table:**

| Source | Key | Default | Notes |
| --- | --- | --- | --- |
| CLI flag | `--port <n>` | \- | Highest precedence |
| Environment | `OPENCLAW_GATEWAY_PORT` | \- | Overrides config file |
| Config file | `gateway.port` | `18789` | Standard location |
| Built-in default | \- | `18789` | Used if none specified |

**Port Allocation Pattern:**

```
gateway.port
(e.g. 18789)WebSocket Server
port 18789HTTP Server
port 18789
(same port, multiplexed)Canvas Host
port 18793
(base + 4)Browser Control
port 18791
(base + 2, loopback only)
```

**Derived Ports:**

- **Canvas host**: `gateway.port + 4` (default `18793`, override with `canvasHost.port` or `OPENCLAW_CANVAS_HOST_PORT`)
- **Browser control service**: `gateway.port + 2` (loopback-only control API)
- **Browser CDP profiles**: `browser.controlPort + 9` through `+ 108` (auto-allocated per profile)

**Dev Profile Port Shifting:**

When using `--dev` flag, default ports shift to avoid conflicts:

| Service | Default Port | Dev Port |
| --- | --- | --- |
| Gateway | `18789` | `19001` |
| Browser Control | `18791` | `19003` |
| Canvas Host | `18793` | `19005` |

**Sources:**  
[docs/gateway/index.md 42-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L43) [docs/gateway/index.md 83-95](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L83-L95) [docs/cli/index.md 594-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L594-L612)

---

## Bind Modes

The Gateway supports five bind modes that control which network interfaces accept connections:

### Bind Mode Configuration

```
gateway.bindloopback
127.0.0.1 only
Local accesslan
0.0.0.0 all interfaces
LAN access
AUTH REQUIREDtailnet
100.64.0.0/10
Tailscale IP
AUTH REQUIREDauto
Fallback chain:
loopback → tailnet → lancustom
gateway.host
Specific IP
AUTH REQUIRED
```

### Bind Mode Details

| Mode | Bind Address | Auth Required | Use Case |
| --- | --- | --- | --- |
| `loopback` | `127.0.0.1` | Optional (recommended) | Local-only access, SSH tunnels |
| `lan` | `0.0.0.0` (all interfaces) | **Yes** | LAN access without VPN |
| `tailnet` | Tailscale IP (`100.64.0.0/10`) | **Yes** | Tailscale mesh network |
| `auto` | Tries: `loopback` → `tailnet` → `lan` | If non-loopback | Automatic best-effort |
| `custom` | `gateway.host` value | **Yes** | Specific IP binding |

**Security Rules:**

- `loopback`: Auth optional but recommended (wizard generates token by default)
- Non-loopback modes (`lan`, `tailnet`, `custom`): Auth is **mandatory**. Gateway refuses to start without `gateway.auth.token` or `gateway.auth.password`.

### Bind Mode Resolution Flow

```
loopbacklantailnetcustomautoNoYesNoYesNoYesNoYesYesNoYesNoYesNoGateway Startgateway.bind?Bind 127.0.0.1:Auth configured?Tailscale running?Auth configured?Try loopbackRefuse to bind
Exit: 'auth required'Bind 0.0.0.0:Exit: 'no tailnet interface'Auth configured?Bind Tailscale IP:Bind gateway.host:Loopback available?Tailscale + auth?Auth configured?Gateway listening
```

**Sources:**  
[docs/gateway/troubleshooting.md 192-222](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L192-L222) [docs/start/wizard.md 113-117](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L117) [docs/gateway/index.md 40-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L40-L43)

---

## Authentication Configuration

### Authentication Modes

The Gateway supports three authentication modes:

```
gateway.auth.modetoken
Gateway token in
connect.params.auth.tokenpassword
Password in
connect.params.auth.passwordnone
No authentication
(loopback only)gateway.auth.token
or OPENCLAW_GATEWAY_TOKENgateway.auth.password
```

**Configuration:**

```
{
  gateway: {
    auth: {
      mode: "token",
      token: "gway_abc123..."  // Generated by wizard
    }
  }
}
```

**Environment variable override:**

```
export OPENCLAW_GATEWAY_TOKEN="gway_abc123..."
```

**Client connection:**

```
{
  type: "req",
  id: 1,
  method: "connect",
  params: {
    minProtocol: 1,
    maxProtocol: 1,
    client: { id: "cli", version: "1.0.0", platform: "darwin", mode: "local" },
    auth: {
      token: "gway_abc123..."
    }
  }
}
```

**Token precedence:**

1. `gateway.auth.token` in `openclaw.json`
2. `OPENCLAW_GATEWAY_TOKEN` environment variable
3. `--token <value>` CLI flag (when starting Gateway)

**Sources:**  
[docs/gateway/index.md 40-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L40-L43) [docs/start/wizard.md 113-117](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L117) [docs/gateway/troubleshooting.md 192-214](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L192-L214)

### Password Authentication

**Configuration:**

```
{
  gateway: {
    auth: {
      mode: "password",
      password: "secure-password-here"
    }
  }
}
```

**Client connection:**

```
{
  type: "req",
  id: 1,
  method: "connect",
  params: {
    // ... same as token
    auth: {
      password: "secure-password-here"
    }
  }
}
```

**Sources:**  
[docs/cli/index.md 594-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L594-L612) [docs/gateway/index.md 40-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L40-L43)

### No Authentication (Loopback Only)

**Configuration:**

```
{
  gateway: {
    auth: {
      mode: "none"
    },
    bind: "loopback"  // Required
  }
}
```

**Warning:** This disables authentication. Only use on trusted single-user machines where you trust all local processes. The wizard generates a token by default even for loopback.

**Sources:**  
[docs/start/wizard.md 115-117](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L115-L117)

---

## Gateway Mode (Local vs Remote)

The `gateway.mode` field determines whether the CLI commands target a local Gateway process or a remote one.

### Mode Configuration

```
gateway.modelocal
Run Gateway locally
openclaw gateway starts serverremote
Connect to remote Gateway
CLI is client-onlygateway.port
gateway.bind
gateway.auth.*gateway.remote.url
gateway.remote.token
```

### Local Mode

**Configuration:**

```
{
  gateway: {
    mode: "local",
    port: 18789,
    bind: "loopback",
    auth: {
      mode: "token",
      token: "gway_..."
    }
  }
}
```

**Behavior:**

- `openclaw gateway` starts the WebSocket server locally
- `openclaw gateway install` creates a local service (launchd/systemd)
- CLI commands default to `ws://127.0.0.1:<gateway.port>`

**Sources:**  
[docs/gateway/troubleshooting.md 126-149](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L126-L149) [docs/gateway/index.md 15-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L15-L43)

### Remote Mode

**Configuration:**

```
{
  gateway: {
    mode: "remote",
    remote: {
      url: "ws://remote-host:18789",
      token: "gway_remote_token"
    }
  }
}
```

**Behavior:**

- `openclaw gateway` **will not start** a local server
- CLI commands connect to `gateway.remote.url`
- Service installation commands are **disabled** (no local service to manage)

**Important:**`gateway.remote.token` is for CLI→remote connections. It does **not** configure auth for the local Gateway (that's `gateway.auth.token`).

**Sources:**  
[docs/start/wizard.md 153-165](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L153-L165) [docs/gateway/troubleshooting.md 142-147](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L142-L147) [docs/gateway/troubleshooting.md 192-200](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L192-L200)

---

## Tailscale Integration

### Tailscale Mode Configuration

```
gateway.tailscale.modeoff
No Tailscale exposure
(default)serve
Tailscale Serve
HTTPS on tailnetfunnel
Tailscale Funnel
Public HTTPStailscale serve
https on port 443
backend: localhost:tailscale funnel
https publicly accessible
backend: localhost:
```

**Configuration:**

```
{
  gateway: {
    port: 18789,
    bind: "tailnet",  // or "loopback" with SSH tunnel
    auth: {
      mode: "token",
      token: "gway_..."
    },
    tailscale: {
      mode: "serve",
      resetOnExit: false  // Keep Tailscale Serve config after Gateway exits
    }
  }
}
```

**Behavior:**

- Runs `tailscale serve https / http://127.0.0.1:<gateway.port>` on Gateway start
- Exposes Gateway over HTTPS on your Tailscale hostname (e.g., `https://hostname.tailnet-name.ts.net`)
- Access is limited to your Tailscale network
- If `resetOnExit: true`, runs `tailscale serve reset` on Gateway shutdown

**Usage:**

```
# Start Gateway with Tailscale Serve
openclaw gateway --tailscale serve

# Or configure in onclaw.json and start normally
openclaw gateway
```

**Sources:**  
[docs/cli/index.md 594-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L594-L612) [docs/start/wizard.md 320-323](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L320-L323)

### Tailscale Funnel (Public)

**Configuration:**

```
{
  gateway: {
    tailscale: {
      mode: "funnel"
    }
  }
}
```

**Warning:** Funnel makes your Gateway **publicly accessible** on the internet. Only use with strong authentication and trusted use cases.

**Sources:**  
[docs/cli/index.md 594-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L594-L612)

---

## Canvas Host Configuration

The Canvas Host is a separate HTTP file server that serves static assets for node WebViews (iOS/Android Canvas).

```
Gateway
port 18789
WebSocket + HTTPCanvas Host
port 18793
HTTP onlyWebSocket RPC
ws://...HTTP APIs
/v1/chat/completions
/tools/invokeStatic Assets
/openclaw/canvas/
Served from workspace/canvas/iOS/Android Nodes
```

**Configuration:**

```
{
  canvasHost: {
    enabled: true,      // Set to false to disable
    port: 18793,        // Default: gateway.port + 4
    bind: "loopback",   // loopback | lan | tailnet | custom
    path: "~/.openclaw/workspace/canvas"  // Asset directory
  }
}
```

**Environment variable:**

```
export OPENCLAW_CANVAS_HOST_PORT=19000
export OPENCLAW_SKIP_CANVAS_HOST=1  # Disable entirely
```

**Disable Canvas Host:**

- Set `canvasHost.enabled: false` in config
- Or set `OPENCLAW_SKIP_CANVAS_HOST=1`

**Sources:**  
[docs/gateway/index.md 34-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L34-L35) [docs/gateway/index.md 86-93](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L86-L93)

---

## Configuration Hot Reload

The Gateway watches `openclaw.json` for changes and applies them without requiring a full restart.

### Reload Modes

```
gateway.reload.modehybrid
(default)
Hot-apply safe changes
Restart on critical changesrestart
Always restart via SIGUSR1off
No hot reload
Manual restart requiredSafe changes
- Channel allowlists
- Tool policies
- Session settingsCritical changes
- gateway.port
- gateway.bind
- gateway.auth.*In-process update
No connection dropSIGUSR1 restart
Brief connection drop
```

**Configuration:**

```
{
  gateway: {
    reload: {
      mode: "hybrid"  // hybrid | restart | off
    }
  }
}
```

**Reload behavior:**

- **Hybrid mode:** Most changes (allowlists, tools, session config) apply in-process. Port/bind/auth changes trigger SIGUSR1 restart.
- **Restart mode:** All config changes trigger SIGUSR1 restart.
- **Off mode:** No automatic reload. Manual restart required (`openclaw gateway restart`).

**In-process restart (SIGUSR1):**

- Preserves supervisor (launchd/systemd) tracking
- Brief connection drop (~1-2 seconds)
- Triggered by config tool, `openclaw update`, or critical config changes

**Sources:**  
[docs/gateway/index.md 25-28](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L25-L28) [docs/gateway/index.md 39-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L39-L40)

---

## Control UI Configuration

The Control UI is the web dashboard served by the Gateway HTTP server.

**Configuration:**

```
{
  gateway: {
    controlUi: {
      allowInsecureAuth: false  // Allow HTTP + token-only auth (no device identity)
    }
  }
}
```

**Insecure HTTP access:**

By default, the Control UI requires:

1. HTTPS (Tailscale Serve) **or** local `http://127.0.0.1:<port>`
2. Device identity (WebCrypto-based pairing)

If you access the dashboard over plain HTTP on a non-loopback IP (e.g., `http://<lan-ip>:18789`), the browser runs in a **non-secure context** and blocks WebCrypto. To allow token-only auth:

```
{
  gateway: {
    controlUi: {
      allowInsecureAuth: true  // Enable token-only auth over HTTP
    },
    auth: {
      mode: "token",
      token: "gway_..."  // Token required
    }
  }
}
```

**Warning:** Device identity provides better security. Only enable `allowInsecureAuth` if you cannot use HTTPS or local loopback.

**Sources:**  
[docs/gateway/troubleshooting.md 75-87](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L75-L87)

---

## Environment Variable Reference

Complete list of Gateway-related environment variables:

| Variable | Purpose | Overrides |
| --- | --- | --- |
| `OPENCLAW_GATEWAY_PORT` | Gateway port | `gateway.port`, default `18789` |
| `OPENCLAW_GATEWAY_TOKEN` | Gateway auth token | `gateway.auth.token` |
| `OPENCLAW_GATEWAY_BIND` | Bind mode | `gateway.bind` |
| `OPENCLAW_CANVAS_HOST_PORT` | Canvas host port | `canvasHost.port`, default `gateway.port + 4` |
| `OPENCLAW_SKIP_CANVAS_HOST` | Disable Canvas host | `canvasHost.enabled` |
| `OPENCLAW_CONFIG_PATH` | Config file path | Default `~/.openclaw/openclaw.json` |
| `OPENCLAW_STATE_DIR` | State directory | Default `~/.openclaw` |

**Sources:**  
[docs/gateway/index.md 42-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L43) [docs/gateway/index.md 83-93](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L83-L93) [docs/gateway/index.md 34-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L34-L35)

---

## Configuration Examples

### Local Development (Loopback + Token)

```
{
  gateway: {
    mode: "local",
    port: 18789,
    bind: "loopback",
    auth: {
      mode: "token",
      token: "gway_dev_token_123"
    }
  }
}
```

### LAN Access (All Interfaces + Token)

```
{
  gateway: {
    mode: "local",
    port: 18789,
    bind: "lan",  // 0.0.0.0
    auth: {
      mode: "token",
      token: "gway_strong_token_456"  // Required
    }
  }
}
```

### Tailscale Serve (HTTPS on Tailnet)

```
{
  gateway: {
    mode: "local",
    port: 18789,
    bind: "tailnet",  // or "loopback" + SSH tunnel
    auth: {
      mode: "token",
      token: "gway_tailscale_789"
    },
    tailscale: {
      mode: "serve",
      resetOnExit: false
    }
  }
}
```

### Remote Gateway Connection

```
{
  gateway: {
    mode: "remote",
    remote: {
      url: "ws://remote-host.example.com:18789",
      token: "gway_remote_token_xyz"
    }
  }
}
```
```
# Command line
openclaw --dev gateway --allow-unconfigured

# Or in config
{
  gateway: {
    port: 19001,  // Dev default
    bind: "loopback"
  }
}
```

**Sources:**  
[docs/start/wizard.md 113-117](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L117) [docs/gateway/index.md 70-113](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L70-L113) [docs/gateway/troubleshooting.md 126-149](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L126-L149)

---

## Validation and Troubleshooting

### Configuration Validation

The Gateway validates configuration on startup using Zod schemas defined in [src/config/config.ts 14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts#L14-L14)

**Common validation errors:**

| Error | Cause | Fix |
| --- | --- | --- |
| `"Gateway start blocked: set gateway.mode=local"` | `gateway.mode` unset or not `"local"` | Run `openclaw configure` or set `gateway.mode: "local"` |
| `"refusing to bind ... without auth"` | Non-loopback bind without auth | Set `gateway.auth.token` or `gateway.auth.password` |
| `"bind=tailnet but no tailnet interface"` | Tailscale not running | Start Tailscale or change `gateway.bind` |
| `"Address already in use (port 18789)"` | Port conflict | Stop existing process or use different port |

**Diagnostic commands:**

```
# Check Gateway configuration and status
openclaw gateway status

# Probe Gateway reachability
openclaw gateway probe

# Validate configuration
openclaw doctor

# Check for port conflicts
lsof -nP -iTCP:18789 -sTCP:LISTEN
```

**Sources:**  
[docs/gateway/troubleshooting.md 126-233](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L126-L233)

### Service Configuration Mismatch

`openclaw gateway status` shows both CLI config and service config:

```
Config (cli):     ~/.openclaw/openclaw.json
Config (service): ~/.openclaw/openclaw.json
Probe target:     ws://127.0.0.1:18789
```

If these don't match, the CLI is targeting a different config than the running service. Fix:

```
openclaw gateway install --force
```

**Sources:**  
[docs/gateway/troubleshooting.md 201-210](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L201-L210)

---

## References

- [Gateway Protocol](https://deepwiki.com/openclaw/openclaw/3.2-gateway-protocol) - WebSocket RPC protocol specification
- [Gateway Service Management](https://deepwiki.com/openclaw/openclaw/3.3-gateway-service-management) - Service lifecycle (install, start, stop, restart)
- [Remote Access](https://deepwiki.com/openclaw/openclaw/3.4-remote-access) - SSH tunnels, Tailscale Serve, network access patterns
- [Configuration File Structure](https://deepwiki.com/openclaw/openclaw/4.1-configuration-file-structure) - Complete `openclaw.json` schema
- [Configuration Management](https://deepwiki.com/openclaw/openclaw/4.2-configuration-management) - Using `openclaw config`, environment overrides

**Sources:**  
[src/gateway/server.ts 1-4](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/server.ts#L1-L4) [src/config/config.ts 1-15](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts#L1-L15) [docs/gateway/index.md 1-290](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L1-L290) [docs/gateway/troubleshooting.md 1-715](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L1-L715) [docs/start/wizard.md 1-322](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L1-L322) [docs/cli/index.md 589-660](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L589-L660)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>