Menu

## Gateway Service Management

Relevant source files
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [docs/cli/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md)
- [docs/docs.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/docs.json)
- [docs/gateway/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md)
- [docs/gateway/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md)
- [docs/help/faq.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md)
- [docs/help/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/index.md)
- [docs/help/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md)
- [docs/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md)
- [docs/install/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md)
- [docs/install/installer.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/installer.md)
- [docs/install/migrating.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md)
- [docs/northflank.mdx](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx)
- [docs/platforms/digitalocean.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/digitalocean.md)
- [docs/platforms/exe-dev.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/gcp.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md)
- [docs/platforms/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md)
- [docs/platforms/linux.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/linux.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/platforms/oracle.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/oracle.md)
- [docs/platforms/windows.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/windows.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [docs/start/getting-started.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md)
- [docs/start/hubs.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/hubs.md)
- [docs/start/wizard.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md)
- [docs/vps.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/vps.md)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/discord/monitor/presence-cache.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/discord/monitor/presence-cache.test.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)

This page covers installing, configuring, and managing the Gateway as a supervised background service. For Gateway configuration options, see [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration). For the Gateway protocol and RPC layer, see [Gateway Protocol](https://deepwiki.com/openclaw/openclaw/3.2-gateway-protocol).

## Overview

The Gateway service runs as a supervised background process that owns messaging channel connections, the WebSocket control plane, and agent execution. Service management varies by platform:

- **macOS**: LaunchAgent (user session)
- **Linux/WSL2**: systemd user service
- **Windows**: Task Scheduler task

All platforms support the same CLI interface: `openclaw gateway [install|start|stop|restart|status|uninstall]`.

Sources: [docs/gateway/index.md 13-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L13-L50) [docs/cli/index.md 589-630](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L589-L630) [docs/help/faq.md 171-178](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L171-L178)

---

## Service Installation

### Installation Methods

The Gateway service can be installed through multiple entry points:

| Command | When to use |
| --- | --- |
| `openclaw onboard --install-daemon` | First-time setup (recommended) |
| `openclaw gateway install` | Direct service install |
| `openclaw configure` | Interactive wizard (select "Gateway service") |
| `openclaw doctor` | Repair/migrate existing service |

```
runsrunsrunsrunsmacOSLinuxWindowsUseropenclaw onboard --install-daemonopenclaw gateway installopenclaw configureopenclaw doctorOnboarding WizardConfiguration WizardHealth ChecksService Install FlowDetect PlatformLaunchAgent Installsystemd InstallTask Scheduler InstallWrite Service ConfigEnable ServiceStart Service
```

Sources: [docs/start/wizard.md 126-136](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L126-L136) [docs/cli/index.md 615-631](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L615-L631) [docs/platforms/index.md 39-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L39-L50)

### Runtime Selection

The Gateway service requires a JavaScript runtime:

- **Node.js** (recommended; required for WhatsApp/Telegram channels)
- **Bun** (not recommended; has known bugs with WhatsApp/Telegram)

Specify runtime during installation:

```
openclaw gateway install --runtime node
```

The wizard prompts for runtime selection during onboarding. If a Bun-based service already exists, `openclaw doctor` will offer to migrate it to Node.

Sources: [docs/start/wizard.md 135-136](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L135-L136) [docs/gateway/troubleshooting.md 154-170](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L154-L170) [AGENTS.md 120-121](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L121)

All services embed metadata for identification and migration:

```
OPENCLAW_SERVICE_MARKER=openclaw
OPENCLAW_SERVICE_KIND=gateway
OPENCLAW_SERVICE_VERSION=<version>
```

This metadata allows `openclaw doctor` and `openclaw gateway status` to detect and repair legacy or misconfigured services.

Sources: [docs/gateway/index.md 64-66](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L64-L66)

---

## Platform-Specific Service Configuration

### macOS (LaunchAgent)

```
Service Label
bot.molt.gateway
or bot.molt.LaunchAgent Plist
~/Library/LaunchAgents/Load Domain
gui/Gateway Process
node dist/index.js gatewayStdout Log
~/.openclaw/logs/gateway.logStderr Log
~/.openclaw/logs/gateway.err.logKeepAlive: true
Auto-restart
```

**Service label**: `bot.molt.gateway` (default) or `bot.molt.<profile>` (with `--profile`)

**Legacy labels**: `com.openclaw.*` (from older installs; may still exist)

**Requirements**:

- Logged-in user session (GUI load domain)
- For headless: custom LaunchDaemon required (not shipped)

**Service management**:

```
# Check loaded services
launchctl list | grep openclaw

# Inspect service state
launchctl print gui/$UID | grep openclaw

# Manual load/unload (use CLI commands instead)
launchctl load ~/Library/LaunchAgents/bot.molt.gateway.plist
launchctl unload ~/Library/LaunchAgents/bot.molt.gateway.plist
```

**Logs**:

- Standard output: `$OPENCLAW_STATE_DIR/logs/gateway.log`
- Standard error: `$OPENCLAW_STATE_DIR/logs/gateway.err.log`
- Unified logs: `./scripts/clawlog.sh` (queries macOS unified log system)

Sources: [AGENTS.md 120-122](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L122) [docs/gateway/troubleshooting.md 106-110](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L106-L110) [docs/platforms/index.md 49-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L49-L50)

### Linux / WSL2 (systemd)

```
Service Unit
openclaw-gateway[-].servicesystemd User Instance
~/.config/systemd/user/Gateway Process
node dist/index.js gatewayRestart Policy
Restart=on-failurejournald
Service Logs
```

**Service name**: `openclaw-gateway.service` (default) or `openclaw-gateway-<profile>.service` (with `--profile`)

**Service type**: User service (not system-wide)

**Lingering**: The wizard enables lingering via `loginctl enable-linger <user>` so the Gateway stays up after logout. May prompt for sudo (writes `/var/lib/systemd/linger`).

**Service management**:

```
# Check service status
systemctl --user status openclaw-gateway.service

# Manual start/stop/restart (use CLI commands instead)
systemctl --user start openclaw-gateway.service
systemctl --user stop openclaw-gateway.service
systemctl --user restart openclaw-gateway.service

# Enable/disable auto-start
systemctl --user enable openclaw-gateway.service
systemctl --user disable openclaw-gateway.service
```

**Logs**:

```
journalctl --user -u openclaw-gateway.service -n 200 --no-pager
journalctl --user -u openclaw-gateway.service -f  # Follow
```

Sources: [docs/start/wizard.md 131-135](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L131-L135) [docs/gateway/troubleshooting.md 110-111](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L110-L111) [docs/platforms/index.md 49-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L49-L50)

### Windows (Task Scheduler)

**Task name**: `OpenClaw Gateway (<profile>)`

**Service management**:

```
# Query task status
schtasks /Query /TN "OpenClaw Gateway" /V /FO LIST

# Manual start/stop (use CLI commands instead)
schtasks /Run /TN "OpenClaw Gateway"
schtasks /End /TN "OpenClaw Gateway"
```

**Logs**: Check via Task Scheduler GUI or `schtasks /Query` output

Sources: [docs/gateway/troubleshooting.md 111-112](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L111-L112)

---

## Service Lifecycle Commands

### Starting the Service

```
openclaw gateway start
```

Starts the Gateway service via the platform supervisor. If the service is already running, this is a no-op.

### Stopping the Service

```
openclaw gateway stop
```

Sends `SIGTERM` to gracefully shut down the Gateway. The service will not restart automatically after a manual stop.

### Restarting the Service

```
openclaw gateway restart
```

Stops then starts the Gateway service. This is the preferred way to apply configuration changes or update the Gateway binary.

**Alternative**: In-process restart via `SIGUSR1` (when authorized by `commands.restart=true` or via gateway tool/config apply/update RPCs).

### Checking Service Status

```
openclaw gateway status
```

Shows comprehensive service state:

| Field | Description |
| --- | --- |
| **Runtime** | Supervisor state: `running`, `stopped`, `loaded` (with PID if running) |
| **RPC probe** | Connectivity test result: `ok` or `failed` |
| **Config (cli)** | Config path used by CLI |
| **Config (service)** | Config path likely used by service (from service env) |
| **Probe target** | URL the CLI attempted to connect to |
| **Last gateway error** | Recent error from logs (when service looks running but port closed) |

**Options**:

- `--no-probe`: Skip RPC connectivity check (faster)
- `--deep`: Add system-level service scans for extra gateway instances
- `--json`: Machine-readable output

### Uninstalling the Service

```
openclaw gateway uninstall
```

Stops the service, removes the service configuration, but leaves state and workspace intact.

Use `openclaw uninstall --all` to remove service, state, and workspace.

Sources: [docs/cli/index.md 589-631](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L589-L631) [docs/gateway/index.md 613-631](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L613-L631)

---

## Service Environment and Configuration

### Environment Variables

The service runs with a minimal `PATH` to avoid shell/manager cruft:

- **macOS**: `/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin`
- **Linux**: `/usr/local/bin:/usr/bin:/bin`

This intentionally excludes version managers (nvm/fnm/volta/asdf) and user-installed package managers that rely on shell init.

**Environment variable loading**:

1. Service environment (minimal PATH)
2. `~/.openclaw/.env` (loaded by Gateway at startup)
3. Config-based overrides (e.g., `gateway.auth.token` from config)

For API keys and secrets, prefer `~/.openclaw/.env` or CLI secrets management over hardcoding in `openclaw.json`.

Sources: [docs/gateway/troubleshooting.md 154-166](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L154-L166) [docs/gateway/index.md 36-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L36-L43)

### Gateway Port Configuration

Port precedence (highest to lowest):

1. `--port` flag
2. `OPENCLAW_GATEWAY_PORT` env var
3. `gateway.port` in config
4. Default: 18789

Example service installation with custom port:

```
openclaw gateway install --port 19000
```

Sources: [docs/gateway/index.md 42](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L42)

### Gateway Bind Configuration

The service bind mode determines network exposure:

- `loopback`: 127.0.0.1 only (default)
- `lan`: 0.0.0.0 (all interfaces)
- `tailnet`: Tailscale IP
- `auto`: Detects best available

**Security requirement**: Non-loopback binds (`lan`, `tailnet`, `auto` when loopback unavailable) require `gateway.auth.token` or `gateway.auth.password`.

See [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration) for detailed bind mode documentation.

Sources: [docs/gateway/index.md 29-30](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L29-L30) [docs/gateway/troubleshooting.md 196-218](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L196-L218)

---

## Multiple Gateway Instances

```
User--dev
~/.openclaw-dev
Port 19001Service:
bot.molt.main (macOS)
openclaw-gateway-main.service (Linux)Service:
bot.molt.rescue (macOS)
openclaw-gateway-rescue.service (Linux)Service:
bot.molt.dev (macOS)
openclaw-gateway-dev.service (Linux)Gateway Process
127.0.0.1:18789Gateway Process
127.0.0.1:19001Gateway Process
127.0.0.1:19001
```

Multiple gateways on the same host require strict isolation:

| Requirement | Why |
| --- | --- |
| Unique `gateway.port` | Prevents bind conflicts |
| Unique `OPENCLAW_CONFIG_PATH` | Separate configuration |
| Unique `OPENCLAW_STATE_DIR` | Separate state/credentials |
| Unique `agents.defaults.workspace` | Separate agent workspaces |
| Separate WhatsApp numbers | One WhatsApp Web session per Gateway |

**Install multiple services**:

```
# Primary Gateway
openclaw --profile main gateway install

# Rescue Gateway
OPENCLAW_STATE_DIR=~/.openclaw-rescue \
OPENCLAW_CONFIG_PATH=~/.openclaw-rescue/openclaw.json \
openclaw --profile rescue gateway install --port 19001
```

**Service names** automatically include profile:

- macOS: `bot.molt.<profile>`
- Linux: `openclaw-gateway-<profile>.service`
- Windows: `OpenClaw Gateway (<profile>)`

Profile-named services are first-class and not flagged as "extra" by `openclaw gateway status --deep`.

Sources: [docs/gateway/index.md 50-68](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L50-L68) [docs/gateway/index.md 96-113](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L96-L113)

The `--dev` flag provides fast profile isolation for development:

```
openclaw --dev setup
openclaw --dev gateway install --allow-unconfigured
openclaw --dev status
```

**Default isolation**:

- `OPENCLAW_STATE_DIR=~/.openclaw-dev`
- `OPENCLAW_CONFIG_PATH=~/.openclaw-dev/openclaw.json`
- `OPENCLAW_GATEWAY_PORT=19001`
- `agents.defaults.workspace=~/.openclaw/workspace-dev`
- Browser control port = 19003 (derived: gateway.port+2)
- Canvas host port = 19005 (derived: gateway.port+4)

Sources: [docs/gateway/index.md 70-95](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L70-L95)

### Rescue-Bot Pattern

A common use case for multiple gateways is a rescue bot: a minimal, isolated Gateway that stays up even if the primary Gateway crashes.

**Setup**:

```
# Install rescue Gateway with separate profile
OPENCLAW_STATE_DIR=~/.openclaw-rescue \
OPENCLAW_CONFIG_PATH=~/.openclaw-rescue/openclaw.json \
openclaw --profile rescue gateway install --port 19002

# Configure minimal rescue agent (different WhatsApp number)
openclaw --profile rescue configure
```

Full guide: [Multiple gateways](https://github.com/openclaw/openclaw/blob/bf6ec64f/Multiple%20gateways)

Sources: [docs/gateway/index.md 54-68](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L54-L68)

---

## Service Status and Diagnostics

### Understanding Service Status Output

```
openclaw gateway statusCheck Supervisor
(launchctl/systemctl/schtasks)Runtime State
running/stopped/loaded + PIDRPC Probe
(WebSocket connect)Probe Result
ok/failedConfig Path ResolutionConfig (cli)
from OPENCLAW_CONFIG_PATH or defaultConfig (service)
from service environmentProbe Target URL
Resolved from config + envScan Recent LogsStatus Output
```

**Key insights from status output**:

1. **"Runtime: running" but "RPC probe: failed"**: The supervisor thinks the process is alive, but the Gateway isn't actually listening. Check logs for bind failures or missing `gateway.mode=local`.
2. **"Config (cli)" â‰  "Config (service)"**: You're editing one config while the service uses another. Rerun `openclaw gateway install --force` from the correct profile.
3. **"Last gateway error" shows bind refusal**: Non-loopback bind requires auth. Set `gateway.auth.token` or `gateway.auth.password`.
4. **"Probe note: probe uses loopback"**: Expected for `bind=lan` (listens on 0.0.0.0, local probe uses 127.0.0.1).

Sources: [docs/gateway/troubleshooting.md 189-231](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L189-L231) [docs/cli/index.md 619-630](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L619-L630)

### Comprehensive Diagnostics Flow

```
YesNoNoYesYesNoYesBunNodemacOSLinuxWindowsService Issueopenclaw status
(local summary)openclaw gateway status
(supervisor + RPC)RPC probe
succeeded?openclaw status --deep
(gateway health checks)openclaw logs --follow
(file logs)gateway.mode
set to local?openclaw config set gateway.mode localNon-loopback
bind?Auth
configured?Set gateway.auth.token
or gateway.auth.passwordRuntime
Node vs Bun?openclaw doctor
(migrate to Node)Check platform-specific logs~/.openclaw/logs/gateway.log
launchctl print gui/$UIDjournalctl --user -u openclaw-gateway.serviceschtasks /Query /TN 'OpenClaw Gateway'openclaw gateway restartopenclaw gateway status
```

Sources: [docs/gateway/troubleshooting.md 17-27](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L17-L27) [docs/help/faq.md 196-236](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L196-L236)

### Common Service Issues

#### Service Installed but Nothing Running

**Symptoms**: `openclaw gateway status` shows "Runtime: loaded" or "Runtime: running" with a stale PID, but RPC probe fails.

**Diagnosis**:

1. Check `openclaw gateway status` for "Last gateway error"
2. Run `openclaw doctor`
3. Check logs (see platform-specific sections above)

**Common causes**:

- Missing `gateway.mode=local` in config
- Non-loopback bind without auth token
- Runtime mismatch (Bun for WhatsApp/Telegram)
- Port conflict

Sources: [docs/gateway/troubleshooting.md 92-124](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L92-L124)

#### Port Not Listening

**Symptoms**: Service runtime shows "running" but nothing listens on the gateway port.

**Diagnosis**:

```
openclaw gateway status  # Check "Last gateway error"
ss -ltnp | grep 18789    # Linux
lsof -i :18789           # macOS
```

**Common causes**:

- `gateway.mode` not set to `local`
- Non-loopback bind without auth configured
- Tailnet bind but Tailscale not running
- Port already in use

**Fix**:

```
openclaw config set gateway.mode local
openclaw config set gateway.auth.token "$(openssl rand -hex 32)"
openclaw gateway restart
```

Sources: [docs/gateway/troubleshooting.md 183-231](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L183-L231)

#### Config Mismatch (CLI vs Service)

**Symptoms**: `openclaw gateway status` shows different paths for "Config (cli)" and "Config (service)".

**Why**: You're editing config while the service uses a different path (different profile or env vars).

**Fix**:

```
# Reinstall from correct profile
openclaw --profile <name> gateway install --force

# Or set matching env
export OPENCLAW_CONFIG_PATH=/path/to/openclaw.json
openclaw gateway install --force
```

Sources: [docs/gateway/troubleshooting.md 202-209](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L202-L209)

---

## Service Logs

### Log Locations

```
macOSLinuxWindowsGateway ProcessFile Log
/tmp/openclaw/openclaw-YYYY-MM-DD.logService Stdout~/.openclaw/logs/gateway.log
~/.openclaw/logs/gateway.err.logjournald
journalctl --userTask Scheduler logsJSONL Format
(structured)TTY Format
(when running)
```

**Primary log**: `/tmp/openclaw/openclaw-YYYY-MM-DD.log` (or configured `logging.file`)

**Service-specific logs**:

- macOS: `$OPENCLAW_STATE_DIR/logs/gateway.log` and `gateway.err.log`
- Linux: `journalctl --user -u openclaw-gateway.service`
- Windows: Task Scheduler GUI

Sources: [docs/gateway/troubleshooting.md 106-123](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L106-L123) [docs/gateway/logging.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/logging.md) (referenced)

### Accessing Logs

**Via RPC (preferred)**:

```
openclaw logs --follow
openclaw logs --limit 200
openclaw logs --json
```

**Direct file access**:

```
tail -f "$(ls -t /tmp/openclaw/openclaw-*.log | head -1)"
```

**Platform-specific**:

```
# macOS
tail -f ~/.openclaw/logs/gateway.log
./scripts/clawlog.sh --follow  # Unified logs

# Linux
journalctl --user -u openclaw-gateway.service -f

# Windows
# Use Task Scheduler GUI
```

Sources: [docs/cli/index.md 633-647](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L633-L647) [AGENTS.md 120-122](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L122)

### Log Levels

**File log detail** (`logging.level`):

- `error`: Errors only
- `warn`: Warnings + errors
- `info`: Info + warnings + errors (default)
- `debug`: Debug + info + warnings + errors

**Console output detail** (`logging.consoleLevel`):

- Same levels as above
- Only applies to TTY output (not service logs)
- `--verbose` flag overrides console level to `debug`

**Configuration**:

```
{
  "logging": {
    "level": "debug",
    "consoleLevel": "info"
  }
}
```

Sources: [docs/gateway/troubleshooting.md 115-123](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L115-L123)

---

## Service Supervision and Signals

### Automatic Restart Policies

All platforms configure automatic restart on failure:

- **macOS**: `KeepAlive=true` in LaunchAgent plist
- **Linux**: `Restart=on-failure` in systemd unit
- **Windows**: Restart task on failure

This ensures the Gateway stays up even if it crashes.

### Signal Handling

| Signal | Behavior |
| --- | --- |
| `SIGTERM` | Graceful shutdown (triggered by stop/restart commands) |
| `SIGUSR1` | In-process restart (when authorized) |
| `SIGINT` | Interrupt (manual Ctrl+C in foreground) |

**In-process restart** (`SIGUSR1`) is triggered by:

- Gateway tool RPCs (`tool.restart`)
- Config apply/patch RPCs (`config.apply`, `config.patch`)
- Update RPC (`update.run`)
- Manual restart command (when `commands.restart=true`)

This allows config hot-reload and updates without losing WebSocket connections.

Sources: [docs/gateway/index.md 26-39](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L26-L39) [docs/gateway/index.md 156](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L156-L156)

### Exit Codes

- `0`: Clean exit
- `1`: Error exit
- `143`: SIGTERM (normal supervisor stop; not a crash)

The supervisor interprets non-zero exits (except 143) as failures and restarts the service.

Sources: [docs/gateway/index.md 38](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L38-L38)

---

- [Gateway](https://deepwiki.com/openclaw/openclaw/3-gateway) - Gateway overview and architecture
- [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration) - Config options (port, bind, auth, Tailscale)
- [Gateway Protocol](https://deepwiki.com/openclaw/openclaw/3.2-gateway-protocol) - WebSocket RPC protocol specification
- [Remote Access](https://deepwiki.com/openclaw/openclaw/3.4-remote-access) - SSH tunnels, Tailscale Serve, security considerations
- [Gateway Troubleshooting](https://github.com/openclaw/openclaw/blob/bf6ec64f/Gateway%20Troubleshooting) - Detailed troubleshooting guide
- [Multiple Gateways](https://github.com/openclaw/openclaw/blob/bf6ec64f/Multiple%20Gateways) - Running multiple isolated gateways

Sources: [docs/docs.json 951-986](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/docs.json#L951-L986)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>