Menu

## Built-in Tools

Relevant source files
- [.npmrc](https://github.com/openclaw/openclaw/blob/bf6ec64f/.npmrc)
- [CHANGELOG.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/CHANGELOG.md)
- [README.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md)
- [assets/avatar-placeholder.svg](https://github.com/openclaw/openclaw/blob/bf6ec64f/assets/avatar-placeholder.svg)
- [docs/gateway/configuration-examples.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/configuration-examples.md)
- [docs/gateway/configuration.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/configuration.md)
- [docs/gateway/sandbox-vs-tool-policy-vs-elevated.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/sandbox-vs-tool-policy-vs-elevated.md)
- [docs/gateway/sandboxing.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/sandboxing.md)
- [docs/multi-agent-sandbox-tools.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/multi-agent-sandbox-tools.md)
- [docs/tools/elevated.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/tools/elevated.md)
- [docs/tools/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/tools/index.md)
- [docs/tools/slash-commands.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/tools/slash-commands.md)
- [extensions/memory-core/package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/extensions/memory-core/package.json)
- [package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json)
- [pnpm-lock.yaml](https://github.com/openclaw/openclaw/blob/bf6ec64f/pnpm-lock.yaml)
- [pnpm-workspace.yaml](https://github.com/openclaw/openclaw/blob/bf6ec64f/pnpm-workspace.yaml)
- [scripts/clawtributors-map.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/clawtributors-map.json)
- [scripts/update-clawtributors.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/update-clawtributors.ts)
- [scripts/update-clawtributors.types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/update-clawtributors.types.ts)
- [src/agents/bash-tools.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.ts)
- [src/agents/pi-embedded-helpers.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-helpers.ts)
- [src/agents/pi-embedded-runner-extraparams.live.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-runner-extraparams.live.test.ts)
- [src/agents/pi-embedded-runner-extraparams.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-runner-extraparams.test.ts)
- [src/agents/pi-embedded-runner.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-runner.ts)
- [src/agents/pi-embedded-subscribe.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-subscribe.ts)
- [src/agents/pi-tools.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts)
- [src/agents/sandbox.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/sandbox.ts)
- [src/auto-reply/command-detection.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/command-detection.ts)
- [src/auto-reply/commands-args.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/commands-args.ts)
- [src/auto-reply/commands-registry.data.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/commands-registry.data.ts)
- [src/auto-reply/commands-registry.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/commands-registry.test.ts)
- [src/auto-reply/commands-registry.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/commands-registry.ts)
- [src/auto-reply/commands-registry.types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/commands-registry.types.ts)
- [src/auto-reply/group-activation.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/group-activation.ts)
- [src/auto-reply/reply.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/reply.ts)
- [src/auto-reply/reply/commands-info.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/reply/commands-info.test.ts)
- [src/auto-reply/reply/commands-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/reply/commands-info.ts)
- [src/auto-reply/reply/commands.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/reply/commands.ts)
- [src/auto-reply/reply/directive-handling.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/reply/directive-handling.ts)
- [src/auto-reply/send-policy.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/send-policy.ts)
- [src/auto-reply/status.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/status.test.ts)
- [src/auto-reply/status.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/status.ts)
- [src/auto-reply/templating.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/auto-reply/templating.ts)
- [src/config/types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/types.ts)
- [src/config/zod-schema.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/zod-schema.ts)
- [src/discord/monitor/native-command.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/discord/monitor/native-command.ts)
- [src/index.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/index.ts)
- [src/slack/monitor/slash.command-arg-menus.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/slack/monitor/slash.command-arg-menus.test.ts)
- [src/slack/monitor/slash.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/slack/monitor/slash.ts)
- [src/telegram/bot-handlers.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/telegram/bot-handlers.ts)
- [src/telegram/bot/types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/telegram/bot/types.ts)
- [ui/package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/package.json)
- [ui/src/styles.css](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/src/styles.css)
- [ui/src/styles/layout.mobile.css](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/src/styles/layout.mobile.css)

This page documents the core tools available to OpenClaw agents for file operations, command execution, browser control, messaging, session management, and automation. For tool security policies and sandboxing, see [Tool Security and Sandboxing](https://deepwiki.com/openclaw/openclaw/6.2-tool-security-and-sandboxing). For skills integration and custom capabilities, see [Skills System](https://deepwiki.com/openclaw/openclaw/6.3-skills-system). For channel-specific tools and plugin tools, see [Extensions and Plugins](https://deepwiki.com/openclaw/openclaw/10-extensions-and-plugins).

---

## Tool Categories

OpenClaw provides 20+ built-in tools organized into functional groups. Tools are registered during agent initialization and filtered by configured policies before being sent to model providers.

```
Data ToolsUI & AutomationMessaging & SessionsExecution ToolsFile System ToolsTool RegistrycreateOpenClawCodingTools
[src/agents/pi-tools.ts]codingTools
@mariozechner/pi-coding-agentcreateOpenClawTools
[src/agents/openclaw-tools.ts]listChannelAgentTools
[src/agents/channel-tools.ts]read
createReadToolwrite
createWriteTooledit
createEditToolapply_patch
createApplyPatchToolexec
createExecToolprocess
createProcessToolmessage
message toolsessions_listsessions_historysessions_sendsessions_spawnsession_statusbrowsercanvasnodescrongatewaymemory_searchmemory_getweb_searchweb_fetchimage
```

**Sources**: [src/agents/pi-tools.ts 228-338](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L228-L338) [src/agents/openclaw-tools.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.ts)

---

## File System Tools

### read

Reads file contents from the workspace. In sandboxed sessions, only files within the sandbox workspace directory are accessible.

**Parameters**:

- `path` (string, required): File path relative to workspace root
- `encoding` (string, optional): Character encoding (default: `utf-8`)

**Created by**: `createReadTool` from `@mariozechner/pi-coding-agent` or `createSandboxedReadTool` for sandboxed environments [src/agents/pi-tools.ts 233-236](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L233-L236)

**Tool policy group**: `group:fs`

---

### write

Writes content to a file in the workspace. Only available in non-sandboxed sessions or sandboxed sessions with `workspaceAccess` not set to `ro`.

**Parameters**:

- `path` (string, required): File path relative to workspace root
- `content` (string, required): Content to write
- `encoding` (string, optional): Character encoding (default: `utf-8`)

**Created by**: `createWriteTool` from `@mariozechner/pi-coding-agent` or `createSandboxedWriteTool` for sandboxed environments [src/agents/pi-tools.ts 238-243](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L238-L243)

**Tool policy group**: `group:fs`

---

### edit

Edits a file using search/replace patterns. Only available in writable workspaces.

**Parameters**:

- `path` (string, required): File path relative to workspace root
- `edits` (array, required): Array of `{search: string, replace: string}` operations
- `dryRun` (boolean, optional): Preview changes without applying

**Created by**: `createEditTool` from `@mariozechner/pi-coding-agent` or `createSandboxedEditTool` for sandboxed environments [src/agents/pi-tools.ts 245-249](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L245-L249)

**Tool policy group**: `group:fs`

---

### apply\_patch

Applies unified diff patches to workspace files. Only available for OpenAI and OpenAI Codex providers when enabled via `tools.exec.applyPatch.enabled` and model allowlist.

**Parameters**:

- `path` (string, required): Target file path
- `patch` (string, required): Unified diff content

**Configuration**:

```
{
  tools: {
    exec: {
      applyPatch: {
        enabled: true,
        allowModels: ["openai/gpt-5.2", "openai-codex/codex"]
      }
    }
  }
}
```

**Created by**: `createApplyPatchTool` when `isApplyPatchAllowedForModel` returns true [src/agents/pi-tools.ts 219-291](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L219-L291)

**Tool policy group**: `group:fs`

**Sources**: [src/agents/pi-tools.ts 59-79](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L59-L79) [src/agents/apply-patch.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/apply-patch.ts)

---

## Execution Tools

### exec

Executes shell commands with approval workflow, security policies, and optional sandboxing.

**Parameters**:

- `command` (string, required): Shell command to execute
- `cwd` (string, optional): Working directory
- `timeout` (number, optional): Execution timeout in seconds
- `background` (boolean, optional): Run in background (requires `process` tool)
- `env` (object, optional): Environment variables

**Security policies**:

- `host`: `sandbox` (default) | `gateway` | `node:<id>`
- `security`: `deny` | `allowlist` | `full`
- `ask`: `off` | `on-miss` | `always`

Configured via:

- Global: `tools.exec.host`, `tools.exec.security`, `tools.exec.ask`
- Per-session: `/exec` directive
- Elevated mode: `/elevated` directive for `ask` override

**Approval workflow**:

1. Command checked against allowlist when `security` is `allowlist`
2. Safe binaries bypass approval (e.g., `ls`, `cat`, `grep`)
3. On miss, send approval prompt to channel when `ask` is enabled
4. User approves via `/approve <id> allow-once|allow-always|deny`

**Sandbox execution**: When `host=sandbox`, commands run inside Docker container:

- Working directory: `sandbox.containerWorkdir` (default: `/workspace`)
- Workspace mount: `sandbox.workspaceDir` (host) â†’ container path
- Environment: `sandbox.docker.env`

**Created by**: `createExecTool` [src/agents/pi-tools.ts 252-280](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L252-L280)

**Tool policy group**: `group:runtime`

**Sources**: [src/agents/bash-tools.exec.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.exec.ts) [src/agents/pi-tools.ts 81-280](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L81-L280)

---

### bash

Alias for `exec` tool. Same parameters and behavior.

**Tool policy group**: `group:runtime`

---

### process

Manages background processes started by `exec` with `background: true`.

**Actions**:

- `list`: Show running background processes
- `stop`: Terminate a background process by ID
- `get`: Get process status and output

**Parameters**:

- `action` (string, required): `list` | `stop` | `get`
- `processId` (string, optional): Process ID for `stop` / `get` actions

**Cleanup**: Processes auto-cleanup after `tools.exec.cleanupMs` (default: 3600000ms = 1 hour)

**Created by**: `createProcessTool` [src/agents/pi-tools.ts 281-284](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L281-L284)

**Tool policy group**: `group:runtime`

**Sources**: [src/agents/bash-tools.process.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.process.ts)

---

## Tool Execution Pipeline

```
DeniedAllowedSandboxedHostRequiredNot requiredApprovedDeniedsandboxgatewaynodeModel requests tool call
{name: 'exec', arguments: {...}}Tool Router
subscribeEmbeddedPiSessionTool Policy
CheckSandbox
Context?Approval
Required?Exec Host?Execute on Gateway Host
runCommandWithTimeoutExecute in Docker
docker exec -it Execute on Device Node
node.invoke RPCTool Result
{success, output, error}Send approval prompt
wait for /approve
```

**Sources**: [src/agents/pi-embedded-subscribe.handlers.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-subscribe.handlers.ts) [src/agents/bash-tools.exec.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.exec.ts) [src/process/exec.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/process/exec.ts)

---

## Messaging Tools

### message

Sends messages to channels with support for different actions (send, edit, reply, react).

**Parameters**:

- `action` (string, required): `send` | `edit` | `reply` | `react` | `sendAttachment` | `threadReply`
- `channel` (string, optional): Target channel (e.g., `telegram`, `discord`)
- `accountId` (string, optional): Multi-account routing
- `to` (string, optional): Recipient identifier
- `threadId` (string/number, optional): Thread/topic ID
- `text` (string, optional): Message text
- `messageId` (string, optional): Message ID for edit/reply/react
- `reaction` (string, optional): Emoji for react action
- `path` (string, optional): File path for sendAttachment
- `buttons` (array, optional): Inline buttons (Telegram only)

**Auto-threading** (Slack): When `replyToMode` is `first` or `all`, replies automatically thread to the conversation start.

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.ts)

**Tool policy group**: `group:messaging`

**Sources**: [src/agents/openclaw-tools.message.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.message.ts)

---

## Session Management Tools

Session tools enable agents to coordinate work across sessions, inspect conversation state, and spawn sub-agents.

### sessions\_list

Lists active sessions with metadata (agent, channel, last message time, token counts).

**Parameters**:

- `filter` (object, optional): `{agentId?, channel?, active?}`

**Returns**: Array of session descriptors with keys, labels, and stats.

---

### sessions\_history

Fetches transcript history for a session.

**Parameters**:

- `sessionKey` (string, required): Target session key
- `limit` (number, optional): Max number of turns (default: 50)
- `format` (string, optional): `json` | `text` (default: `text`)

**Returns**: Formatted conversation history.

---

### sessions\_send

Sends a message to another session with optional reply-back and announcement.

**Parameters**:

- `sessionKey` (string, required): Target session key
- `text` (string, required): Message to send
- `replyBack` (boolean, optional): Wait for reply (default: false)
- `announce` (string, optional): Announcement mode (`ANNOUNCE_SKIP` | `REPLY_SKIP`)
- `waitForReply` (boolean, optional): Block until reply received

**Use case**: Cross-session coordination without switching chat surfaces.

---

### sessions\_spawn

Spawns a sub-agent in a new session lane with tool restrictions.

**Parameters**:

- `prompt` (string, required): Sub-agent task prompt
- `lane` (string, optional): Lane identifier (default: auto-generated)
- `model` (string, optional): Model override
- `thinkingLevel` (string, optional): Thinking level override

**Tool policy**: Sub-agents inherit `tools.subagent` policy (default: deny most tools) [src/agents/pi-tools.policy.ts 195-203](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.policy.ts#L195-L203)

**Returns**: Session key for spawned agent and final result.

---

### session\_status

Returns current session metadata: model, token counts, context usage, thinking level, queue settings.

**Parameters**: None

**Returns**: Structured session status for agent self-awareness.

**Tool policy group**: `group:sessions` (except `session_status` which is always available)

**Sources**: [src/agents/openclaw-tools.sessions.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.sessions.ts)

---

## Browser Control

### browser

Controls browser instances with snapshot, navigation, and evaluation capabilities.

**Actions**:

- `snapshot`: Capture page screenshot/accessibility tree
- `navigate`: Go to URL
- `click`: Click element by selector
- `type`: Type text into input
- `evaluate`: Run JavaScript (requires `evaluateEnabled`)
- `upload`: Upload file to input
- `profiles.list`: List browser profiles
- `profiles.launch`: Launch profile browser
- `profiles.close`: Close profile browser

**Snapshot modes**:

- `efficient`: Accessibility tree only (default)
- `full`: Screenshot + accessibility tree
- `screenshot`: Screenshot only
- `accessibility`: Accessibility tree only

**Configuration**:

```
{
  browser: {
    enabled: true,
    evaluateEnabled: false,
    defaultProfile: "default",
    profiles: {
      "shopping": {
        cdpPort: 9223,
        color: "#FF5722"
      }
    },
    snapshotDefaults: { mode: "efficient" }
  }
}
```

**Sandbox browser**: When sandboxed, browser runs in container with bridge relay [src/agents/sandbox/browser.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/sandbox/browser.ts)

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.browser.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.browser.ts)

**Tool policy group**: `group:ui`

**Sources**: [src/browser/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/browser/tool.ts) [src/agents/openclaw-tools.browser.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.browser.ts)

---

## Canvas Control

### canvas

Manages live Canvas UI surfaces (A2UI) on iOS/Android/macOS nodes.

**Actions**:

- `reset`: Initialize canvas with A2UI markup
- `push`: Update canvas state
- `eval`: Evaluate JavaScript in canvas context
- `snapshot`: Capture current canvas state

**Parameters**:

- `action` (string, required): Action type
- `a2ui` (string, optional): A2UI markup for `reset` / `push`
- `code` (string, optional): JavaScript for `eval`
- `nodeId` (string, optional): Target device node

**A2UI format**: XML-like markup for declarative UI:

```
<screen>
  <text>Hello from OpenClaw</text>
  <button action="submit">Click me</button>
</screen>
```

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.canvas.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.canvas.ts)

**Tool policy group**: `group:ui`

**Sources**: [src/canvas-host/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/canvas-host/tool.ts) [docs/platforms/mac/canvas.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/canvas.md)

---

## Device Node Tools

### nodes

Invokes capabilities on paired device nodes (iOS, Android, macOS).

**Actions**:

- `camera.snap`: Take photo
- `camera.clip`: Record video
- `screen.record`: Screen recording
- `location.get`: GPS coordinates
- `system.notify`: Send notification (macOS only)
- `system.run`: Execute command (macOS only)

**Parameters**:

- `action` (string, required): Capability action
- `nodeId` (string, optional): Target node (default: first available)
- Additional action-specific parameters

**Permissions**: Actions respect node TCC permissions (camera, location, notifications)

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.nodes.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.nodes.ts)

**Tool policy group**: `group:nodes`

**Sources**: [src/nodes/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/nodes/tool.ts) [docs/nodes/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/nodes/index.md)

---

## Automation Tools

### cron

Schedules recurring tasks with cron expressions.

**Actions**:

- `list`: Show scheduled tasks
- `add`: Create new cron job
- `remove`: Delete cron job
- `run`: Trigger immediate execution

**Parameters**:

- `action` (string, required): Action type
- `id` (string, optional): Job ID for remove/run
- `schedule` (string, optional): Cron expression for add
- `prompt` (string, optional): Task prompt for add
- `channel` (string, optional): Delivery channel
- `to` (string, optional): Delivery target

**Cron store**: Jobs persisted to `~/.openclaw/cron-store.json` by default

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.cron.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.cron.ts)

**Tool policy group**: `group:automation`

**Sources**: [src/cron/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/tool.ts) [docs/automation/cron-jobs.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/automation/cron-jobs.md)

---

### gateway

Manages Gateway configuration and state.

**Actions**:

- `config.get`: Read configuration
- `config.patch`: Partial config update
- `config.apply`: Full config replacement
- `restart`: Restart Gateway

**Parameters**:

- `action` (string, required): Action type
- `raw` (string, optional): JSON5 config for patch/apply
- `baseHash` (string, optional): Config hash for conflict detection
- `sessionKey` (string, optional): Wake session after restart

**Security**: Requires explicit allow policy (not in default allowlists)

**Created by**: Part of `createOpenClawTools` [src/agents/openclaw-tools.gateway.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/openclaw-tools.gateway.ts)

**Tool policy group**: `group:automation`

**Sources**: [src/gateway/rpc/config.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/rpc/config.ts)

---

## Memory Tools

Searches workspace files using hybrid BM25 + vector search.

**Parameters**:

- `query` (string, required): Search query
- `limit` (number, optional): Max results (default: 10)
- `filter` (object, optional): Path/extension filters

**Returns**: Ranked file chunks with relevance scores.

**Configuration**:

```
{
  memorySearch: {
    enabled: true,
    provider: "openai",
    model: "text-embedding-3-small",
    syncOnStart: true
  }
}
```

---

### memory\_get

Retrieves specific file from memory index by ID.

**Parameters**:

- `id` (string, required): Memory chunk ID from search results

**Returns**: Full file content for the chunk.

**Tool policy group**: `group:memory`

**Sources**: [extensions/memory-core/index.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/extensions/memory-core/index.ts) [docs/concepts/memory.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/concepts/memory.md)

---

## Web Tools

Performs web searches via configured provider (Brave, Tavily, Perplexity, Exa).

**Parameters**:

- `query` (string, required): Search query
- `limit` (number, optional): Max results
- `freshness` (string, optional): Time filter (Brave only)

**Returns**: Ranked search results with titles, URLs, snippets.

---

### web\_fetch

Fetches and extracts content from URLs.

**Parameters**:

- `url` (string, required): Target URL
- `format` (string, optional): `text` | `markdown` | `html`

**Returns**: Extracted content using Mozilla Readability.

**Tool policy group**: `group:web`

**Sources**: [src/web/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/web/tool.ts) [docs/tools/web.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/tools/web.md)

---

## Image Tools

### image

Processes images with vision models when primary model lacks vision capability.

**Actions**:

- `understand`: Generate image description
- `caption`: Brief caption

**Parameters**:

- `action` (string, required): Action type
- `path` (string, required): Image file path

**Model**: Uses `mediaUnderstanding.model` configuration (default: `anthropic/claude-haiku-4`)

**Automatic invocation**: When non-vision model receives image attachment, tool auto-invokes for understanding.

**Sources**: [src/media-understanding/tool.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/media-understanding/tool.ts) [src/media-understanding/auto-invoke.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/media-understanding/auto-invoke.ts)

---

## Tool Groups for Policy Configuration

Tool policies support `group:*` entries that expand to multiple tools. Use in `tools.allow`, `tools.deny`, `tools.profile`, and `agents.list[].tools` policies.

| Group | Tools |
| --- | --- |
| `group:runtime` | `exec`, `bash`, `process` |
| `group:fs` | `read`, `write`, `edit`, `apply_patch` |
| `group:sessions` | `sessions_list`, `sessions_history`, `sessions_send`, `sessions_spawn`, `session_status` |
| `group:memory` | `memory_search`, `memory_get` |
| `group:web` | `web_search`, `web_fetch` |
| `group:ui` | `browser`, `canvas` |
| `group:automation` | `cron`, `gateway` |
| `group:messaging` | `message` |
| `group:nodes` | `nodes` |
| `group:openclaw` | All built-in OpenClaw tools (excludes plugin tools) |

**Example**:

```
{
  tools: {
    allow: ["group:fs", "group:messaging", "sessions_list"]
  }
}
```

**Sources**: [src/agents/tool-policy.ts 97-127](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/tool-policy.ts#L97-L127) [docs/tools/index.md 129-145](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/tools/index.md#L129-L145)

---

## Tool Registration Flow

```
Load Configuration
loadConfigInitialize Agent
runEmbeddedPiAgentcreateOpenClawCodingTools
[src/agents/pi-tools.ts:153]Load Base Coding Tools
codingTools from pi-coding-agent
(read, write, edit)createExecTool
[bash-tools.exec.ts]createProcessTool
[bash-tools.process.ts]createApplyPatchTool
(if enabled for model)createOpenClawTools
[openclaw-tools.ts]
(browser, canvas, message, etc)Resolve Tool Policy
resolveEffectiveToolPolicy
[pi-tools.policy.ts:66-96]Expand Tool Groups
expandPolicyWithPluginGroups
[tool-policy.ts:203-232]Filter by Policy
filterToolsByPolicy
[pi-tools.policy.ts:35-64]Wrap with AbortSignal
wrapToolWithAbortSignal
```

**Sources**: [src/agents/pi-tools.ts 153-367](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L153-L367) [src/agents/pi-tools.policy.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.policy.ts) [src/agents/tool-policy.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/tool-policy.ts)

---

## Tool Policy Precedence

Tool availability is determined by layered policies evaluated in this order:

1. **Tool Profile** (`tools.profile` or `agents.list[].tools.profile`)
	- `minimal`: Only `session_status`
	- `coding`: File system + runtime + sessions + memory
	- `messaging`: Message + sessions list/history/send
	- `full`: No restrictions (default)
2. **Provider-specific Profile** (`tools.byProvider.<provider>.profile`)
	- Further restricts tools for specific model providers
	- Example: `minimal` for Google Antigravity
3. **Global Allow/Deny** (`tools.allow`, `tools.deny`)
	- Deny wins over allow
4. **Agent-specific Allow/Deny** (`agents.list[].tools.allow/deny`)
	- Per-agent overrides
5. **Provider-specific Allow/Deny** (`tools.byProvider.<provider>.allow/deny`)
	- Most specific, evaluated per model request
6. **Group-level Policy** (for group messages)
	- Per-group/channel tool restrictions via `channels.<provider>.groups.<id>.tools`
7. **Sandbox Policy** (`agents.defaults.sandbox.tools` or `agents.list[].sandbox.tools`)
	- When sandboxed, sandbox policy applies
8. **Sub-agent Policy** (`tools.subagent`)
	- For spawned sub-agents via `sessions_spawn`
	- Default: deny most tools except `group:fs`, `sessions_list`, `sessions_history`

**Example multi-layer policy**:

```
{
  tools: {
    profile: "coding",                        // Layer 1: base
    allow: ["group:fs", "group:messaging"],   // Layer 3: global
    deny: ["exec"],                           // Layer 3: global
    byProvider: {                             // Layer 5: provider
      "google-antigravity": {
        profile: "minimal"                    // Layer 2: provider profile
      },
      "openai/gpt-5.2": {
        allow: ["read", "write"]              // Layer 5: provider allow
      }
    }
  },
  agents: {
    list: [
      {
        id: "support",
        tools: {                               // Layer 4: agent
          profile: "messaging",
          allow: ["slack", "discord"]
        },
        sandbox: {
          mode: "all",
          tools: {                             // Layer 7: sandbox
            deny: ["browser", "canvas"]
          }
        }
      }
    ]
  },
  channels: {
    telegram: {
      groups: {
        "*": {
          tools: {                             // Layer 6: group
            allow: ["message", "sessions_list"]
          }
        }
      }
    }
  }
}
```

**Sources**: [src/agents/pi-tools.ts 156-171](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.ts#L156-L171) [src/agents/pi-tools.policy.ts 66-130](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools.policy.ts#L66-L130) [src/agents/tool-policy.ts 47-85](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/tool-policy.ts#L47-L85)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>