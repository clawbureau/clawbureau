Menu

## Configuration Commands

Relevant source files
- [docs/cli/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md)
- [docs/gateway/doctor.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/doctor.md)
- [docs/gateway/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md)
- [docs/gateway/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md)
- [docs/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md)
- [docs/start/getting-started.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md)
- [docs/start/wizard.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md)
- [src/agents/agent-scope.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/agent-scope.test.ts)
- [src/agents/agent-scope.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/agent-scope.ts)
- [src/agents/bash-tools.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/bash-tools.test.ts)
- [src/agents/model-auth.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/model-auth.ts)
- [src/agents/pi-tools-agent-config.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-tools-agent-config.test.ts)
- [src/agents/sandbox-skills.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/sandbox-skills.test.ts)
- [src/commands/auth-choice-options.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice-options.test.ts)
- [src/commands/auth-choice-options.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice-options.ts)
- [src/commands/auth-choice.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice.test.ts)
- [src/commands/auth-choice.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice.ts)
- [src/commands/configure.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/configure.ts)
- [src/commands/doctor.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts)
- [src/commands/onboard-auth.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-auth.test.ts)
- [src/commands/onboard-auth.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-auth.ts)
- [src/commands/onboard-non-interactive.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-non-interactive.ts)
- [src/commands/onboard-types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-types.ts)
- [src/wizard/onboarding.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/wizard/onboarding.ts)

This page documents the CLI commands for managing OpenClaw configuration: initializing, editing, repairing, and resetting the configuration file at `~/.openclaw/openclaw.json`. These commands provide both interactive and non-interactive interfaces for configuration management.

For general CLI reference, see [CLI Reference](https://deepwiki.com/openclaw/openclaw/12-cli-reference). For channel-specific configuration, see [Channel Commands](https://deepwiki.com/openclaw/openclaw/12.3-channel-commands). For model configuration, see [Model Commands](https://deepwiki.com/openclaw/openclaw/12.4-model-commands). For diagnostic and repair operations beyond configuration, see [Diagnostic Commands](https://deepwiki.com/openclaw/openclaw/12.6-diagnostic-commands).

---

## Overview

OpenClaw provides five primary configuration commands:

| Command | Purpose | Mode | Config File Required |
| --- | --- | --- | --- |
| `openclaw setup` | Initialize minimal configuration | Interactive/Non-interactive | No |
| `openclaw onboard` | Full guided setup wizard | Interactive/Non-interactive | No |
| `openclaw configure` | Reconfigure specific sections | Interactive | Optional |
| `openclaw config` | Direct key manipulation | Non-interactive | Yes |
| `openclaw doctor` | Validate and repair configuration | Interactive/Non-interactive | Optional |
| `openclaw reset` | Remove configuration and state | Interactive/Non-interactive | Optional |
| `openclaw uninstall` | Remove service and state | Interactive/Non-interactive | Optional |

All commands write to `~/.openclaw/openclaw.json` (or `$OPENCLAW_CONFIG_PATH`) and respect the `--dev` and `--profile` flags for state isolation.

**Sources**: [docs/cli/index.md 87-102](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L87-L102) [src/commands/doctor.ts 1-306](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts#L1-L306)

---

## Configuration File Lifecycle

```
DestructionValidation & RepairModificationInitial SetupInvalidNew Installopenclaw setup
Minimal configopenclaw onboard
Full wizard~/.openclaw/openclaw.jsonopenclaw configure
Section wizardopenclaw config get
Read valueopenclaw config set
Write valueopenclaw config unset
Delete valueopenclaw doctor
Validate + migrateConfig migrations
State migrations
Service repairsopenclaw reset
Delete config/stateopenclaw uninstall
Remove serviceConfig/state removedOpenClawSchema
Zod validation
```

**Diagram**: Configuration file lifecycle showing command relationships and data flow

**Sources**: [docs/start/wizard.md 1-322](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L1-L322) [docs/gateway/doctor.md 1-224](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/doctor.md#L1-L224) [src/commands/doctor.ts 58-306](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts#L58-L306)

---

## Setup Command

### Purpose

`openclaw setup` initializes a minimal configuration file, creating the necessary directory structure and a starter config. It does not run the full onboarding wizard unless `--wizard` is passed.

### Implementation

```
YesNoCLI EntryParse Options
--workspace
--wizard
--non-interactiveWizard flags
present?runOnboardingWizardCreate minimal config
Default workspace
No auth
No channelswriteConfigFileSetup complete
```

**Diagram**: Setup command execution flow

### Options

| Flag | Type | Description | Default |
| --- | --- | --- | --- |
| `--workspace <dir>` | string | Agent workspace path | `~/.openclaw/workspace` |
| `--wizard` | boolean | Run onboarding wizard | `false` |
| `--non-interactive` | boolean | Skip prompts | `false` |
| `--mode <local\|remote>` | string | Wizard mode | \- |
| `--remote-url <url>` | string | Remote Gateway URL | \- |
| `--remote-token <token>` | string | Remote Gateway token | \- |

**Sources**: [docs/cli/index.md 276-289](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L276-L289) [src/wizard/onboarding.ts 87-451](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/wizard/onboarding.ts#L87-L451)

---

## Onboard Command

### Purpose

`openclaw onboard` runs the comprehensive onboarding wizard, configuring model authentication, gateway settings, channels, workspace, skills, and optionally installing the background service.

### Architecture

```
YesNoRemoteLocalopenclaw onboardParse CLI flags
--non-interactive
--mode
--auth-choice
etcNon-interactive
mode?runNonInteractiveOnboardingrunOnboardingWizardApply flag-based config
No promptswriteConfigFileRisk acknowledgementreadConfigFileSnapshot
Detect existing configSelect flow
QuickStart/AdvancedSelect mode
Local/RemotepromptRemoteGatewayConfigLocal onboarding flowpromptAuthChoiceGrouped
Select provider/authapplyAuthChoice
Store credentialspromptDefaultModel
Select primary modelconfigureGatewayForOnboarding
Port/bind/auth/tailscalesetupChannels
Configure providersensureWorkspaceAndSessions
Create dirs + bootstrapsetupSkills
Install dependenciessetupInternalHooks
Session memory hookswriteConfigFile
Apply wizard metadatafinalizeOnboardingWizard
Service install + health checkwriteConfigFileOnboard complete
```

**Diagram**: Onboarding wizard execution flow with branching for interactive/non-interactive modes

### Interactive Flow Sections

The wizard walks through these sections in sequence (for local mode):

1. **Risk Acknowledgement**: Security warning about agent capabilities
2. **Existing Config Handling**: Keep/Modify/Reset options
3. **Flow Selection**: QuickStart (defaults) or Advanced (full control)
4. **Mode Selection**: Local gateway or Remote connection
5. **Auth Configuration**: Model provider authentication (OAuth/API key)
6. **Model Selection**: Primary model and optional fallbacks
7. **Gateway Configuration**: Port, bind mode, auth mode, Tailscale exposure
8. **Channels Configuration**: WhatsApp/Telegram/Discord/Signal/etc setup
9. **Workspace Setup**: Create workspace directory and bootstrap files
10. **Skills Setup**: Install optional dependencies for skills
11. **Hooks Setup**: Configure session memory hooks
12. **Service Installation**: Install and start background service (optional)
13. **Health Check**: Verify gateway reachability

**Sources**: [src/wizard/onboarding.ts 46-451](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/wizard/onboarding.ts#L46-L451) [docs/start/wizard.md 48-149](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L48-L149)

### Non-Interactive Mode

When `--non-interactive` is passed, the wizard requires all configuration via CLI flags:

```
openclaw onboard --non-interactive \
  --mode local \
  --auth-choice apiKey \
  --anthropic-api-key "$ANTHROPIC_API_KEY" \
  --gateway-port 18789 \
  --gateway-bind loopback \
  --install-daemon \
  --daemon-runtime node
```

Implementation branches at [src/commands/onboard-non-interactive.ts 10-37](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-non-interactive.ts#L10-L37):

```
NoYesremotelocalrunNonInteractiveOnboardingreadConfigFileSnapshotConfig valid?mode?runNonInteractiveOnboardingRemoterunNonInteractiveOnboardingLocal
```

**Diagram**: Non-interactive onboarding branch selection

**Sources**: [src/commands/onboard-non-interactive.ts 1-37](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-non-interactive.ts#L1-L37) [docs/start/wizard.md 183-274](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L183-L274)

### Auth Choice Flow

Authentication configuration is handled by `applyAuthChoice` [src/commands/auth-choice.ts 1-4](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice.ts#L1-L4) which supports multiple authentication methods:

| Auth Choice | Provider | Storage | Notes |
| --- | --- | --- | --- |
| `token` | Anthropic | `auth-profiles.json` | Setup-token from `claude setup-token` |
| `apiKey` | Anthropic | `auth-profiles.json` | API key |
| `openai-codex` | OpenAI | `oauth.json` + `auth-profiles.json` | ChatGPT OAuth |
| `openai-api-key` | OpenAI | `auth-profiles.json` | API key |
| `github-copilot` | GitHub | `auth-profiles.json` | Device flow OAuth |
| `gemini-api-key` | Google | `auth-profiles.json` | API key |
| `minimax-api` | MiniMax | `auth-profiles.json` | API key |
| `synthetic-api-key` | Synthetic | `auth-profiles.json` | API key |
| `opencode-zen` | OpenCode | `auth-profiles.json` | API key |
| `chutes` | Chutes | `oauth.json` + `auth-profiles.json` | OAuth |
| `skip` | \- | \- | No auth configured |

The system groups these choices by provider for easier selection [src/commands/auth-choice-options.ts 33-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice-options.ts#L33-L228)

**Sources**: [src/commands/auth-choice.ts 1-4](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice.ts#L1-L4) [src/commands/auth-choice-options.ts 1-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/auth-choice-options.ts#L1-L228) [docs/start/wizard.md 83-106](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L83-L106)

---

## Configure Command

### Purpose

`openclaw configure` provides an interactive section-based configuration editor. It presents a menu of configuration domains and guides the user through editing each section.

### Available Sections

The sections are defined in `CONFIGURE_WIZARD_SECTIONS` [src/commands/configure.ts 3](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/configure.ts#L3-L3):

| Section | Configuration Domain | Purpose |
| --- | --- | --- |
| `models` | Model providers and authentication | Add/edit model auth profiles |
| `gateway` | Gateway server settings | Port, bind, auth, Tailscale |
| `channels` | Messaging channel integrations | Add/configure channels |
| `skills` | Skill dependencies | Install skill requirements |
| `web` | Web tools (search, fetch) | API keys for web tools |
| `security` | Security audit and fixes | Run security checks |

When invoked without `--section`, configure presents a menu to choose which section to edit.

### Usage

```
# Interactive menu
openclaw configure

# Direct to specific section
openclaw configure --section models
openclaw configure --section gateway
openclaw configure --section channels
openclaw configure --section web
```

**Sources**: [src/commands/configure.ts 1-5](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/configure.ts#L1-L5) [docs/cli/index.md 334-340](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L334-L340)

---

## Config Command

### Purpose

`openclaw config` provides non-interactive direct manipulation of configuration values using dot/bracket notation paths.

### Subcommands

```
Nonegetsetunsetopenclaw configArguments?Launch configure wizardconfig get <path>
Print valueconfig set <path> <value>
Write valueconfig unset <path>
Delete keyreadConfigFileSnapshotResolve dot/bracket pathPrint JSON valueParse value
JSON5 or raw stringMerge into configwriteConfigFileDelete key from config
```

**Diagram**: Config command subcommand execution flow

### Examples

```
# Get a value
openclaw config get gateway.port
openclaw config get agents.defaults.model.primary

# Set a value (JSON5 or string)
openclaw config set gateway.port 19000
openclaw config set agents.defaults.model.primary "anthropic/claude-opus-4"
openclaw config set tools.allow '["read", "write", "exec"]'

# Delete a key
openclaw config unset gateway.auth.password
openclaw config unset channels.telegram.botToken
```

### Path Syntax

The config commands support both dot notation and bracket notation for nested paths:

- Dot notation: `gateway.port`, `agents.defaults.workspace`
- Bracket notation: `channels["whatsapp"].allowFrom[0]`
- Mixed: `agents.list[0].workspace`

**Sources**: [docs/cli/index.md 337-345](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L337-L345) [src/config/config.ts 14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts#L14-L14)

---

## Doctor Command

### Purpose

`openclaw doctor` performs comprehensive health checks, configuration validation, state migrations, and repairs. It detects and fixes common configuration issues, migrates legacy formats, and ensures system integrity.

### Execution Flow

```
NoYesYesNoYesNoYesNoopenclaw doctormaybeOfferUpdateBeforeDoctor
Git install update promptmaybeRepairUiProtocolFreshness
Rebuild Control UI if needednoteDeprecatedLegacyEnvVars
Warn about old env varsloadAndMaybeMigrateDoctorConfig
Load + migrate configgateway.mode
set?Note: gateway.mode unset
Gateway start blockednoteAuthProfileHealth
Check OAuth expiryLocal mode +
missing token?Prompt: generate token?Generate random token
Update configdetectLegacyStateMigrationsLegacy state
detected?runLegacyStateMigrations
Move sessions/agent/WA authnoteStateIntegrity
Check permissionsmaybeRepairSandboxImages
Pull/build imagesnoteSandboxScopeWarningsmaybeScanExtraGatewayServices
--deep flagmaybeRepairGatewayServiceConfig
Update service confignoteMacLaunchAgentOverrides
macOS-specific checksnoteSecurityWarnings
Open DM policiesCheck hooks.gmail.modelensureSystemdUserLingerInteractive
Linux systemd lingernoteWorkspaceStatus
Extra dirs checkcheckGatewayHealth
Probe running GatewaymaybeRepairGatewayDaemon
Service restart promptConfig changes
pending?writeConfigFile
Apply changesSkip writeWorkspace backup tip
Memory system suggestionValidate final config
Report errorsDoctor complete
```

**Diagram**: Doctor command execution flow showing all health checks and repairs

### Key Repair Operations

#### 1\. Config Migrations

Doctor migrates legacy configuration keys to current schema [src/commands/doctor.ts 92-109](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts#L92-L109):

- `routing.allowFrom` → `channels.whatsapp.allowFrom`
- `routing.groupChat.*` → `messages.groupChat.*` and channel-specific settings
- `agent.*` → `agents.defaults.*` and `tools.*`
- `identity` → `agents.list[].identity`

#### 2\. State Migrations

Migrates on-disk state to current directory structure [src/commands/doctor-state-migrations.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor-state-migrations.ts):

- Sessions: `~/.openclaw/sessions/` → `~/.openclaw/agents/<agentId>/sessions/`
- Agent dir: `~/.openclaw/agent/` → `~/.openclaw/agents/<agentId>/agent/`
- WhatsApp auth: Legacy locations → `~/.openclaw/credentials/whatsapp/<accountId>/`

Checks OAuth token expiry and can refresh expiring tokens [src/commands/doctor-auth.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor-auth.ts):

- Anthropic OAuth: Check refresh token expiry, prompt for refresh
- OpenAI Codex: Check access token expiry
- Deprecated CLI profiles: Remove legacy `*:cli` profiles

#### 4\. Gateway Service Repair

Updates service configuration to match current defaults [src/commands/doctor-gateway-services.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor-gateway-services.ts):

- LaunchAgent (macOS): Update program path, environment, ports
- systemd (Linux): Update exec path, environment, working directory
- schtasks (Windows): Update command, arguments

#### 5\. Sandbox Image Repair

Ensures Docker images exist when sandboxing is enabled [src/commands/doctor-sandbox.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor-sandbox.ts):

- Pull `openclaw/coding-agent` base image
- Build custom images if Dockerfile present

**Sources**: [src/commands/doctor.ts 65-306](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts#L65-L306) [docs/gateway/doctor.md 1-224](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/doctor.md#L1-L224)

### Command Options

| Flag | Description | Default |
| --- | --- | --- |
| `--yes` | Accept defaults without prompting | `false` |
| `--non-interactive` | Skip prompts, apply safe migrations only | `false` |
| `--repair` | Apply recommended repairs without prompting | `false` |
| `--force` | Apply aggressive repairs (overwrites custom configs) | `false` |
| `--deep` | Scan system services for extra gateway installs | `false` |
| `--no-workspace-suggestions` | Disable workspace memory hints | `false` |

**Sources**: [docs/cli/index.md 346-354](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L346-L354) [docs/gateway/doctor.md 14-56](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/doctor.md#L14-L56)

---

## Reset Command

### Purpose

`openclaw reset` removes configuration, credentials, sessions, and optionally workspace files. It provides granular control over what to delete.

### Reset Scopes

```
configconfig+creds+sessionsfullNoYesopenclaw reset--scopeDelete openclaw.json
Keep credentials
Keep sessions
Keep workspaceDelete openclaw.json
Delete credentials/
Delete sessions/
Keep workspaceDelete openclaw.json
Delete credentials/
Delete sessions/
Delete workspace/
Trash state dir--yes or
confirm?Abort resetExecute deletion
Use trash if availableReset complete
```

**Diagram**: Reset command scope selection and execution

### Options

| Flag | Description | Required |
| --- | --- | --- |
| `--scope <scope>` | Reset scope | Yes (in non-interactive) |
| `--yes` | Skip confirmation | No |
| `--non-interactive` | Require explicit flags | No |
| `--dry-run` | Show what would be deleted | No |

**Scope values**: `config`, `config+creds+sessions`, `full`

### Safety

- Uses `trash` (macOS/Linux) when available to enable recovery
- Falls back to `rm -rf` if trash is unavailable
- Requires explicit confirmation unless `--yes` passed
- Non-interactive mode requires both `--scope` and `--yes`

**Sources**: [docs/cli/index.md 561-571](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L561-L571)

---

## Uninstall Command

### Purpose

`openclaw uninstall` removes the gateway service, state directory, workspace, and optionally the macOS app. It provides granular control over what to remove.

### Uninstall Targets

```
YesNoYesNoYesNoYesNoopenclaw uninstallSelect targets
--service, --state, --workspace, --app, --all--service or
--all?Stop gateway serviceUnload LaunchAgent/systemdDelete service files--state or
--all?Delete ~/.openclaw/
Credentials, sessions, config--workspace or
--all?Delete workspace dir
Use trash if available--app or
--all?Delete /Applications/OpenClaw.appUninstall complete
```

**Diagram**: Uninstall command target selection and execution order

### Options

| Flag | Description | Default |
| --- | --- | --- |
| `--service` | Remove gateway service | `false` |
| `--state` | Remove state directory | `false` |
| `--workspace` | Remove workspace | `false` |
| `--app` | Remove macOS app | `false` |
| `--all` | Remove everything | `false` |
| `--yes` | Skip confirmation | `false` |
| `--non-interactive` | Require explicit flags | `false` |
| `--dry-run` | Show what would be removed | `false` |

### Safety

- Uses `trash` for workspace/state when available
- Requires explicit target flags or `--all` in non-interactive mode
- Non-interactive mode requires both explicit targets and `--yes`
- Stops service before deletion to prevent file locks

**Sources**: [docs/cli/index.md 573-588](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L573-L588)

---

## Configuration Validation

All configuration commands validate the config against `OpenClawSchema` using Zod [src/config/config.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts):

```
YesNoLoad JSON fileOpenClawSchema.safeParseValid?Return config objectCollect validation errorsFormat error messages
path + messageReturn invalid snapshot
with issues array
```

**Diagram**: Configuration validation flow

When validation fails, commands like `doctor` and `gateway` can attempt automatic repairs before blocking startup.

**Sources**: [src/config/config.ts 14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts#L14-L14) [src/commands/doctor.ts 96-116](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/doctor.ts#L96-L116)

---

## Configuration Precedence

Configuration values are resolved with this precedence (highest to lowest):

1. **Command-line flags**: `--port`, `--bind`, etc.
2. **Environment variables**: `OPENCLAW_GATEWAY_PORT`, `OPENCLAW_GATEWAY_TOKEN`, etc.
3. **Config file**: `~/.openclaw/openclaw.json` (or `$OPENCLAW_CONFIG_PATH`)
4. **System defaults**: Hardcoded in [src/config/config.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts)
```
YesNoYesNoYesNoResolve config valueCLI flag
present?Use flag valueEnv var
set?Use env valueConfig file
has key?Use config valueUse system defaultReturn value
```

**Diagram**: Configuration value resolution precedence

**Sources**: [src/config/config.ts 14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/config/config.ts#L14-L14) [docs/gateway/index.md 42](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L42)

---

All wizard commands (`setup`, `onboard`, `configure`) write metadata to track when and how the configuration was created:

```
{
  "wizard": {
    "lastRunAt": "2024-01-15T10:30:00.000Z",
    "lastRunVersion": "1.2.3",
    "lastRunCommit": "abc123",
    "lastRunCommand": "onboard",
    "lastRunMode": "local"
  }
}
```

This metadata is applied by `applyWizardMetadata` [src/commands/onboard-helpers.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-helpers.ts) and helps `doctor` understand the configuration origin.

**Sources**: [src/commands/onboard-helpers.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/commands/onboard-helpers.ts) [docs/start/wizard.md 293-309](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L293-L309)

---

For other configuration-adjacent operations:

- **Gateway service management**: [Gateway Commands](https://deepwiki.com/openclaw/openclaw/12.1-gateway-commands) - `gateway install`, `gateway start`, `gateway status`
- **Channel configuration**: [Channel Commands](https://deepwiki.com/openclaw/openclaw/12.3-channel-commands) - `channels add`, `channels remove`
- **Model configuration**: [Model Commands](https://deepwiki.com/openclaw/openclaw/12.4-model-commands) - `models auth`, `models set`, `models fallbacks`
- **System health**: [Diagnostic Commands](https://deepwiki.com/openclaw/openclaw/12.6-diagnostic-commands) - `status`, `health`, `logs`

**Sources**: [docs/cli/index.md 1-919](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L1-L919)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-hmbioix2qbm" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-z5tp3lz1enf" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>