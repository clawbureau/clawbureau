Menu

## Release Process

Relevant source files
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)

This document describes the complete release workflow for OpenClaw, including version management, build pipeline, artifact packaging, validation gates, and distribution across npm, GitHub, and app stores. It covers all release targets: the npm package (CLI and gateway server), macOS app with Sparkle auto-updates, iOS app, and Android app.

For onboarding setup and initial installation, see [Onboarding Wizard](https://deepwiki.com/openclaw/openclaw/2.3-onboarding-wizard). For building from source during development, see [Building from Source](https://deepwiki.com/openclaw/openclaw/15.3-building-from-source). For deployment-specific configuration after release, see [Deployment](https://deepwiki.com/openclaw/openclaw/13-deployment).

---

## Release Channels

OpenClaw maintains three release channels with distinct versioning conventions and distribution policies:

| Channel | Version Format | npm dist-tag | Distribution | Purpose |
| --- | --- | --- | --- | --- |
| **stable** | `vYYYY.M.D` | `latest` | npm + GitHub + macOS app + mobile | Production releases with full validation |
| **beta** | `vYYYY.M.D-beta.N` | `beta` | npm + GitHub + optional macOS app | Pre-release testing; may skip macOS packaging |
| **dev** | n/a (HEAD) | n/a | Source only | Development head on `main` branch |

Stable and beta releases are tagged in git with the `v` prefix (e.g., `v2026.1.29`). The npm package version in [package.json 20](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json#L20-L20) omits the `v` prefix.

**Sources:**[AGENTS.md 59-62](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L59-L62) [docs/reference/RELEASING.md 1-8](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L1-L8)

---

## Version File Locations

Version numbers must be synchronized across multiple platform-specific files before each release:

```
Build ArtifactsAndroid AppiOS AppmacOS AppCore Packagesyncsyncsyncsyncsyncsyncgenerated during buildpackage.json
version: 2026.1.29src/cli/program.ts
.version()src/provider-web.ts
Baileys user agentapps/macos/Sources/OpenClaw/Resources/Info.plist
CFBundleShortVersionString
CFBundleVersionapps/ios/Sources/Info.plist
CFBundleShortVersionString: 2026.1.29
CFBundleVersion: 20260129apps/ios/project.yml
info.propertiesapps/android/app/build.gradle.kts
versionName: 2026.1.29
versionCode: 202601290dist/build-info.json
version, commit, builtAt
```

**Version file manifest:**

- **package.json** [package.json 20](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json#L20-L20) - npm package version (source of truth)
- **CLI program** [src/cli/program.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/program.ts) - CLI `--version` output
- **Provider web** [src/provider-web.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/provider-web.ts) - Baileys user agent string
- **macOS** [apps/macos/Sources/OpenClaw/Resources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/macos/Sources/OpenClaw/Resources/Info.plist) - `CFBundleShortVersionString` (e.g., `2026.1.29`), `CFBundleVersion` (numeric, e.g., git commit count)
- **iOS** [apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24) - `CFBundleShortVersionString` (`2026.1.29`), `CFBundleVersion` (`20260129`)
- **iOS project** [apps/ios/project.yml 84-85](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml#L84-L85) - XcodeGen project template values
- **Android** [apps/android/app/build.gradle.kts 24-25](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L25) - `versionName` (`2026.1.29`), `versionCode` (numeric, e.g., `202601290`)

**Build artifacts:**

- **dist/build-info.json** - Auto-generated by [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts) during `pnpm build`; includes `version`, `commit` hash, and `builtAt` timestamp. Used by CLI banner for npm-installed instances.

**Sources:**[AGENTS.md 125-126](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L125-L126) [docs/reference/RELEASING.md 19-23](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L19-L23) [apps/android/app/build.gradle.kts 24-25](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L25) [apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24)

---

## Build Pipeline

The build pipeline transforms TypeScript source into distributable artifacts through a multi-stage process:

### Build Pipeline Diagram

```
ArtifactsPackagingBuild ArtifactsCompilationSourcesrc/**/*.ts
TypeScript sourcepnpm-lock.yaml
Dependency locktsc
TypeScript compilerscripts/write-build-info.ts
Generate commit hashdist/**/*.js
Compiled ESMdist/**/*.d.ts
Type definitionsdist/build-info.json
version + commitdist/plugin-sdk/
Extension APIdist/node-host/
Device node runtimedist/acp/
ACP CLInpm pack
Generate tarballscripts/package-mac-app.sh
Xcode build + sign./gradlew assembleRelease
APK generationxcodebuild
IPA generationopenclaw-X.Y.Z.tgz
npm packageOpenClaw-X.Y.Z.zip
Sparkle distributionOpenClaw-X.Y.Z.dmg
Manual installeropenclaw-X.Y.Z-release.apk
```

### Build Commands

| Target | Command | Output | Notes |
| --- | --- | --- | --- |
| TypeScript | `pnpm build` | `dist/**/*.js`, `dist/**/*.d.ts` | Runs `tsc` and [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts) |
| npm tarball | `npm pack` | `openclaw-X.Y.Z.tgz` | Includes `dist/`, docs, skills per `package.json` `files` |
| macOS app | `scripts/package-mac-app.sh` | `dist/OpenClaw.app` | Xcode build, code signing, notarization |
| macOS dist | `scripts/package-mac-dist.sh` | `dist/OpenClaw-X.Y.Z.zip`, `.dmg` | Includes notarization and Sparkle packaging |
| Android | `./gradlew assembleRelease` | `app/build/outputs/apk/release/openclaw-X.Y.Z-release.apk` | Uses [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts) |
| iOS | `xcodebuild` | `.ipa` (via archive) | Requires provisioning profile |

**Build info generation:**

The [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts) script captures the current git commit hash and writes [dist/build-info.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/dist/build-info.json) during compilation. This file is read at runtime by [src/infra/git-commit.ts 54-64](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts#L54-L64) to display the commit hash in CLI banners for npm-installed instances.

**Commit hash resolution order** (per [src/infra/git-commit.ts 66-109](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts#L66-L109)):

1. `GIT_COMMIT` or `GIT_SHA` environment variables
2. `dist/build-info.json` (from `scripts/write-build-info.ts`)
3. `package.json` `gitHead` field (populated by `npm publish`)
4. `.git/HEAD` file (for source checkouts)

**Sources:**[docs/reference/RELEASING.md 26-31](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L26-L31) [src/infra/git-commit.ts 1-110](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts#L1-L110) [scripts/write-build-info.ts 1-49](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts#L1-L49)

---

## Validation Gates

Before publishing any release, the following validation steps must pass:

### Pre-Release Validation Table

| Gate | Command | Purpose | Required For |
| --- | --- | --- | --- |
| Lint | `pnpm lint` | oxlint code style checks | All releases |
| Format | `pnpm format` | oxfmt code formatting | All releases |
| Type check | `pnpm build` | TypeScript compilation | All releases |
| Unit tests | `pnpm test` | Vitest unit test suite | All releases |
| Coverage | `pnpm test:coverage` | 70% threshold (lines/branches/functions/statements) | Optional but recommended |
| Package check | `pnpm release:check` | Verify npm pack contents | All releases |
| Install smoke (root) | `OPENCLAW_INSTALL_SMOKE_SKIP_NONROOT=1 pnpm test:install:smoke` | Docker install test (fast path) | **Required** for all releases |
| Install smoke (full) | `pnpm test:install:smoke` | Docker install test (root + non-root) | Optional (adds non-root coverage) |
| Install E2E (OpenAI) | `pnpm test:install:e2e:openai` | Full onboarding + tool execution with OpenAI | Optional |
| Install E2E (Anthropic) | `pnpm test:install:e2e:anthropic` | Full onboarding + tool execution with Anthropic | Optional |

**Install smoke test details:**

The Docker install smoke test ([docs/reference/RELEASING.md 42-44](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L42-L44)) runs `curl -fsSL https://openclaw.bot/install.sh | bash` in a clean container, then verifies the installation. Two environment variables control behavior:

- `OPENCLAW_INSTALL_SMOKE_SKIP_NONROOT=1` - Skip non-root user testing (faster path, required minimum)
- `OPENCLAW_INSTALL_SMOKE_PREVIOUS=<version>` - Test upgrade from a specific version (useful if last release was broken)
- `OPENCLAW_INSTALL_SMOKE_SKIP_PREVIOUS=1` - Skip preinstall step entirely

The install E2E tests ([docs/reference/RELEASING.md 45-48](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L45-L48)) go further by running `openclaw onboard` non-interactively and executing real tool calls against model providers.

**Sources:**[docs/reference/RELEASING.md 37-49](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L37-L49) [AGENTS.md 38-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L38-L50)

---

## npm Publish Workflow

### npm Distribution Workflow

```
Post-PublishVerificationnpm PublishPre-PublishUpdate package.json
version fieldpnpm plugins:sync
Sync extension versionspnpm build
Generate dist/Validation gates
(lint, test, smoke)npm publish --access public
--tag latest (or --tag beta)npmjs.com registry
openclaw@X.Y.Znpm view openclaw versionnpm view openclaw dist-tagsnpx -y openclaw@X.Y.Z --versiongit tag vX.Y.Z
git push origin vX.Y.ZCreate GitHub release
Attach tarball (optional)Update docs
Announce release
```

### Publish Steps

1. **Version bump:** Update [package.json 20](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json#L20-L20) with the new version (e.g., `2026.1.29` or `2026.1.29-beta.1`)
2. **Sync extensions:** Run `pnpm plugins:sync` to align extension package versions and changelogs with the root package
3. **Update version strings:**
	- [src/cli/program.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/program.ts) - CLI `.version()` call
	- [src/provider-web.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/provider-web.ts) - Baileys user agent string
4. **Build:** Run `pnpm build` to regenerate `dist/`
5. **Validate:** Complete all required validation gates (see table above)
6. **Publish:**
	```
	npm login  # Verify 2FA
	npm publish --access public  # For stable releases
	npm publish --access public --tag beta  # For beta releases
	```
7. **Verify:**
	```
	npm view openclaw version
	npm view openclaw dist-tags
	npx -y openclaw@X.Y.Z --version
	```
8. **Tag and release:**
	```
	git tag vX.Y.Z
	git push origin vX.Y.Z
	# Create GitHub release at https://github.com/openclaw/openclaw/releases
	```

**npm package contents:**

The [package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json) `files` field whitelists specific directories for inclusion in the npm tarball:

- `dist/` - Compiled JavaScript and type definitions
- `docs/` - Documentation
- `skills/` - Built-in skills
- Excludes: `dist/OpenClaw.app`, release zips, test fixtures

Verify with: `npm pack --dry-run` or `pnpm release:check`

**Troubleshooting:**

| Issue | Solution |
| --- | --- |
| Tarball includes app bundles | Audit `package.json` `files` field; ensure `dist/OpenClaw.app` is excluded |
| `npm dist-tag` hangs | Use legacy auth: `NPM_CONFIG_AUTH_TYPE=legacy npm dist-tag add openclaw@X.Y.Z latest` |
| `npx` fails with `ECOMPROMISED` | Clear cache: `NPM_CONFIG_CACHE=/tmp/npm-cache-$(date +%s) npx -y openclaw@X.Y.Z --version` |

**Sources:**[docs/reference/RELEASING.md 59-73](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L59-L73) [AGENTS.md 59-62](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L59-L62)

---

## macOS App Packaging and Sparkle

The macOS app uses Sparkle for automatic updates and requires Developer ID code signing plus notarization for Gatekeeper.

### macOS Release Workflow

```
DistributionSparkle FeedPackageBuildXcode build
scripts/package-mac-app.shCode signing
Developer ID Application certNotarization
xcrun notarytooldist/OpenClaw.app
Signed + notarizedditto -c -k
OpenClaw-X.Y.Z.zipscripts/create-dmg.sh
OpenClaw-X.Y.Z.dmgOpenClaw-X.Y.Z.dSYM.zipSparkle sign_update
EdDSA signaturescripts/make_appcast.sh
HTML release notesappcast.xml
Sparkle feedGitHub release vX.Y.Z
Attach .zip + .dSYM.zipraw.githubusercontent.com
appcast.xml
```

### Prerequisites

Before building a macOS release, ensure these are configured:

| Prerequisite | Location | Purpose |
| --- | --- | --- |
| Developer ID cert | Keychain | Code signing (e.g., `Developer ID Application: <Name> (<TEAMID>)`) |
| Sparkle private key | `SPARKLE_PRIVATE_KEY_FILE` env var | EdDSA signing for appcast entries |
| Notary credentials | Keychain profile `openclaw-notary` | Gatekeeper notarization via App Store Connect API |

**Notary setup:**

Create the `openclaw-notary` keychain profile once using App Store Connect API credentials ([docs/platforms/mac/release.md 16-19](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md#L16-L19)):

```
# Requires these env vars (stored in ~/.profile):
# APP_STORE_CONNECT_API_KEY_P8
# APP_STORE_CONNECT_KEY_ID
# APP_STORE_CONNECT_ISSUER_ID

echo "$APP_STORE_CONNECT_API_KEY_P8" | sed 's/\\n/\n/g' > /tmp/openclaw-notary.p8
xcrun notarytool store-credentials "openclaw-notary" \
  --key /tmp/openclaw-notary.p8 \
  --key-id "$APP_STORE_CONNECT_KEY_ID" \
  --issuer "$APP_STORE_CONNECT_ISSUER_ID"
```

### Build Commands

**Development build (local arch):**

```
scripts/package-mac-app.sh
```

**Release build (universal + notarized):**

```
NOTARIZE=1 NOTARYTOOL_PROFILE=openclaw-notary \
BUNDLE_ID=bot.molt.mac \
APP_VERSION=2026.1.29 \
APP_BUILD="$(git rev-list --count HEAD)" \
BUILD_CONFIG=release \
BUILD_ARCHS="arm64 x86_64" \
SIGN_IDENTITY="Developer ID Application: <Name> (<TEAMID>)" \
scripts/package-mac-dist.sh
```

Output:

- `dist/OpenClaw-2026.1.29.zip` - Sparkle distribution archive
- `dist/OpenClaw-2026.1.29.dmg` - Manual installer (drag to /Applications)
- `dist/OpenClaw-2026.1.29.dSYM.zip` - Debug symbols (optional)

**Versioning notes:**

- `APP_VERSION` maps to `CFBundleShortVersionString` (e.g., `2026.1.29-beta.1`)
- `APP_BUILD` maps to `CFBundleVersion` and `sparkle:version` (must be **numeric and monotonic**, no `-beta` suffix)
- Sparkle compares versions using `APP_BUILD`, so pre-release builds need incrementing numeric versions

### Sparkle Appcast Generation

The appcast XML feed is the source of truth for Sparkle auto-updates. Generate entries with [scripts/make\_appcast.sh](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/make_appcast.sh):

```
SPARKLE_PRIVATE_KEY_FILE=/path/to/ed25519-private-key \
scripts/make_appcast.sh \
  dist/OpenClaw-2026.1.29.zip \
  https://raw.githubusercontent.com/openclaw/openclaw/main/appcast.xml
```

This script:

1. Extracts version info from the app bundle
2. Converts `CHANGELOG.md` to HTML via [scripts/changelog-to-html.sh](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/changelog-to-html.sh)
3. Signs the entry with Sparkle's `sign_update` tool
4. Updates `appcast.xml` with the new entry

Commit `appcast.xml` to the repo and push to `main`. Sparkle reads the feed from:

```
https://raw.githubusercontent.com/openclaw/openclaw/main/appcast.xml
```

### GitHub Release Workflow

1. Tag the release: `git tag vX.Y.Z && git push origin vX.Y.Z`
2. Create GitHub release at `https://github.com/openclaw/openclaw/releases/new`
	- **Title:**`openclaw X.Y.Z` (not just the tag)
	- **Body:** Full changelog section for this version (Highlights + Changes + Fixes), inline, no bare links
	- **Do not repeat the title inside the body**
3. Attach artifacts:
	- `OpenClaw-X.Y.Z.zip` (required for Sparkle)
	- `OpenClaw-X.Y.Z.dSYM.zip` (optional, for crash reports)
	- `openclaw-X.Y.Z.tgz` (npm tarball, optional)
4. Commit and push `appcast.xml`
5. Verify Sparkle update flow from a previous version by selecting "Check for Updates…" in the About tab

**Sources:**[docs/platforms/mac/release.md 1-78](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md#L1-L78) [docs/reference/RELEASING.md 52-58](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L52-L58)

---

## Mobile App Versioning

iOS and Android apps use platform-specific version formats:

### iOS Versioning

Version info is stored in two locations:

1. **Info.plist** [apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24)
	```
	<key>CFBundleShortVersionString</key>
	<string>2026.1.29</string>
	<key>CFBundleVersion</key>
	<string>20260129</string>
	```
2. **project.yml** [apps/ios/project.yml 84-85](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml#L84-L85) (XcodeGen template)
	```
	CFBundleShortVersionString: "2026.1.29"
	CFBundleVersion: "20260129"
	```
- `CFBundleShortVersionString` - User-facing version (matches npm package version)
- `CFBundleVersion` - Build number (numeric, YYYYMMDD or incrementing)

### Android Versioning

Version info is in [apps/android/app/build.gradle.kts 24-25](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L25):

```
versionCode = 202601290
versionName = "2026.1.29"
```
- `versionName` - User-facing version (matches npm package version)
- `versionCode` - Integer, monotonically increasing (format: `YYYYMMDDN` where N is daily revision)

**Output filename pattern** [apps/android/app/build.gradle.kts 68](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L68-L68):

```
val outputFileName = "openclaw-${versionName}-${buildType}.apk"
```

Example: `openclaw-2026.1.29-release.apk`

**Sources:**[apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24) [apps/ios/project.yml 84-85](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml#L84-L85) [apps/android/app/build.gradle.kts 24-68](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L68)

---

## Plugin Publishing

OpenClaw publishes a subset of bundled extensions to npm under the `@openclaw/*` scope. Not all plugins in `extensions/` are published—only those that were previously on npm remain published.

### Plugin Publish Scope

**Published npm plugins** (from [docs/reference/RELEASING.md 93-104](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L93-L104)):

- `@openclaw/bluebubbles`
- `@openclaw/diagnostics-otel`
- `@openclaw/discord`
- `@openclaw/lobster`
- `@openclaw/matrix`
- `@openclaw/msteams`
- `@openclaw/nextcloud-talk`
- `@openclaw/nostr`
- `@openclaw/voice-call`
- `@openclaw/zalo`
- `@openclaw/zalouser`

**Bundled-only plugins** (not on npm):

- `extensions/tlon` (Urbit)
- `extensions/line` (LINE)
- `extensions/memory-core`
- Others in `extensions/` directory

### Plugin Version Sync

Before publishing, run `pnpm plugins:sync` to synchronize extension versions and changelogs with the root package version. This ensures all published plugins have matching versions.

**Sources:**[docs/reference/RELEASING.md 82-107](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L82-L107)

---

## Deployment Configurations

Release artifacts are deployed to various platforms with platform-specific configurations:

### Fly.io Configuration

Two deployment templates are provided:

| Template | File | Purpose | Network Access |
| --- | --- | --- | --- |
| Public | [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml) | Default deployment with HTTPS ingress | Public URL at `https://app.fly.dev` |
| Private | [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml) | Hardened deployment with no public IP | Access via `fly proxy` or WireGuard only |

**Key settings** [fly.toml 17-18](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L17-L18):

```
[processes]
  app = "node dist/index.js gateway --allow-unconfigured --port 3000 --bind lan"
```
- `--bind lan` - Binds to `0.0.0.0` so Fly's proxy can reach the gateway
- `--port 3000` - Must match `http_service.internal_port` for health checks
- `--allow-unconfigured` - Starts without config file (created via SSH after deploy)

**Environment variables** [fly.toml 10-15](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L10-L15):

```
[env]
  NODE_ENV = "production"
  OPENCLAW_PREFER_PNPM = "1"
  OPENCLAW_STATE_DIR = "/data"
  NODE_OPTIONS = "--max-old-space-size=1536"
```

**Secrets:**

```
fly secrets set OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
fly secrets set ANTHROPIC_API_KEY=sk-ant-...
fly secrets set DISCORD_BOT_TOKEN=MTQ...
```

For detailed deployment instructions, see [Cloud Deployment](https://deepwiki.com/openclaw/openclaw/13.3-cloud-deployment) and [Fly.io guide](https://github.com/openclaw/openclaw/blob/bf6ec64f/Fly.io%20guide)

**Sources:**[fly.toml 1-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L35) [fly.private.toml 1-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml#L1-L40) [docs/platforms/fly.md 1-466](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L1-L466)

---

## Release Checklist

### Complete Release Workflow

```
8. Post-Release7. GitHub Release6. npm Publish5. macOS App4. Validation3. Changelog & Docs2. Build & Artifacts1. Version & MetadataBump package.json versionpnpm plugins:syncUpdate CLI/version stringsUpdate mobile app versionspnpm install (lock deps)pnpm canvas:a2ui:bundle (if needed)pnpm buildVerify dist/ contentsnpm pack (optional)Update CHANGELOG.mdUpdate README examplespnpm lintpnpm testpnpm release:checkOPENCLAW_INSTALL_SMOKE_SKIP_NONROOT=1
pnpm test:install:smokescripts/package-mac-dist.sh
(build + sign + notarize)scripts/make_appcast.sh
(generate feed entry)Commit appcast.xmlgit commit & pushnpm loginnpm publish --access public
(--tag beta for pre-release)Verify: npm view openclawgit tag vX.Y.Z && git push origin vX.Y.ZCreate GitHub release
(title: openclaw X.Y.Z)Attach: .zip + .dSYM.zip + .tgzPush appcast.xmlnpx -y openclaw@X.Y.Z send --helpAnnounce release
```

### Step-by-Step Checklist

- Bump [package.json 20](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json#L20-L20) version
- Run `pnpm plugins:sync` to sync extension versions
- Update [src/cli/program.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/program.ts)`.version()` call
- Update [src/provider-web.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/provider-web.ts) Baileys user agent
- Update [apps/macos/Sources/OpenClaw/Resources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/macos/Sources/OpenClaw/Resources/Info.plist) `CFBundleShortVersionString` and `CFBundleVersion`
- Update [apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24) versions
- Update [apps/ios/project.yml 84-85](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml#L84-L85) versions
- Update [apps/android/app/build.gradle.kts 24-25](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L25) versions
- Run `pnpm install` to update `pnpm-lock.yaml`

#### 2\. Build & Artifacts

- If A2UI changed, run `pnpm canvas:a2ui:bundle` and commit
- Run `pnpm build` to regenerate `dist/`
- Verify [dist/build-info.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/dist/build-info.json) exists with correct commit hash
- Verify `package.json` `files` includes `dist/node-host/`, `dist/acp/`, etc.
- Optional: `npm pack --pack-destination /tmp` and inspect tarball

#### 3\. Changelog & Docs

- Update `CHANGELOG.md` with user-facing highlights
- Ensure README examples/flags match current CLI behavior

#### 4\. Validation

- `pnpm lint`
- `pnpm test`
- `pnpm build` (final sanity check)
- `pnpm release:check`
- `OPENCLAW_INSTALL_SMOKE_SKIP_NONROOT=1 pnpm test:install:smoke` (required)
- Optional: `pnpm test:install:smoke` (full coverage)
- Optional: `pnpm test:install:e2e:openai` or `pnpm test:install:e2e:anthropic`

#### 5\. macOS App (Sparkle)

- Ensure `SPARKLE_PRIVATE_KEY_FILE` is set in environment
- Ensure App Store Connect notary credentials are configured
- Build + sign + notarize:
	```
	NOTARIZE=1 NOTARYTOOL_PROFILE=openclaw-notary \
	BUNDLE_ID=bot.molt.mac \
	APP_VERSION=X.Y.Z \
	APP_BUILD="$(git rev-list --count HEAD)" \
	BUILD_CONFIG=release \
	BUILD_ARCHS="arm64 x86_64" \
	SIGN_IDENTITY="Developer ID Application: <Name> (<TEAMID>)" \
	scripts/package-mac-dist.sh
	```
- Generate Sparkle appcast entry:
	```
	SPARKLE_PRIVATE_KEY_FILE=/path/to/key \
	scripts/make_appcast.sh \
	  dist/OpenClaw-X.Y.Z.zip \
	  https://raw.githubusercontent.com/openclaw/openclaw/main/appcast.xml
	```
- Commit updated `appcast.xml`

#### 6\. npm Publish

- Commit and push all changes
- `npm login` (verify 2FA)
- `npm publish --access public` (or `--tag beta`)
- Verify:
	- `npm view openclaw version`
	- `npm view openclaw dist-tags`
	- `npx -y openclaw@X.Y.Z --version`

#### 7\. GitHub Release + Appcast

- Tag and push: `git tag vX.Y.Z && git push origin vX.Y.Z`
- Create GitHub release with title `openclaw X.Y.Z`
- Body: Full changelog section (Highlights + Changes + Fixes), no bare links, no title repetition
- Attach artifacts:
	- `OpenClaw-X.Y.Z.zip`
	- `OpenClaw-X.Y.Z.dSYM.zip` (optional)
	- `openclaw-X.Y.Z.tgz` (optional)
- Push `appcast.xml` commit to main
- Verify Sparkle URL: `curl -I https://raw.githubusercontent.com/openclaw/openclaw/main/appcast.xml`

#### 8\. Post-Release

- From clean temp directory: `npx -y openclaw@X.Y.Z send --help`
- Verify Sparkle auto-update from a previous version
- Announce release

**Sources:**[docs/reference/RELEASING.md 1-81](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md#L1-L81) [docs/platforms/mac/release.md 23-78](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md#L23-L78) [AGENTS.md 74-105](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L74-L105)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-hmbioix2qbm" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-z5tp3lz1enf" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>