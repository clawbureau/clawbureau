Menu

## Node Capabilities

Relevant source files
- [.npmrc](https://github.com/openclaw/openclaw/blob/bf6ec64f/.npmrc)
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [CHANGELOG.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/CHANGELOG.md)
- [README.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [assets/avatar-placeholder.svg](https://github.com/openclaw/openclaw/blob/bf6ec64f/assets/avatar-placeholder.svg)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [extensions/memory-core/package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/extensions/memory-core/package.json)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json)
- [pnpm-lock.yaml](https://github.com/openclaw/openclaw/blob/bf6ec64f/pnpm-lock.yaml)
- [pnpm-workspace.yaml](https://github.com/openclaw/openclaw/blob/bf6ec64f/pnpm-workspace.yaml)
- [scripts/clawtributors-map.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/clawtributors-map.json)
- [scripts/update-clawtributors.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/update-clawtributors.ts)
- [scripts/update-clawtributors.types.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/update-clawtributors.types.ts)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/agents/pi-embedded-runner-extraparams.live.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-runner-extraparams.live.test.ts)
- [src/agents/pi-embedded-runner-extraparams.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/agents/pi-embedded-runner-extraparams.test.ts)
- [src/cli/nodes-cli.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-cli.ts)
- [src/cli/nodes-screen.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.test.ts)
- [src/cli/nodes-screen.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts)
- [src/cli/program.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/program.ts)
- [src/index.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/index.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)
- [ui/package.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/package.json)
- [ui/src/styles.css](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/src/styles.css)
- [ui/src/styles/layout.mobile.css](https://github.com/openclaw/openclaw/blob/bf6ec64f/ui/src/styles/layout.mobile.css)

This page documents the capabilities exposed by device nodes (iOS, Android, macOS) through the `node.invoke` protocol. Node capabilities enable agents to perform device-local actions like capturing photos, recording screens, accessing location, and executing system commands.

For information about node discovery, pairing, and authentication, see [Node Pairing and Discovery](https://deepwiki.com/openclaw/openclaw/11.1-node-pairing-and-discovery). For the overall device node architecture and management, see [Device Nodes](https://deepwiki.com/openclaw/openclaw/11-device-nodes).

## Capability Overview

Device nodes expose platform-specific capabilities to the Gateway via the `node.invoke` RPC mechanism. Each capability requires appropriate OS-level permissions and returns structured payloads (typically base64-encoded media or JSON metadata).

**Capability Categories**:

- **Camera**: Photo capture (`camera.snap`) and video recording (`camera.clip`)
- **Screen Recording**: Display capture with optional audio (`screen.record`)
- **Location**: GPS/location services (`location.get`)
- **System Commands**: Shell execution (`system.run`, `system.which`) — macOS only
- **Notifications**: User notifications (`system.notify`) — macOS only
- **Canvas**: A2UI canvas operations (`canvas.*`)

## Capability Discovery and Status

```
node.listnode.describe nodeIdcapabilities + permissionscapabilities + permissionscapabilities + permissionsAgent RuntimeGatewayNode RegistryiOS NodeAndroid NodemacOS Node
```

**Sources**: [README.md 224-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L224-L228) [src/cli/nodes-cli.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-cli.ts)

### Discovery Commands

| Command | Purpose |
| --- | --- |
| `node.list` | Enumerate connected nodes and their metadata |
| `node.describe <nodeId>` | Get detailed capability list and permission status |
| `node.invoke <nodeId> <capability> [args]` | Execute a capability |

Permission states returned in `node.describe`:

- `granted`: Capability is available
- `denied`: User denied OS permission
- `notDetermined`: Permission not yet requested
- `restricted`: System-level restriction (MDM, parental controls)

**Sources**: [README.md 224-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L224-L228)

## Platform Capability Matrix

| Capability | iOS | Android | macOS (node mode) | Permissions Required |
| --- | --- | --- | --- | --- |
| `camera.snap` | ✓ | ✓ | ✓ | Camera access |
| `camera.clip` | ✓ | ✓ | ✓ | Camera access |
| `screen.record` | ✓ | ✓ | ✓ | Screen Recording (macOS) |
| `location.get` | ✓ | ✓ | ✓ | Location Services |
| `system.run` | ✗ | ✗ | ✓ | PTY access, optional Screen Recording |
| `system.notify` | ✗ | ✗ | ✓ | Notification permissions |
| `canvas.*` | ✓ | ✓ | ✓ | None (UI operations) |

**Sources**: [README.md 145-147](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L145-L147) [README.md 226-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L228)

## Camera Capabilities

### Platform Support

**Available on**: iOS, Android, macOS (when running as node)

**Permissions required**:

- iOS: `NSCameraUsageDescription` ([apps/ios/Sources/Info.plist 34-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L34-L35))
- Android: Camera permissions via CameraX library ([apps/android/app/build.gradle.kts 109-113](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L109-L113))

### Operations

#### camera.snap

Captures a single photo.

**Request**:

```
{
  "nodeId": "node-ios-abc123",
  "capability": "camera.snap",
  "args": {
    "format": "jpeg",
    "quality": 0.9
  }
}
```

**Response payload**:

```
{
  format: "jpeg" | "png",
  base64: string,
  quality?: number
}
```

#### camera.clip

Records a short video clip.

**Response payload**:

```
{
  format: "mp4",
  base64: string,
  durationMs: number
}
```

**Sources**: [apps/ios/Sources/Info.plist 34-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L34-L35) [apps/android/app/build.gradle.kts 109-113](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L109-L113) [README.md 152](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L152-L152)

## Screen Recording Capabilities

### Platform Support

**Available on**: iOS, Android, macOS

**Permissions required**:

- macOS: Screen Recording permission (enforced via `system.run` with `needsScreenRecording: true`)
- iOS/Android: Platform-specific screen capture permissions

### screen.record Operation

Captures screen video with optional audio.

#### Payload Structure

Defined in [src/cli/nodes-screen.ts 7-14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L7-L14):

```
type ScreenRecordPayload = {
  format: string;        // Video format (typically "mp4")
  base64: string;        // Base64-encoded video data
  durationMs?: number;   // Recording duration in milliseconds
  fps?: number;          // Frames per second
  screenIndex?: number;  // Which screen (0 = primary, multi-monitor support)
  hasAudio?: boolean;    // Whether audio track is included
}
```

#### Parsing and Validation

Implementation at [src/cli/nodes-screen.ts 24-39](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L24-L39):

```
function parseScreenRecordPayload(value: unknown): ScreenRecordPayload {
  const obj = asRecord(value);
  const format = asString(obj.format);
  const base64 = asString(obj.base64);
  if (!format || !base64) {
    throw new Error("invalid screen.record payload");
  }
  return {
    format,
    base64,
    durationMs: typeof obj.durationMs === "number" ? obj.durationMs : undefined,
    fps: typeof obj.fps === "number" ? obj.fps : undefined,
    screenIndex: typeof obj.screenIndex === "number" ? obj.screenIndex : undefined,
    hasAudio: typeof obj.hasAudio === "boolean" ? obj.hasAudio : undefined,
  };
}
```

#### Writing to Disk

Helper at [src/cli/nodes-screen.ts 48-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L48-L50):

```
async function writeScreenRecordToFile(filePath: string, base64: string) {
  return writeBase64ToFile(filePath, base64);
}
```

Temp file path generation at [src/cli/nodes-screen.ts 41-46](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L41-L46):

```
function screenRecordTempPath(opts: { ext: string; tmpDir?: string; id?: string }) {
  const tmpDir = opts.tmpDir ?? os.tmpdir();
  const id = opts.id ?? randomUUID();
  const ext = opts.ext.startsWith(".") ? opts.ext : \`.${opts.ext}\`;
  return path.join(tmpDir, \`openclaw-screen-record-${id}${ext}\`);
}
```

**Sources**: [src/cli/nodes-screen.ts 7-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L7-L50) [README.md 152](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L152-L152)

### Multi-Screen Support

For platforms with multiple displays, the `screenIndex` parameter specifies which screen to capture:

- `screenIndex: 0` — Primary display
- `screenIndex: 1` — Secondary display
- etc.

### Audio Capture

When `hasAudio: true`, the node attempts to capture system audio. Availability depends on:

- OS permissions (microphone access on iOS)
- Platform limitations (not all Android devices support internal audio capture)

**Sources**: [src/cli/nodes-screen.ts 7-14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L7-L14)

## Location Capabilities

### Platform Support

**Available on**: iOS, Android

**Permissions required**:

- iOS: `NSLocationWhenInUseUsageDescription`, `NSLocationAlwaysAndWhenInUseUsageDescription` ([apps/ios/Sources/Info.plist 38-41](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L38-L41))
- Android: Location permissions

iOS supports two location access levels:

- **When In Use**: Location available only while app is active
- **Always**: Background location access enabled

The `NSLocationAlwaysAndWhenInUseUsageDescription` key at [apps/ios/Sources/Info.plist 39-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L39-L40) enables the "Always" option.

### location.get Operation

Returns current GPS coordinates.

**Response payload**:

```
{
  latitude: number,
  longitude: number,
  accuracy?: number,     // Horizontal accuracy in meters
  altitude?: number,     // Altitude in meters
  timestamp?: number     // Unix timestamp
}
```

**Sources**: [apps/ios/Sources/Info.plist 38-41](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L38-L41) [README.md 152](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L152-L152)

## System Command Capabilities

### Platform Support

**Available on**: macOS only

System commands are restricted to macOS nodes because they execute arbitrary shell commands with significant security implications.

### Permissions

- **PTY access**: Required for all `system.run` invocations
- **Screen Recording**: Required when `needsScreenRecording: true` is set ([README.md 226-227](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L227))

### Operations

#### system.run

Executes a shell command and returns stdout/stderr/exit code.

**Usage example from [README.md 226-227](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L227)**:

> `system.run` runs a local command and returns stdout/stderr/exit code; set `needsScreenRecording: true` to require screen-recording permission (otherwise you'll get `PERMISSION_MISSING`).

**Response payload**:

```
{
  stdout: string,
  stderr: string,
  exitCode: number
}
```

**Security model** (from [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)):

- Commands are subject to exec approval policies
- Safe binaries can be allow-listed
- PTY isolation from host permissions

#### system.which

Queries binary paths on the node host. Used for skill discovery and validation.

**Sources**: [README.md 226-227](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L227) [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)

When Screen Recording permission is required but not granted:

```
{
  "error": "PERMISSION_MISSING",
  "message": "Screen Recording permission required"
}
```

**Sources**: [README.md 227](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L227-L227)

## Notification Capabilities

### Platform Support

**Available on**: macOS only

### system.notify Operation

Posts a user notification to the macOS Notification Center.

**Request**:

```
{
  "nodeId": "node-macos-xyz",
  "capability": "system.notify",
  "args": {
    "title": "Build Complete",
    "body": "Your project built successfully.",
    "sound": true
  }
}
```

**Error handling**: Returns `PERMISSION_MISSING` if notification permissions are denied.

**Sources**: [README.md 227](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L227-L227)

## Canvas Capabilities

### Platform Support

**Available on**: iOS, Android, macOS (when in node mode)

### Operations

Canvas capabilities provide A2UI (Agent-to-UI) operations:

- `canvas.push`: Send A2UI content to the canvas host
- `canvas.reset`: Clear the canvas
- `canvas.eval`: Execute JavaScript in the canvas context
- `canvas.snapshot`: Capture current canvas state

### Routing

Canvas operations are routed via `node.invoke` when the canvas host is a remote device node. If the Gateway itself hosts the canvas, operations execute locally.

**Sources**: [README.md 151](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L151-L151) [README.md 228](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L228-L228)

## Voice Wake Capabilities

### Platform Support

**Available on**: iOS, macOS

### Permissions Required

From [apps/ios/Sources/Info.plist 42-45](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L42-L45):

- `NSMicrophoneUsageDescription`: "OpenClaw needs microphone access for voice wake."
- `NSSpeechRecognitionUsageDescription`: "OpenClaw uses on-device speech recognition for voice wake."

### Background Modes

iOS requires the `audio` background mode for always-on speech recognition ([apps/ios/Sources/Info.plist 52-53](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L52-L53)):

```
<key>UIBackgroundModes</key>
<array>
  <string>audio</string>
</array>
```

### Purpose

Voice wake enables always-on speech recognition for wake word detection. When a wake phrase is detected, the node forwards the recognized text to the Gateway for agent processing.

**Sources**: [apps/ios/Sources/Info.plist 42-45](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L42-L45) [apps/ios/Sources/Info.plist 52-53](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L52-L53) [README.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L120-L120)

## Network Discovery Capabilities

Nodes advertise themselves via Bonjour/DNS-SD using the service type `_openclaw-gw._tcp`.

**Platform implementations**:

- **iOS**: Native Bonjour via `NSBonjourServices` ([apps/ios/Sources/Info.plist 31-33](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L31-L33))
- **Android**: Unicast DNS-SD via `dnsjava` library ([apps/android/app/build.gradle.kts 115-116](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L115-L116))

### iOS Configuration

From [apps/ios/Sources/Info.plist 31-33](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L31-L33):

```
<key>NSBonjourServices</key>
<array>
  <string>_openclaw-gw._tcp</string>
</array>
```

### Android Configuration

From [apps/android/app/build.gradle.kts 115-116](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L115-L116):

```
// Unicast DNS-SD (Wide-Area Bonjour) for tailnet discovery domains.
implementation("dnsjava:dnsjava:3.6.4")
```

**Purpose**: Auto-discovery of Gateway instances on the local network or Tailscale tailnet.

**Note**: For details on discovery protocols and pairing flow, see [Node Pairing and Discovery](https://deepwiki.com/openclaw/openclaw/11.1-node-pairing-and-discovery).

**Sources**: [apps/ios/Sources/Info.plist 31-33](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L31-L33) [apps/android/app/build.gradle.kts 115-116](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L115-L116)

## Capability Invocation Flow

```
"OS Permissions""Device Node""Node Registry""Gateway""Agent Runtime""OS Permissions""Device Node""Node Registry""Gateway""Agent Runtime"alt[Granted After Prompt][Still Denied]alt[Permission Granted][Permission Denied][Permission Not Determined]Tool call: nodes.invokeLookup node capabilitiesNode metadata + permissionsRPC request: capability + argsCheck permission statusStatus: grantedExecute capabilityResult payload (base64/JSON)Success + payloadStatus: deniedError: PERMISSION_MISSINGTool errorStatus: notDeterminedRequest permission (UI prompt)User responseExecute capabilityResult payloadSuccess + payloadError: PERMISSION_MISSINGTool error
```

**Sources**: [README.md 226-228](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L228) [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)

## Agent Tool Usage

Agents invoke node capabilities via the `nodes` tool. The tool registry maps capability names to `node.invoke` RPC calls.

### Example Tool Call

```
{
  "tool": "nodes",
  "operation": "invoke",
  "nodeId": "node-ios-abc123",
  "capability": "camera.snap",
  "args": {
    "format": "jpeg",
    "quality": 0.85
  }
}
```

### Tool Result

```
{
  "success": true,
  "payload": {
    "format": "jpeg",
    "base64": "iVBORw0KGgoAAAANSUhEUgAA...",
    "quality": 0.85
  }
}
```

**Sources**: [README.md 152](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L152-L152) [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)

## CLI Commands

The `openclaw` CLI provides direct access to node capabilities for debugging and manual invocation.

| Command | Purpose | Example |
| --- | --- | --- |
| `openclaw node list` | List paired nodes | `openclaw node list --format json` |
| `openclaw node describe <nodeId>` | Show capabilities and permissions | `openclaw node describe node-ios-abc123` |
| `openclaw node invoke <nodeId> <capability> [args]` | Invoke capability directly | `openclaw node invoke node-ios-abc123 camera.snap --format jpeg` |

**Sources**: [src/cli/nodes-cli.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-cli.ts)

## Security Considerations

### Exec Capability Restrictions (macOS)

From [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120):

- `system.run` is subject to exec approval policies
- Safe binaries can be allow-listed to skip approval prompts
- PTY isolation prevents direct access to host permissions
- Screen Recording permission required for sensitive commands

### Camera/Location Privacy

- All capabilities require explicit OS-level permissions
- Permission denials surface as `PERMISSION_MISSING` errors
- No silent fallbacks; users must grant permissions via system settings

### Network Pairing Security

- Nodes only accept connections from paired Gateways
- Pairing requires physical access or shared Tailscale tailnet
- Communication authenticated via shared tokens generated during pairing

**Sources**: [README.md 226-234](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L226-L234) [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)

## Troubleshooting

**Symptom**: `PERMISSION_MISSING` errors when invoking capabilities

**Diagnosis**:

```
openclaw node describe <nodeId>
```

Check the `permissions` field in the output:

```
{
  "capabilities": ["camera.snap", "location.get"],
  "permissions": {
    "camera": "denied",
    "location": "granted"
  }
}
```

**Fix**:

1. Grant required permissions in system settings (iOS Settings → Privacy, macOS System Preferences → Security & Privacy)
2. Restart the node app if permissions were just granted
3. Re-invoke the capability

### Capability Not Available

**Symptom**: Capability not listed in `node.describe` output

**Possible causes**:

- Platform limitation (e.g., `system.run` only available on macOS)
- Node app version mismatch with Gateway
- Node not fully paired

**Fix**:

1. Verify platform compatibility in [Platform Capability Matrix](https://github.com/openclaw/openclaw/blob/bf6ec64f/Platform%20Capability%20Matrix)
2. Ensure node app version matches Gateway version ([package.json 3](https://github.com/openclaw/openclaw/blob/bf6ec64f/package.json#L3-L3) [apps/ios/Sources/Info.plist 22-24](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L22-L24) [apps/android/app/build.gradle.kts 24-25](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts#L24-L25))
3. Re-pair the node if version mismatch detected

### Screen Recording Failures

**Symptom**: `screen.record` returns empty payload or timeout

**Possible causes**:

- Insufficient recording duration (`durationMs` too low)
- Screen Recording permission not granted (macOS)
- Platform restrictions (Android work profiles, enterprise MDM)

**Fix**:

1. Check permission status: `openclaw node describe <nodeId>`
2. Increase `durationMs` to at least 2000ms
3. Verify no screen capture restrictions (MDM policies often block screen recording)
4. On macOS, ensure Screen Recording permission is granted in System Preferences → Security & Privacy → Screen Recording

**Sources**: [src/cli/nodes-screen.ts 24-39](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L24-L39)

## Advanced Topics

### Multi-Screen Recording

For platforms with multiple displays, specify which screen to capture:

```
{
  "capability": "screen.record",
  "args": {
    "screenIndex": 1,
    "durationMs": 3000
  }
}
```

Index `0` is the primary display. Secondary and tertiary displays use indices `1`, `2`, etc.

### Audio-Enabled Screen Recording

Request system audio capture (platform support varies):

```
{
  "capability": "screen.record",
  "args": {
    "durationMs": 5000,
    "hasAudio": true
  }
}
```

**Platform notes**:

- **iOS**: Requires microphone permission; captures microphone audio, not system audio
- **macOS**: Can capture system audio with appropriate permissions
- **Android**: Internal audio capture support varies by device and Android version

### Custom Node Capabilities

Extensions can add custom node capabilities by:

1. Defining new capability names in the extension manifest
2. Implementing handlers in platform-specific node apps (Swift for iOS/macOS, Kotlin for Android)
3. Registering capabilities in the node's `describe` response

Custom capabilities follow the same permission and invocation patterns as built-in capabilities.

**Sources**: [src/cli/nodes-screen.ts 7-14](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts#L7-L14)

- [Node Pairing and Discovery](https://deepwiki.com/openclaw/openclaw/11.1-node-pairing-and-discovery): Auto-discovery via Bonjour/DNS-SD, pairing flow, authentication
- [Device Nodes](https://deepwiki.com/openclaw/openclaw/11-device-nodes): Overall node architecture and management
- [Tools and Skills](https://deepwiki.com/openclaw/openclaw/6-tools-and-skills): How agents invoke node capabilities via the tool system
- [Tool Security and Sandboxing](https://deepwiki.com/openclaw/openclaw/6.2-tool-security-and-sandboxing): Exec approval policies and safe binary allow-listing

---

**Sources**: [src/cli/nodes-screen.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cli/nodes-screen.ts) [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist) [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts) [README.md 145-234](https://github.com/openclaw/openclaw/blob/bf6ec64f/README.md#L145-L234) [AGENTS.md 120](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L120)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>