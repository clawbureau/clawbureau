Menu

## Local Deployment

Relevant source files
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [docs/docs.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/docs.json)
- [docs/help/faq.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md)
- [docs/help/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/index.md)
- [docs/help/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md)
- [docs/install/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md)
- [docs/install/installer.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/installer.md)
- [docs/install/migrating.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md)
- [docs/northflank.mdx](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx)
- [docs/platforms/digitalocean.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/digitalocean.md)
- [docs/platforms/exe-dev.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/gcp.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md)
- [docs/platforms/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md)
- [docs/platforms/linux.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/linux.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/platforms/oracle.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/oracle.md)
- [docs/platforms/windows.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/windows.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [docs/start/hubs.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/hubs.md)
- [docs/vps.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/vps.md)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/discord/monitor/presence-cache.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/discord/monitor/presence-cache.test.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)

## Purpose and Scope

This page covers running the OpenClaw Gateway locally on your own machine (macOS, Linux, or Windows via WSL2), including installation methods, service supervision, and state management. For deployments to remote servers, see [VPS Deployment](https://deepwiki.com/openclaw/openclaw/13.2-vps-deployment). For containerized cloud platforms, see [Cloud Deployment](https://deepwiki.com/openclaw/openclaw/13.3-cloud-deployment). For network access patterns (Tailscale, SSH tunnels, LAN binding), see [Network Configuration](https://deepwiki.com/openclaw/openclaw/13.4-network-configuration).

Local deployment runs the Gateway on the same machine where you work, with state stored in `~/.openclaw/` and workspace in `~/.openclaw/workspace/`. The Gateway binds to loopback (`127.0.0.1`) by default for security, accessible only from the local machine.

---

## Installation Methods

OpenClaw supports three primary installation methods for local deployment. All methods result in a global `openclaw` CLI and the ability to run the Gateway as a supervised background service.

The installer script provides an automated setup path that handles Node.js installation, environment configuration, and optional onboarding.

**macOS/Linux:**

```
curl -fsSL https://openclaw.bot/install.sh | bash
```

**Windows (PowerShell):**

```
iwr -useb https://openclaw.ai/install.ps1 | iex
```

The installer supports two installation modes:

| Mode | Method | Use Case |
| --- | --- | --- |
| `npm` | `npm install -g openclaw@latest` | Production installs, stable versions |
| `git` | Clone + build from source | Development, contributors, latest bits |

**Sources:**[docs/install/index.md 1-180](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md#L1-L180) [docs/install/installer.md 1-123](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/installer.md#L1-L123)

---

### npm Global Install (Manual)

If Node.js 22+ is already installed, install OpenClaw directly via npm:

```
npm install -g openclaw@latest
```

For systems with global `libvips` installed (common on macOS via Homebrew), force prebuilt `sharp` binaries to avoid build failures:

```
SHARP_IGNORE_GLOBAL_LIBVIPS=1 npm install -g openclaw@latest
```

After installation, run onboarding:

```
openclaw onboard --install-daemon
```

**Sources:**[docs/install/index.md 60-86](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md#L60-L86)

---

### Source Build (Contributors/Development)

Clone the repository and build from source for development or to run the latest unreleased code:

```
git clone https://github.com/openclaw/openclaw.git
cd openclaw
pnpm install
pnpm ui:build
pnpm build
openclaw onboard --install-daemon
```

If no global `openclaw` is installed, run commands via `pnpm openclaw ...` from the repository directory.

**Sources:**[docs/install/index.md 88-99](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md#L88-L99) [AGENTS.md 38-49](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L38-L49)

---

## Local Deployment Architecture

```
Developer Machine (macOS/Linux/WSL2)Workspace FilesState PersistenceService SupervisionGateway Runtimepnpm dev
(development)openclaw gateway installopenclaw gateway installBundled GatewaysupervisessupervisesMEMORY.mdopenclaw CLI
(global binary)Gateway Process
node dist/index.js gatewayLaunchAgent
(macOS)systemd --user
(Linux/WSL2)State Directory
~/.openclaw/Workspace
~/.openclaw/workspace/openclaw.jsoncredentials/
OAuth + API keysagents/*/sessions/Channel state
(WhatsApp, etc)SOUL.mdUSER.mdTOOLS.mdmemory/*.md
```

**Sources:**[docs/help/faq.md 295-314](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L295-L314) [AGENTS.md 120-121](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L121) [docs/platforms/index.md 40-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L40-L50)

---

## State Directory Structure

The state directory (`$OPENCLAW_STATE_DIR`, default `~/.openclaw/`) persists all runtime configuration, credentials, and session history. This directory is the source of truth for Gateway state and must be preserved across updates and migrations.

### Default State Directory Layout

```
~/.openclaw/
├── openclaw.json              # Main configuration file
├── credentials/               # Auth profiles (OAuth tokens, API keys)
│   ├── anthropic:default.json
│   ├── openai:default.json
│   └── ...
├── agents/                    # Per-agent state
│   └── main/                  # Default agent
│       ├── sessions/          # Session history (*.jsonl)
│       └── memory/            # Memory search index (SQLite + embeddings)
├── channels/                  # Channel-specific state
│   ├── whatsapp/              # WhatsApp session data
│   └── ...
├── workspace/                 # Agent workspace (MEMORY.md, skills, etc)
└── gateway.*.lock             # PID lock file (runtime only)
```

When running multiple Gateway instances with different profiles, each uses an isolated state directory:

| Profile | State Directory | Use Case |
| --- | --- | --- |
| (default) | `~/.openclaw/` | Single Gateway, most common |
| `--profile work` | `~/.openclaw-work/` | Isolated workspace/auth for work |
| `--profile personal` | `~/.openclaw-personal/` | Personal assistant instance |

Profile state directories are completely independent, allowing multiple Gateways on the same machine with separate configurations, credentials, and workspaces.

**Sources:**[docs/help/faq.md 383-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L383-L406) [docs/install/migrating.md 1-191](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L1-L191)

---

## State Directory Contents Mapping

```
Channel StateCredentials StoreAgent State (agents/main/)~/.openclaw/referencesreferencesopenclaw.json
(Zod-validated)credentials/
(encrypted at rest)agents//channels//workspace/gateway.*.lock
(runtime PID)sessions/
(*.jsonl transcripts)memory/
(SQLite + vectors)anthropic:default.json
(OAuth or API key)openai:default.json
(OAuth or API key)gemini:default.jsonwhatsapp/
(QR session)telegram/
(bot token)
```

**Sources:**[docs/help/faq.md 86-93](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L86-L93) [docs/install/migrating.md 20-66](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L20-L66)

---

## Service Supervision

Local deployments run the Gateway as a supervised background service for reliability and automatic restart on failure or reboot. The supervision mechanism depends on the operating system.

### macOS: LaunchAgent

On macOS, the Gateway installs as a user LaunchAgent managed by `launchd`. The service label depends on the installation source:

| Installation Source | Service Label | Notes |
| --- | --- | --- |
| npm/installer | `bot.molt.gateway` | Modern label (post-rebrand) |
| npm (profile) | `bot.molt.<profile>` | Profile-specific instance |
| Legacy installs | `com.openclaw.*` | Migrated by `openclaw doctor` |
| macOS Menu Bar App | (bundled) | Embedded Gateway, no separate LaunchAgent |

**Service management:**

```
# Install service
openclaw gateway install

# Start/stop/restart
openclaw gateway start
openclaw gateway stop
openclaw gateway restart

# Check status
openclaw gateway status

# View logs (unified logging)
./scripts/clawlog.sh
```

**LaunchAgent plist location:**`~/Library/LaunchAgents/bot.molt.gateway.plist`

**Sources:**[AGENTS.md 120-121](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L121) [docs/platforms/index.md 40-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L40-L50)

---

### Linux/WSL2: systemd User Service

On Linux and WSL2, the Gateway installs as a systemd user service. The unit file name depends on the profile:

| Profile | Unit Name | Notes |
| --- | --- | --- |
| (default) | `openclaw-gateway.service` | Standard service |
| `--profile work` | `openclaw-gateway-work.service` | Profile-specific |

**Service management:**

```
# Install service
openclaw gateway install

# Enable and start
systemctl --user enable --now openclaw-gateway.service

# Stop
systemctl --user stop openclaw-gateway.service

# Restart
systemctl --user restart openclaw-gateway.service

# Check status
systemctl --user status openclaw-gateway.service

# View logs
journalctl --user -u openclaw-gateway.service -f
```

**Unit file location:**`~/.config/systemd/user/openclaw-gateway.service`

**Sources:**[docs/platforms/linux.md 62-89](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/linux.md#L62-L89) [docs/platforms/windows.md 26-51](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/windows.md#L26-L51)

---

The macOS companion app bundles the Gateway runtime and provides a native menu bar interface with automatic updates via Sparkle. The app embeds the Gateway as a child process, eliminating the need for a separate LaunchAgent.

**Key features:**

- Automatic Gateway lifecycle management (start/stop/restart via menu)
- Sparkle auto-updates (appcast feed at `https://raw.githubusercontent.com/openclaw/openclaw/main/appcast.xml`)
- Native macOS integration (voice wake, system commands, Canvas)
- Developer ID signing + notarization for Gatekeeper

**Packaging and release:**

The macOS app is built using `scripts/package-mac-app.sh` with environment variables controlling the configuration:

| Variable | Purpose | Example |
| --- | --- | --- |
| `BUNDLE_ID` | App bundle identifier | `bot.molt.mac` |
| `APP_VERSION` | Marketing version | `2026.1.29` |
| `APP_BUILD` | Numeric build number (monotonic for Sparkle) | `$(git rev-list --count HEAD)` |
| `BUILD_CONFIG` | Build configuration | `release` |
| `SIGN_IDENTITY` | Code signing identity | `Developer ID Application: ...` |

**Sources:**[docs/platforms/mac/release.md 1-78](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md#L1-L78) [apps/ios/Sources/Info.plist 1-73](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L1-L73) [AGENTS.md 120-121](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L120-L121)

---

## Gateway Configuration for Local Deployment

The Gateway binds to loopback by default for security, accessible only from the local machine. This is the recommended configuration for local deployments.

### Default Gateway Settings

```
{
  "gateway": {
    "mode": "local",
    "bind": "loopback",
    "port": 18789,
    "auth": {
      "mode": "token",
      "allowTailscale": false
    }
  }
}
```

### Gateway Binding Modes

| Mode | Bind Address | Use Case | Auth Required |
| --- | --- | --- | --- |
| `loopback` | `127.0.0.1` | Local-only access (default) | Optional (recommended) |
| `lan` | `0.0.0.0` | LAN or public exposure | **Required** (token/password) |
| `tailnet` | Tailscale IP | Tailnet-only access | Required |
| `auto` | Detects environment | Convenience mode | Conditional |

**Security note:** Never bind to `0.0.0.0` without authentication. Use `loopback` for local access, or `tailnet` for secure remote access.

### Authentication Modes

```
Use CasesGateway Auth ModesNever usemode: token
(OPENCLAW_GATEWAY_TOKEN)mode: password
(OPENCLAW_GATEWAY_PASSWORD)mode: open
(no auth)allowTailscale: true
(Tailscale identity)Local dev
(loopback only)Production
(loopback + dashboard)Remote access
(Tailscale Serve)Public exposure
(AVOID)
```

**Sources:**[docs/platforms/fly.md 79-88](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L79-L88) [docs/help/faq.md 323-334](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L323-L334)

---

## Development vs Production Local Setups

Local deployments serve two distinct purposes: development (rapid iteration) and production (always-on reliability). The configuration differs significantly.

### Development Setup

Development setups prioritize fast iteration and debugging access. The Gateway runs directly via `pnpm dev` or the source CLI without service installation.

**Start Gateway:**

```
cd openclaw
pnpm dev
# or
pnpm openclaw gateway --port 18789 --bind loopback
```

**Characteristics:**

- No service installation (manual start/stop)
- Hot reload for code changes
- Direct console output (no log rotation)
- Source checkout required
- Auth often disabled for convenience

### Production Setup

Production setups prioritize reliability and automatic recovery. The Gateway runs as a supervised service (LaunchAgent or systemd) or via the macOS menu bar app.

**Install service:**

```
openclaw onboard --install-daemon
# or
openclaw gateway install
```

**Characteristics:**

- Supervised by OS service manager
- Automatic restart on failure/reboot
- Structured logging (unified logging on macOS, journald on Linux)
- Global npm install or macOS app (no source checkout needed)
- Auth required (token or password)

**Sources:**[docs/help/faq.md 295-317](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L295-L317) [AGENTS.md 38-49](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md#L38-L49)

---

## State Management and Persistence

Local deployments must preserve state across updates, restarts, and migrations. The state directory and workspace contain all persistent data.

### What Persists Where

```
Transient (Not Persisted)Workspace (~/.openclaw/workspace/)State Directory (~/.openclaw/)survivessurvivessurvivessurvivessurvivessurvivesdeleted onmanaged byopenclaw.json
(validated on load)credentials/
(OAuth + API keys)agents/*/sessions/
(conversation history)channels/
(WhatsApp/Telegram state)MEMORY.md
(user notes)SOUL.md
(agent personality)TOOLS.md
(skill docs)memory/
(indexed documents)gateway.*.lock
(runtime PID)Logs
(rotated/shipped)Temporary files
(/tmp)Updates
(npm/git)RestartService Manager
```

**Sources:**[docs/help/faq.md 383-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L383-L406) [docs/install/migrating.md 1-191](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L1-L191)

---

### Backup Strategy

The state directory and workspace contain all critical data. Regular backups prevent data loss from hardware failure, accidental deletion, or migration issues.

**Minimal backup (state + workspace):**

```
cd ~
tar -czf openclaw-backup-$(date +%Y%m%d).tgz .openclaw
```

**Profile-aware backup:**

```
# Backup all profiles
tar -czf openclaw-all-$(date +%Y%m%d).tgz .openclaw*
```

**Backup verification:**

```
tar -tzf openclaw-backup-*.tgz | head -20
```

**What to back up:**

- `~/.openclaw/` (entire state directory)
- `~/.openclaw/workspace/` (included in state directory)
- Multiple profiles if using `--profile`

**What NOT to back up:**

- `gateway.*.lock` (runtime PID, regenerated)
- Log files (rotated automatically)
- `/tmp` artifacts

**Sources:**[docs/help/faq.md 383-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L383-L406) [docs/install/migrating.md 66-86](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L66-L86)

---

### Migration Between Machines

Migrating a local deployment to a new machine preserves configuration, credentials, sessions, and workspace files. The process copies the state directory and workspace, then runs `openclaw doctor` to repair services and apply migrations.

**Migration steps:**

1. **Stop the Gateway on the old machine:**
	```
	openclaw gateway stop
	```
2. **Archive state and workspace:**
	```
	cd ~
	tar -czf openclaw-state.tgz .openclaw
	```
3. **Transfer to the new machine:**
	```
	scp openclaw-state.tgz user@new-machine:~
	```
4. **Install OpenClaw on the new machine:**
	```
	curl -fsSL https://openclaw.bot/install.sh | bash
	```
5. **Extract state on the new machine:**
	```
	cd ~
	tar -xzf openclaw-state.tgz
	```
6. **Run Doctor to repair services:**
	```
	openclaw doctor
	openclaw gateway restart
	openclaw status
	```

**Common migration footguns:**

| Issue | Symptom | Fix |
| --- | --- | --- |
| Profile mismatch | Config changes not taking effect | Use same `--profile` flag on new machine |
| Partial copy | Channels logged out, sessions missing | Copy entire `~/.openclaw/`, not just `openclaw.json` |
| Permission errors | Gateway can't read credentials | `chown -R $USER ~/.openclaw` |
| Remote mode confusion | Workspace changes not visible | Migrate the remote Gateway host, not the client |

**Sources:**[docs/install/migrating.md 1-191](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L1-L191) [docs/help/faq.md 383-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L383-L406)

---

Profiles enable running multiple isolated Gateway instances on the same machine, each with dedicated state directories, workspaces, and credentials. This is useful for separating work/personal contexts or testing configurations.

```
# Install service for "work" profile
openclaw gateway install --profile work

# Start work profile
openclaw gateway start --profile work

# Check status
openclaw gateway status --profile work

# Config changes scoped to profile
openclaw config set gateway.port 18790 --profile work
```
```
ServicesState DirectoriesSingle Machine~/.openclaw/
(default)~/.openclaw-work/
(work)~/.openclaw-personal/
(personal)bot.molt.gateway
(LaunchAgent/systemd)bot.molt.work
(LaunchAgent/systemd)bot.molt.personal
(LaunchAgent/systemd)
```

**Sources:**[docs/help/faq.md 383-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L383-L406) [docs/install/migrating.md 20-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L20-L50)

---

## Local Deployment Verification

After installation and service setup, verify the Gateway is running correctly and accessible.

### Verification Checklist

```
# 1. Check CLI is installed
openclaw --version

# 2. Check Gateway status
openclaw status

# 3. Check service is running
openclaw gateway status

# 4. Check config is valid
openclaw doctor

# 5. Check dashboard is accessible
openclaw dashboard
```

### Expected Output

**Gateway status (healthy):**

```
Gateway Status
Runtime: running (PID 12345)
RPC probe: ok (127.0.0.1:18789)
Config (cli): ~/.openclaw/openclaw.json
Config (service): ~/.openclaw/openclaw.json
```

**Service status (macOS):**

```
Service: bot.molt.gateway
Status: running
PID: 12345
```

**Service status (Linux):**

```
● openclaw-gateway.service - OpenClaw Gateway
   Loaded: loaded
   Active: active (running)
```

**Sources:**[docs/help/faq.md 196-244](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L196-L244) [docs/help/troubleshooting.md 10-27](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md#L10-L27)

---

## Common Local Deployment Issues

### Issue: openclaw: command not found

**Cause:** npm global bin directory not in `PATH`.

**Fix:**

```
# Check npm global prefix
npm prefix -g

# Add to PATH (add to ~/.zshrc or ~/.bashrc)
export PATH="$(npm prefix -g)/bin:$PATH"

# Reload shell
source ~/.zshrc
```

**Sources:**[docs/install/index.md 153-175](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md#L153-L175) [docs/help/troubleshooting.md 30-35](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md#L30-L35)

---

### Issue: Gateway service won't start

**Cause:** Port conflict, invalid config, or PID lock file from crashed process.

**Diagnosis:**

```
# Check port usage
lsof -i :18789

# Check lock file
ls ~/.openclaw/gateway.*.lock

# Check logs (macOS)
./scripts/clawlog.sh

# Check logs (Linux)
journalctl --user -u openclaw-gateway.service -n 50
```

**Fix:**

```
# Kill conflicting process
kill <PID>

# Remove stale lock file
rm ~/.openclaw/gateway.*.lock

# Repair config
openclaw doctor

# Restart
openclaw gateway restart
```

**Sources:**[docs/help/faq.md 196-244](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L196-L244) [docs/platforms/fly.md 265-278](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L265-L278)

---

**Cause:** Running commands with different `--profile` flags than the installed service.

**Symptoms:**

- Config changes not taking effect
- Channels logged out
- Sessions empty

**Fix:**

```
# Check which profile the service uses
openclaw gateway status

# Use the same profile for all commands
openclaw config set ... --profile <same-profile>
openclaw gateway restart --profile <same-profile>
```

**Sources:**[docs/install/migrating.md 127-145](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L127-L145)

---

## Summary

Local deployment runs the OpenClaw Gateway on your own machine with three installation methods (installer script, npm global, source build), OS-specific service supervision (LaunchAgent on macOS, systemd on Linux/WSL2, or the macOS menu bar app), and persistent state in `~/.openclaw/`. The Gateway binds to loopback by default for security, with optional token authentication for dashboard access. Development setups prioritize iteration with `pnpm dev`, while production setups use supervised services for reliability. Profile isolation enables running multiple independent Gateway instances on the same machine, each with dedicated state directories and workspaces.

**Sources:**[docs/install/index.md 1-180](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md#L1-L180) [docs/platforms/index.md 1-51](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md#L1-L51) [docs/help/faq.md 295-406](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L295-L406) [docs/install/migrating.md 1-191](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md#L1-L191)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-hmbioix2qbm" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-z5tp3lz1enf" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>