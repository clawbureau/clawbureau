Menu

## Gateway Commands

Relevant source files
- [docs/cli/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md)
- [docs/gateway/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md)
- [docs/gateway/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md)
- [docs/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md)
- [docs/start/getting-started.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md)
- [docs/start/wizard.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md)
- [scripts/protocol-gen-swift.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/protocol-gen-swift.ts)
- [src/cron/run-log.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/run-log.test.ts)
- [src/cron/run-log.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/run-log.ts)
- [src/cron/store.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/cron/store.ts)
- [src/gateway/protocol/index.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/index.ts)
- [src/gateway/protocol/schema.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/schema.ts)
- [src/gateway/server.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/server.ts)

This page documents the `openclaw gateway` CLI commands used to manage, monitor, and interact with the Gateway control plane. The Gateway is the central WebSocket server (default port 18789) that owns channel connections, coordinates agent execution, and exposes the RPC protocol for all OpenClaw operations.

For broader gateway architecture and operational guidance, see [Gateway](https://deepwiki.com/openclaw/openclaw/3-gateway). For service configuration options, see [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration). For remote access patterns, see [Remote Access](https://deepwiki.com/openclaw/openclaw/3.4-remote-access).

---

## Overview

The `openclaw gateway` command family provides tools for:

- **Running the Gateway process** directly (foreground or with supervision)
- **Service management** (installing, starting, stopping systemd/launchd/schtasks services)
- **Health monitoring** (status, health checks, discovery, and RPC probing)
- **Direct RPC invocation** for debugging and automation

All gateway management commands assume a single Gateway per host by default. For multi-instance deployments (rescue bots, isolated profiles), see [Multiple gateways](https://github.com/openclaw/openclaw/blob/bf6ec64f/Multiple%20gateways)

**Command Categories**

```
AdvancedService LifecycleHealth & DiscoveryProcess ManagementGateway Commandsgateway run
(Direct execution)gateway status
(Service + RPC probe)gateway health
(RPC health check)gateway probe
(Discovery + reachability)gateway install
(Service setup)gateway uninstall
(Service removal)gateway start
(Service start)gateway stop
(Service stop)gateway restart
(Service restart)gateway call
(Raw RPC method)
```

**Sources**: [docs/cli/index.md 136-147](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L136-L147) [docs/gateway/index.md 1-289](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L1-L289)

---

## Gateway Run

**Command**: `openclaw gateway run` (or just `openclaw gateway`)

Starts the Gateway process directly in the foreground. This is the primary command for running the Gateway, either manually during development or via a supervisor (systemd/launchd).

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--port <port>` | WebSocket/HTTP port | `18789` (or `OPENCLAW_GATEWAY_PORT`, `gateway.port`) |
| `--bind <mode>` | Network binding mode: `loopback`, `lan`, `tailnet`, `auto`, `custom` | `loopback` |
| `--token <token>` | Gateway auth token | `OPENCLAW_GATEWAY_TOKEN` or `gateway.auth.token` |
| `--auth <mode>` | Auth mode: `token` or `password` | `token` |
| `--password <password>` | Gateway password (if auth mode is `password`) | `gateway.auth.password` |
| `--tailscale <mode>` | Tailscale exposure: `off`, `serve`, `funnel` | `off` |
| `--tailscale-reset-on-exit` | Reset Tailscale config on exit | `false` |
| `--allow-unconfigured` | Allow startup without `gateway.mode=local` | `false` (dev only) |
| `--dev` | Use dev profile state/ports | `false` |
| `--reset` | Reset dev config/creds/sessions/workspace before start | `false` (dev only) |
| `--force` | Kill existing listener on port before starting | `false` |
| `--verbose` | Mirror debug logs to stdout | `false` |
| `--claude-cli-logs` | Enable Claude CLI logging | `false` |
| `--ws-log <mode>` | WebSocket log mode: `auto`, `full`, `compact` | `auto` |
| `--compact` | Alias for `--ws-log compact` | `false` |
| `--raw-stream` | Enable raw stream capture | `false` |
| `--raw-stream-path <path>` | Path for raw stream output |  |

### Behavior

- **Port binding precedence**: `--port` → `OPENCLAW_GATEWAY_PORT` → `gateway.port` → `18789`
- **Auth requirement**: Non-loopback binds (`lan` / `tailnet` / `custom`, or `auto` when loopback unavailable) require `gateway.auth.token` or `gateway.auth.password`
- **Configuration mode**: Requires `gateway.mode=local` unless `--allow-unconfigured` is passed (dev/testing only)
- **Canvas host**: Starts HTTP file server on `canvasHost.port` (default `18793`) unless disabled via `canvasHost.enabled=false` or `OPENCLAW_SKIP_CANVAS_HOST=1`
- **Hot reload**: Watches `openclaw.json` and applies safe changes without restart (`gateway.reload.mode=hybrid` default). Critical changes trigger in-process restart via SIGUSR1
- **Signal handling**:
	- `SIGTERM` = graceful shutdown (emits `shutdown` event to clients)
	- `SIGUSR1` = in-process restart (when authorized via config apply/update)
- **Force mode**: Uses `lsof` to find and terminate port listeners before binding (fails if `lsof` missing)

### Examples

```
# Basic local run
openclaw gateway

# Run on custom port with verbose logging
openclaw gateway --port 19000 --verbose

# Run with LAN binding (requires auth token)
openclaw gateway --bind lan --token my-secret-token

# Dev mode (isolated state, auto port spacing)
openclaw --dev gateway --allow-unconfigured

# Force-kill existing listener and start
openclaw gateway --force

# Tailscale Serve exposure
openclaw gateway --bind tailnet --tailscale serve
```

**Sources**: [docs/gateway/index.md 16-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L16-L43) [docs/cli/index.md 590-612](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L590-L612) [docs/start/wizard.md 1-322](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L1-L322)

---

## Gateway Status

**Command**: `openclaw gateway status`

Reports the supervisor runtime state (launchd/systemd/schtasks), RPC reachability, config paths, and probe target. This is the primary diagnostic command for gateway health.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--url <url>` | Gateway WebSocket URL override | Resolved from config/service |
| `--token <token>` | Auth token override | `OPENCLAW_GATEWAY_TOKEN` or config |
| `--password <password>` | Auth password override | Config |
| `--timeout <ms>` | RPC timeout in milliseconds | `10000` |
| `--no-probe` | Skip RPC probe (supervisor status only) | `false` |
| `--deep` | Include system-level scans (LaunchDaemons, system units, port listeners) | `false` |
| `--json` | Output JSON (stable for scripts) | `false` |
| `--verbose` | Extra diagnostic output | `false` |

### Output

**Status Components**:

1. **Supervisor Runtime**: Whether launchd/systemd/schtasks reports the service as running
2. **RPC Probe**: Whether `status` RPC method succeeds over WebSocket
3. **Config Paths**: CLI config vs service config (detects profile mismatches)
4. **Probe Target**: Actual URL/port being tested
5. **Last Gateway Error**: Recent error from logs when service looks running but port is closed
6. **Extra Services**: Legacy or profile-specific gateway services detected

**Gateway Status Flow**

```
NoYesYesNoNoYesNoYesNoYesYesNogateway statusCheck Supervisor
(launchd/systemd/schtasks)Supervisor State:
loaded/running/stoppedCompare Config Paths
(CLI vs service)Paths match?Warn: CLI using different
config than serviceResolve Probe Target
(--url or config → port + auth)--no-probe?Skip RPC probeConnect WebSocket
ws://host:portConnected?Error: Connection refusedSend connect frame
(protocol handshake)Auth OK?Error: Auth failedCall status RPC methodRPC OK?Error: RPC failed--deep?Scan system for extra
gateway services + listenersCheck recent logs for
last gateway errorDisplay Results:
runtime/probe/config/errors
```

**Sources**: [docs/gateway/index.md 191-213](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L191-L213) [docs/gateway/troubleshooting.md 183-222](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L183-L222) [docs/cli/index.md 616-630](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L616-L630)

### Examples

```
# Basic status (supervisor + RPC probe)
openclaw gateway status

# Status without RPC probe (when network is down)
openclaw gateway status --no-probe

# Deep scan (includes system services and port listeners)
openclaw gateway status --deep

# JSON output for scripting
openclaw gateway status --json

# Status against remote gateway
openclaw gateway status --url wss://remote.example.com:18789 --token $TOKEN
```

### Troubleshooting Output

When the service appears running but the port isn't listening, `gateway status` will:

1. Show the **Last gateway error** from recent logs
2. Detect common issues:
	- `gateway.mode` not set to `local`
	- Missing auth for non-loopback bind
	- Port conflict (with `lsof` suggestion)
	- Tailnet bind when no Tailscale interface exists

**Sources**: [docs/gateway/index.md 191-213](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L191-L213) [docs/gateway/troubleshooting.md 93-222](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L93-L222)

---

## Gateway Health

**Command**: `openclaw gateway health`

Calls the `health` RPC method to fetch a comprehensive health snapshot from the running Gateway. Returns model provider status, channel states, auth expiry, and system metrics.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--url <url>` | Gateway WebSocket URL | Resolved from config |
| `--token <token>` | Auth token | `OPENCLAW_GATEWAY_TOKEN` or config |
| `--password <password>` | Auth password | Config |
| `--timeout <ms>` | RPC timeout | `10000` |
| `--json` | Output JSON | `false` |
| `--verbose` | Extra connection diagnostics | `false` |

### Health Response Schema

The `health` RPC returns:

```
{
  ok: boolean,
  timestamp: number,
  version: string,
  uptime: number,
  modelProviders?: {
    [provider: string]: {
      configured: boolean,
      authProfiles?: Array<{
        profileId: string,
        expiresAt?: number,
        valid: boolean
      }>
    }
  },
  channels?: {
    [channel: string]: {
      configured: boolean,
      connected?: boolean,
      lastError?: string
    }
  },
  memory?: {
    heapUsed: number,
    heapTotal: number,
    rss: number
  }
}
```

### Examples

```
# Basic health check
openclaw gateway health

# Health with verbose connection logging
openclaw gateway health --verbose

# JSON output for monitoring
openclaw gateway health --json

# Health from remote gateway
openclaw gateway health --url wss://gateway.example.com --token $TOKEN
```

**Sources**: [docs/cli/index.md 542-549](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L542-L549) [docs/gateway/index.md 126](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L126-L126) [docs/gateway/troubleshooting.md 14-30](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L14-L30)

---

## Gateway Probe

**Command**: `openclaw gateway probe`

Performs gateway discovery and reachability testing. Useful when troubleshooting "which gateway am I talking to?" issues, especially with multiple instances or SSH tunnels.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--url <url>` | Gateway URL to probe | Auto-discovered or config |
| `--token <token>` | Auth token | Config |
| `--timeout <ms>` | Probe timeout | `5000` |
| `--json` | JSON output | `false` |

### Discovery Methods

The probe command attempts:

1. **Config-based URL**: From `gateway.remote.url` or derived from `gateway.port`
2. **Bonjour/DNS-SD discovery** (macOS): `_openclaw._tcp.local`
3. **Avahi discovery** (Linux): `avahi-browse -ptr _openclaw._tcp`
4. **Known ports**: Tests `127.0.0.1:18789` and common dev ports

For each discovered/configured endpoint, the command:

- Attempts WebSocket connection
- Validates protocol handshake
- Reports version, platform, and reachability

**Sources**: [docs/gateway/index.md 114-116](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L114-L116) [docs/cli/index.md 656-657](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L656-L657)

---

## Gateway Discover

**Command**: `openclaw gateway discover`

Performs network discovery for OpenClaw Gateways using Bonjour/DNS-SD (macOS) or Avahi (Linux). Lists all discovered instances with their advertised URLs, versions, and hostnames.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--timeout <ms>` | Discovery timeout | `3000` |
| `--json` | JSON output | `false` |

### Discovery Protocol

Gateways advertise themselves via mDNS as:

- **Service type**: `_openclaw._tcp.local`
- **TXT records**:
	- `version=<version>`
	- `platform=<platform>`
	- `mode=<mode>`

**Sources**: [docs/cli/index.md 657](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L657-L657)

---

## Service Management Commands

The service management commands (`install`, `uninstall`, `start`, `stop`, `restart`) interact with the system supervisor (launchd on macOS, systemd on Linux/WSL2, Task Scheduler on Windows).

### Service Architecture

```
Service MetadataWindows (WSL2)Linux/WSL2macOSenablesembedsembedsembedsembedsembedsembedsLaunchAgent
~/Library/LaunchAgents/bot.molt.gateway.plistlaunchctl
(bootout/kickstart)openclaw gateway
(supervised process)systemd user unit
~/.config/systemd/user/openclaw-gateway.servicesystemctl --user
(enable/start/stop)openclaw gateway
(supervised process)WSL2 systemd
(same as Linux)OPENCLAW_SERVICE_MARKER=openclawOPENCLAW_SERVICE_KIND=gatewayOPENCLAW_SERVICE_VERSION=
```

**Sources**: [docs/gateway/index.md 176-265](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L176-L265) [docs/start/wizard.md 129-136](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L129-L136)

---

## Gateway Install

**Command**: `openclaw gateway install`

Creates and loads a system supervisor service for the Gateway. The service auto-starts on boot and restarts on failure.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--port <port>` | Gateway port | `18789` or config |
| `--runtime <runtime>` | Runtime: `node` or `bun` | `node` (bun not recommended for WA/Telegram) |
| `--token <token>` | Auth token for service | `gateway.auth.token` |
| `--force` | Reinstall even if already installed | `false` |
| `--json` | JSON output | `false` |

- **macOS**: `bot.molt.<profile>` (legacy `com.openclaw.*` still cleaned up)
- **Linux**: `openclaw-gateway-<profile>.service`
- **Windows**: `OpenClaw Gateway (<profile>)`

Default profile is `gateway` (no suffix). Use `--profile <name>` or `OPENCLAW_STATE_DIR=~/.openclaw-<name>` for named profiles.

### Installation Process

1. **Detect existing service**: Checks for current profile service (no-op if already installed unless `--force`)
2. **Generate supervisor config**:
	- macOS: LaunchAgent plist at `~/Library/LaunchAgents/bot.molt.<profile>.plist`
	- Linux: systemd unit at `~/.config/systemd/user/openclaw-gateway-<profile>.service`
3. **Embed metadata**: Service markers (`OPENCLAW_SERVICE_MARKER=openclaw`, `OPENCLAW_SERVICE_KIND=gateway`, version)
4. **Enable lingering** (Linux): Runs `loginctl enable-linger` so service survives logout
5. **Load/enable service**:
	- macOS: `launchctl bootstrap gui/$UID ~/Library/LaunchAgents/bot.molt.<profile>.plist`
	- Linux: `systemctl --user enable --now openclaw-gateway-<profile>.service`

### Service Configuration

**LaunchAgent (macOS)**:

```
<plist version="1.0">
<dict>
  <key>Label</key>
  <string>bot.molt.gateway</string>
  <key>ProgramArguments</key>
  <array>
    <string>/usr/local/bin/openclaw</string>
    <string>gateway</string>
    <string>--port</string>
    <string>18789</string>
  </array>
  <key>EnvironmentVariables</key>
  <dict>
    <key>OPENCLAW_GATEWAY_TOKEN</key>
    <string>...</string>
    <key>OPENCLAW_SERVICE_MARKER</key>
    <string>openclaw</string>
    <key>OPENCLAW_SERVICE_KIND</key>
    <string>gateway</string>
    <key>OPENCLAW_SERVICE_VERSION</key>
    <string>1.x.x</string>
  </dict>
  <key>KeepAlive</key>
  <true/>
  <key>StandardOutPath</key>
  <string>~/.openclaw/logs/gateway.log</string>
  <key>StandardErrorPath</key>
  <string>~/.openclaw/logs/gateway.err.log</string>
</dict>
</plist>
```

**systemd unit (Linux)**:

```
[Unit]
Description=OpenClaw Gateway (profile: gateway, v1.x.x)
After=network-online.target
Wants=network-online.target

[Service]
ExecStart=/usr/local/bin/openclaw gateway --port 18789
Restart=always
RestartSec=5
Environment=OPENCLAW_GATEWAY_TOKEN=...
Environment=OPENCLAW_SERVICE_MARKER=openclaw
Environment=OPENCLAW_SERVICE_KIND=gateway
Environment=OPENCLAW_SERVICE_VERSION=1.x.x
WorkingDirectory=/home/user

[Install]
WantedBy=default.target
```

**Sources**: [docs/gateway/index.md 176-187](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L176-L187) [docs/gateway/index.md 222-265](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L222-L265) [docs/start/wizard.md 129-136](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L129-L136)

### Examples

```
# Install with defaults (Node runtime, port 18789)
openclaw gateway install

# Install with custom port
openclaw gateway install --port 19000

# Reinstall (update runtime or config)
openclaw gateway install --force --runtime node

# Install named profile
openclaw --profile rescue gateway install --port 19001
```

**Sources**: [docs/cli/index.md 616-632](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L616-L632) [docs/gateway/index.md 103-113](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L103-L113)

---

## Gateway Uninstall

**Command**: `openclaw gateway uninstall`

Removes the Gateway supervisor service. Does not delete config or state files (use `openclaw uninstall` or `openclaw reset` for that).

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--json` | JSON output | `false` |

### Uninstall Process

1. **Stop service** (if running)
2. **Unload from supervisor**:
	- macOS: `launchctl bootout gui/$UID/bot.molt.<profile>`
	- Linux: `systemctl --user disable --now openclaw-gateway-<profile>.service`
3. **Delete service file**:
	- macOS: `rm ~/Library/LaunchAgents/bot.molt.<profile>.plist`
	- Linux: `rm ~/.config/systemd/user/openclaw-gateway-<profile>.service`
4. **Reload supervisor**:
	- Linux: `systemctl --user daemon-reload`

### Examples

```
# Uninstall default profile service
openclaw gateway uninstall

# Uninstall named profile
openclaw --profile rescue gateway uninstall
```

**Sources**: [docs/cli/index.md 619](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L619-L619) [docs/gateway/index.md 211](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L211-L211)

---

## Gateway Start/Stop/Restart

**Commands**:

- `openclaw gateway start`
- `openclaw gateway stop`
- `openclaw gateway restart`

Control the supervisor-managed Gateway service without reinstalling.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--json` | JSON output | `false` |

### Behavior

**Start**: Loads and starts the service (no-op if already running)

- macOS: `launchctl bootstrap gui/$UID ~/Library/LaunchAgents/bot.molt.<profile>.plist`
- Linux: `systemctl --user start openclaw-gateway-<profile>.service`

**Stop**: Stops the service (sends SIGTERM for graceful shutdown)

- macOS: `launchctl bootout gui/$UID/bot.molt.<profile>`
- Linux: `systemctl --user stop openclaw-gateway-<profile>.service`

**Restart**: Stops then starts (or uses supervisor restart if available)

- macOS: `launchctl kickstart -k gui/$UID/bot.molt.<profile>`
- Linux: `systemctl --user restart openclaw-gateway-<profile>.service`

### Examples

```
# Start gateway service
openclaw gateway start

# Stop gateway (graceful shutdown)
openclaw gateway stop

# Restart (applies config changes)
openclaw gateway restart

# JSON output for scripting
openclaw gateway restart --json
```

**Sources**: [docs/cli/index.md 620-622](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L620-L622) [docs/gateway/index.md 191-219](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L191-L219)

---

## Gateway Call

**Command**: `openclaw gateway call <method>`

Invokes arbitrary RPC methods on the Gateway. Used for debugging, automation, or accessing methods not exposed via dedicated CLI commands.

### Options

| Option | Description | Default |
| --- | --- | --- |
| `--params <json>` | Method parameters (JSON or JSON5) | `{}` |
| `--url <url>` | Gateway WebSocket URL | Resolved from config |
| `--token <token>` | Auth token | Config |
| `--password <password>` | Auth password | Config |
| `--timeout <ms>` | RPC timeout | `30000` |
| `--expect-final` | Wait for final response (for long-running methods like `agent`) | `false` |
| `--json` | JSON output (default for call) | `true` |

### RPC Protocol Reference

All Gateway RPC methods follow the protocol defined in [src/gateway/protocol/schema.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/schema.ts):

**Request Frame** (`RequestFrame`):

```
{
  type: "req",
  id: string,        // Client-generated unique ID
  method: string,    // RPC method name
  params: object     // Method-specific parameters
}
```

**Response Frame** (`ResponseFrame`):

```
{
  type: "res",
  id: string,        // Matches request ID
  ok: boolean,       // Success flag
  payload?: object,  // Result data (if ok: true)
  error?: {          // Error details (if ok: false)
    code: string,
    message: string,
    details?: object,
    retryable?: boolean,
    retryAfterMs?: number
  }
}
```

### Available RPC Methods

**Core Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `status` | None | Short status summary |
| `health` | None | Full health snapshot |
| `system-presence` | None | Current presence list |
| `system-event` | `{ text: string, mode?: "now" \| "next-heartbeat" }` | Post system event |

**Agent Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `agent` | `AgentParams` | Run agent turn (streams events) |
| `agent.identity` | `AgentIdentityParams` | Get agent identity info |
| `agent.wait` | `AgentWaitParams` | Wait for agent run completion |
| `agents.list` | `AgentsListParams` | List configured agents |

**Session Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `sessions.list` | `SessionsListParams` | List stored sessions |
| `sessions.preview` | `SessionsPreviewParams` | Preview session transcript |
| `sessions.resolve` | `SessionsResolveParams` | Resolve session by key |
| `sessions.patch` | `SessionsPatchParams` | Update session metadata |
| `sessions.reset` | `SessionsResetParams` | Reset session history |
| `sessions.delete` | `SessionsDeleteParams` | Delete session |
| `sessions.compact` | `SessionsCompactParams` | Compact session context |

**Config Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `config.get` | `ConfigGetParams` | Get config value |
| `config.set` | `ConfigSetParams` | Set config value |
| `config.apply` | `ConfigApplyParams` | Validate and write full config |
| `config.patch` | `ConfigPatchParams` | Merge partial config update |
| `config.schema` | `ConfigSchemaParams` | Get config schema (TypeBox) |

**Channel Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `channels.status` | `ChannelsStatusParams` | Channel health |
| `channels.logout` | `ChannelsLogoutParams` | Logout from channel |

**Node Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `node.list` | `NodeListParams` | List paired/connected nodes |
| `node.describe` | `NodeDescribeParams` | Describe node capabilities |
| `node.invoke` | `NodeInvokeParams` | Invoke node command |
| `node.pair.request` | `NodePairRequestParams` | Request node pairing |
| `node.pair.list` | `NodePairListParams` | List pairing requests |
| `node.pair.approve` | `NodePairApproveParams` | Approve pairing |
| `node.pair.reject` | `NodePairRejectParams` | Reject pairing |
| `node.pair.verify` | `NodePairVerifyParams` | Verify paired status |
| `node.rename` | `NodeRenameParams` | Rename node |

**Cron Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `cron.status` | `CronStatusParams` | Cron scheduler status |
| `cron.list` | `CronListParams` | List cron jobs |
| `cron.add` | `CronAddParams` | Create cron job |
| `cron.update` | `CronUpdateParams` | Update cron job |
| `cron.remove` | `CronRemoveParams` | Delete cron job |
| `cron.run` | `CronRunParams` | Trigger job run |
| `cron.runs` | `CronRunsParams` | List job run history |

**Wizard Methods**

| Method | Parameters Schema | Purpose |
| --- | --- | --- |
| `wizard.start` | `WizardStartParams` | Start onboarding wizard |
| `wizard.next` | `WizardNextParams` | Advance wizard step |
| `wizard.cancel` | `WizardCancelParams` | Cancel wizard |
| `wizard.status` | `WizardStatusParams` | Get wizard state |

**Sources**: [src/gateway/protocol/index.ts 1-521](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/index.ts#L1-L521) [src/gateway/protocol/schema.ts 1-17](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/schema.ts#L1-L17) [docs/gateway/index.md 115-136](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L115-L136)

### Gateway Call Examples

```
# Get gateway status
openclaw gateway call status

# Get full health snapshot
openclaw gateway call health

# List all sessions
openclaw gateway call sessions.list --params '{"limit": 50}'

# Get config value
openclaw gateway call config.get --params '{"path": "agents.defaults.model.primary"}'

# Set config value
openclaw gateway call config.set --params '{
  "path": "agents.defaults.model.primary",
  "value": "anthropic/claude-sonnet-4-20250514"
}'

# Apply full config (with baseHash)
openclaw gateway call config.apply --params '{
  "config": {...},
  "baseHash": "abc123"
}'

# Run agent turn (streams events; use --expect-final to wait)
openclaw gateway call agent --expect-final --params '{
  "message": "Hello",
  "to": "+15555550123"
}'

# List paired nodes
openclaw gateway call node.list

# Invoke node command
openclaw gateway call node.invoke --params '{
  "nodeId": "iphone-123",
  "command": "camera.snap",
  "params": {"facing": "front"}
}'

# List cron jobs
openclaw gateway call cron.list

# Trigger cron job
openclaw gateway call cron.run --params '{"id": "job-123"}'

# Post system event
openclaw gateway call system-event --params '{
  "text": "Deployment completed",
  "mode": "now"
}'
```

**Sources**: [docs/cli/index.md 649-667](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L649-L667) [docs/gateway/index.md 283-288](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L283-L288)

---

## Common Usage Patterns

### Development Workflow

```
# Start gateway in foreground with verbose logging
openclaw gateway --verbose

# In another terminal: tail logs
openclaw logs --follow

# Test health
openclaw gateway health --verbose

# Stop (Ctrl+C in gateway terminal)
```

### Production Service Setup

```
# Install and start service
openclaw gateway install --runtime node
openclaw gateway start

# Verify running
openclaw gateway status
openclaw health

# Apply config changes
openclaw config set some.key value
openclaw gateway restart

# Check logs
openclaw logs --limit 100
```

### Troubleshooting Connection Issues

```
# Full status with deep scan
openclaw gateway status --deep

# Probe discovery
openclaw gateway probe

# Test raw connectivity
openclaw gateway health --verbose

# Check for port conflicts
lsof -nP -iTCP:18789 -sTCP:LISTEN

# Force-restart (kill existing listener)
openclaw gateway stop
openclaw gateway --force
```
```
# Install main gateway
openclaw gateway install --port 18789

# Install rescue gateway (isolated profile)
openclaw --profile rescue gateway install --port 19001

# Status for specific profile
openclaw --profile rescue gateway status

# Stop rescue gateway
openclaw --profile rescue gateway stop
```

**Sources**: [docs/gateway/index.md 16-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L16-L43) [docs/gateway/index.md 53-114](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L53-L114) [docs/gateway/troubleshooting.md 1-692](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L1-L692)

---

The Gateway RPC returns structured errors with standard codes defined in `ErrorCodes` enum:

| Error Code | Meaning | Retryable | Typical Cause |
| --- | --- | --- | --- |
| `NOT_LINKED` | Channel not authenticated | No | WhatsApp/Telegram not logged in |
| `AGENT_TIMEOUT` | Agent did not respond in time | Maybe | Long-running task, timeout too short |
| `INVALID_REQUEST` | Schema/parameter validation failed | No | Malformed params, unknown method |
| `UNAVAILABLE` | Gateway or dependency unavailable | Yes | Shutdown in progress, service down |
| `AUTH_FAILED` | Authentication failed | No | Invalid token/password |
| `NOT_FOUND` | Resource not found | No | Session/node/job doesn't exist |
| `RATE_LIMITED` | Too many requests | Yes | Backoff and retry |

**Error Response Structure**:

```
{
  type: "res",
  id: "...",
  ok: false,
  error: {
    code: "AGENT_TIMEOUT",
    message: "Agent did not respond within 30 minutes",
    retryable: true,
    retryAfterMs: 60000,
    details?: { ... }
  }
}
```

**Sources**: [src/gateway/protocol/schema.ts 1-17](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/gateway/protocol/schema.ts#L1-L17) [docs/gateway/index.md 161-168](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L161-L168)

### Troubleshooting Decision Tree

```
NoYesNoYesNoYesNoYesNoYesYesNoYesNoGateway command failsRun: openclaw gateway statusSupervisor
running?Service not runningService
installed?Run: openclaw gateway installRun: openclaw gateway startService reports runningRPC probe
succeeds?RPC probe failsCheck port listener:
lsof -nP -iTCP:18789Port
listening?Port not listeninggateway.mode
= local?Run: openclaw config set
gateway.mode localAuth required
for bind?Set gateway.auth.tokenCheck last gateway error:
openclaw gateway statusPort listeningUsing SSH
tunnel?Verify tunnel:
ssh -N -L 18789:127.0.0.1:18789Verify token/password
in --token or configRPC worksMethod-specific
error?NOT_LINKED errorAGENT_TIMEOUTIncrease timeout or
use process toolINVALID_REQUESTVerify params schemaIssue resolved
```

**Sources**: [docs/gateway/troubleshooting.md 1-692](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L1-L692) [docs/gateway/index.md 161-168](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L161-L168)

---

- **Agent execution**: See [Agent Commands](https://deepwiki.com/openclaw/openclaw/12.2-agent-commands) for `openclaw agent` (runs agent turns via gateway)
- **Channel management**: See [Channel Commands](https://deepwiki.com/openclaw/openclaw/12.3-channel-commands) for `openclaw channels login/status`
- **Configuration**: See [Configuration Commands](https://deepwiki.com/openclaw/openclaw/12.5-configuration-commands) for `openclaw config/configure`
- **Diagnostics**: See [Diagnostic Commands](https://deepwiki.com/openclaw/openclaw/12.6-diagnostic-commands) for `openclaw doctor/logs/system`
- **Health monitoring**: See [Health Monitoring](https://deepwiki.com/openclaw/openclaw/14.1-health-monitoring) for operational guidance

**Sources**: [docs/cli/index.md 1-919](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L1-L919)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-7khuxtjp8f" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg> <svg id="mermaid-5cnv3xfsc84" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>