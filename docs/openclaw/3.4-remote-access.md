Menu

## Remote Access

Relevant source files
- [AGENTS.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/AGENTS.md)
- [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)
- [apps/ios/Sources/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist)
- [apps/ios/Tests/Info.plist](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Tests/Info.plist)
- [apps/ios/project.yml](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/project.yml)
- [docs/cli/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md)
- [docs/docs.json](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/docs.json)
- [docs/gateway/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md)
- [docs/gateway/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md)
- [docs/help/faq.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md)
- [docs/help/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/index.md)
- [docs/help/troubleshooting.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/troubleshooting.md)
- [docs/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md)
- [docs/install/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/index.md)
- [docs/install/installer.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/installer.md)
- [docs/install/migrating.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md)
- [docs/northflank.mdx](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/northflank.mdx)
- [docs/platforms/digitalocean.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/digitalocean.md)
- [docs/platforms/exe-dev.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md)
- [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md)
- [docs/platforms/gcp.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/gcp.md)
- [docs/platforms/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/index.md)
- [docs/platforms/linux.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/linux.md)
- [docs/platforms/mac/release.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/mac/release.md)
- [docs/platforms/oracle.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/oracle.md)
- [docs/platforms/windows.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/windows.md)
- [docs/reference/RELEASING.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/reference/RELEASING.md)
- [docs/start/getting-started.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md)
- [docs/start/hubs.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/hubs.md)
- [docs/start/wizard.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md)
- [docs/vps.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/vps.md)
- [fly.private.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.private.toml)
- [fly.toml](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml)
- [scripts/write-build-info.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/scripts/write-build-info.ts)
- [src/discord/monitor/presence-cache.test.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/discord/monitor/presence-cache.test.ts)
- [src/infra/git-commit.ts](https://github.com/openclaw/openclaw/blob/bf6ec64f/src/infra/git-commit.ts)

## Purpose and Scope

This page explains how to access the Gateway when it's running on a remote machine (VPS, Mac mini, headless server) rather than on `localhost`. It covers SSH tunnels, Tailscale integration, LAN binding, and authentication requirements.

**Related pages:**

- For Gateway configuration options: see [Gateway Configuration](https://deepwiki.com/openclaw/openclaw/3.1-gateway-configuration)
- For Gateway service management: see [Gateway Service Management](https://deepwiki.com/openclaw/openclaw/3.3-gateway-service-management)
- For deployment guides: see VPS hosting pages under section 13

**Sources:**[docs/help/faq.md 103-115](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L103-L115) [docs/gateway/index.md 44-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L44-L50) [docs/index.md 68-76](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md#L68-L76)

---

## Network Binding Modes

The Gateway supports five binding modes controlled by `gateway.bind` (or `--bind`):

| Mode | Bind Address | Use Case | Auth Required |
| --- | --- | --- | --- |
| `loopback` | `127.0.0.1` | Local development, SSH tunnel access | Recommended (token) |
| `lan` | `0.0.0.0` | Direct LAN/WAN access | **Yes** (token or password) |
| `tailnet` | Tailscale IP (100.64.0.0/10) | Tailscale network access | **Yes** (token or password) |
| `custom` | User-specified IP | Custom network interface | **Yes** (token or password) |
| `auto` | Falls back through loopback → tailnet → lan | Automatic selection | Required for non-loopback |

**Configuration:**

- Set via `gateway.bind` in `openclaw.json`
- Override with `--bind <mode>` CLI flag
- Override with `OPENCLAW_GATEWAY_BIND` environment variable

**Port configuration:**

- Default port: `18789`
- Set via `gateway.port` in config
- Override with `--port <port>` CLI flag
- Override with `OPENCLAW_GATEWAY_PORT` environment variable

**Sources:**[docs/gateway/index.md 29-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L29-L43) [docs/help/faq.md 95-96](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L95-L96) [docs/start/wizard.md 113-118](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L118)

---

## Remote Access Patterns

```
Gateway HostAccess MethodsClient DevicesRecommendedRecommendedRecommendedRecommendedLess secureLess secureRequires Auth TokenIdentity or TokenREQUIRES Auth TokenREQUIRES Auth TokenLaptop
(CLI/Control UI)Phone
(iOS/Android App)Browser
(Control UI)SSH Tunnel
-L 18789:127.0.0.1:18789Tailscale Serve
HTTPS + IdentityDirect LAN
http://ip:18789Tailnet Bind
http://100.x.x.x:18789Gateway
bind=loopback
127.0.0.1:18789Gateway
bind=lan
0.0.0.0:18789Gateway
bind=tailnet
100.x.x.x:18789
```

**Remote Access Architecture**

The diagram shows three primary remote access patterns and their security requirements.

**Sources:**[docs/help/faq.md 323-333](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L323-L333) [docs/gateway/troubleshooting.md 189-223](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L189-L223) [docs/index.md 68-76](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md#L68-L76)

---

SSH tunnels provide secure remote access while keeping the Gateway bound to `loopback`.

### Setup

**On the Gateway host:**

```
# Gateway runs on loopback (default)
openclaw gateway --bind loopback --port 18789
```

**From your client machine:**

```
# Forward local port 18789 to remote Gateway
ssh -N -L 18789:127.0.0.1:18789 user@gateway-host
```

**Authentication:**

- If `gateway.auth.token` is set, clients must include it in `connect.params.auth.token`
- The wizard generates a token by default (even for loopback)
- Retrieve token from config: `openclaw config get gateway.auth.token`

**Control UI access:**

```
# On client machine (after tunnel is established)
openclaw dashboard
# Opens http://127.0.0.1:18789/?token=...
```

**Verification:**

```
# Check tunnel is working
openclaw status
openclaw health
```

**Persistent tunnel (systemd example):**

Create `~/.config/systemd/user/openclaw-tunnel.service`:

```
[Unit]
Description=OpenClaw SSH Tunnel
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/ssh -N -L 18789:127.0.0.1:18789 -o ServerAliveInterval=60 user@gateway-host
Restart=always
RestartSec=10

[Install]
WantedBy=default.target
```

Enable:

```
systemctl --user enable openclaw-tunnel.service
systemctl --user start openclaw-tunnel.service
```

**Sources:**[docs/gateway/index.md 44-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L44-L50) [docs/help/faq.md 330-332](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L330-L332) [docs/index.md 75](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/index.md#L75-L75)

---

Tailscale Serve provides HTTPS access with automatic identity-based authentication.

### Setup

**Prerequisites:**

1. Tailscale installed on Gateway host
2. Gateway host connected to your Tailscale network
3. `tailscale` CLI available in PATH

**Configuration:**

Set in `openclaw.json`:

```
{
  "gateway": {
    "bind": "loopback",
    "tailscale": {
      "mode": "serve",
      "resetOnExit": true
    },
    "auth": {
      "mode": "token",
      "token": "your-token-here",
      "allowTailscale": true
    }
  }
}
```

Or via CLI:

```
openclaw gateway --bind loopback --tailscale serve
```

**What it does:**

1. Gateway stays bound to `loopback`
2. Tailscale Serve creates an HTTPS proxy: `https://<machine-name>.<tailnet>.ts.net/`
3. Identity headers (`Tailscale-User-Login`, `Tailscale-User-Name`) satisfy authentication when `gateway.auth.allowTailscale: true`

**Access:**

```
# From any device on your Tailscale network
open https://gateway-host.your-tailnet.ts.net/
```

**Tailscale Funnel (Public Internet):**

⚠️ **Security warning:** Funnel exposes the Gateway to the public internet. Only use if you need inbound webhooks from untrusted sources.

```
{
  "gateway": {
    "tailscale": {
      "mode": "funnel"
    }
  }
}
```

Or via CLI:

```
openclaw gateway --tailscale funnel
```

**Verification:**

```
# Check Tailscale status
tailscale status

# Check Gateway is reachable
openclaw gateway probe --url wss://gateway-host.your-tailnet.ts.net
```

**Sources:**[docs/help/faq.md 328-332](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L328-L332) [docs/start/wizard.md 113-118](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L113-L118) [docs/start/wizard.md 322-323](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L322-L323)

---

## LAN Binding

LAN binding exposes the Gateway on all network interfaces (`0.0.0.0`).

### Configuration

**Set in `openclaw.json`:**

```
{
  "gateway": {
    "mode": "local",
    "bind": "lan",
    "port": 18789,
    "auth": {
      "mode": "token",
      "token": "your-secure-token-here"
    }
  }
}
```

**Generate a secure token:**

```
openssl rand -hex 32
```

Or let the wizard generate one:

```
openclaw configure
# Select "Gateway" → "Auth" → "Token" → "Generate"
```

**Start Gateway:**

```
openclaw gateway --bind lan --token "your-token"
```

### Client Connection

**From Control UI:**

1. Open `http://<gateway-ip>:18789/`
2. Click settings (gear icon)
3. Paste token in "Gateway Token" field
4. Save

**From CLI:**

```
# Set remote connection
openclaw config set gateway.mode remote
openclaw config set gateway.remote.url "ws://<gateway-ip>:18789"
openclaw config set gateway.remote.token "your-token"

# Verify
openclaw status
```

**From mobile apps:**

- iOS/Android: Settings → Gateway URL → `http://<gateway-ip>:18789`
- Paste token when prompted

### Security Requirements

**Authentication is MANDATORY for `bind=lan`:**

- Gateway refuses to start without `gateway.auth.token` or `gateway.auth.password`
- Error message: `"refusing to bind to lan without auth"`
- Use strong tokens (32+ hex characters recommended)

**Network security:**

- LAN binding makes the Gateway accessible to all devices on the network
- Use firewall rules to restrict access if needed
- Consider VPN/Tailscale for better isolation

**Sources:**[docs/gateway/troubleshooting.md 196-214](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L196-L214) [docs/help/faq.md 95-96](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L95-L96) [docs/start/getting-started.md 116-118](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/getting-started.md#L116-L118)

---

## Tailnet Binding

Tailnet binding restricts the Gateway to your Tailscale network interface.

### Configuration

**Set in `openclaw.json`:**

```
{
  "gateway": {
    "bind": "tailnet",
    "port": 18789,
    "auth": {
      "mode": "token",
      "token": "your-token"
    }
  }
}
```

**Start Gateway:**

```
openclaw gateway --bind tailnet --token "your-token"
```

**What happens:**

- Gateway binds to the Tailscale IP (100.64.0.0/10 range)
- Only devices on your Tailscale network can reach it
- Authentication is still required (token or password)

**Find your Tailscale IP:**

```
tailscale ip -4
# Example output: 100.64.1.42
```

**Connect from clients:**

```
# Client config
openclaw config set gateway.mode remote
openclaw config set gateway.remote.url "ws://100.64.1.42:18789"
openclaw config set gateway.remote.token "your-token"
```

**Differences from Tailscale Serve:**

| Feature | Tailscale Serve | Tailnet Bind |
| --- | --- | --- |
| Binding | `loopback` | Tailscale IP |
| Protocol | HTTPS (via Serve proxy) | HTTP/WS (direct) |
| Identity auth | Supported | No (manual token required) |
| MagicDNS | `https://name.tailnet.ts.net/` | `http://100.x.x.x:18789` |

**Sources:**[docs/help/faq.md 328-332](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L328-L332) [docs/gateway/troubleshooting.md 215-218](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L215-L218)

---

## Authentication Flow

```
"gateway.auth""Gateway(WebSocket Server)""Client(CLI/UI/App)""gateway.auth""Gateway(WebSocket Server)""Client(CLI/UI/App)"alt[bind = loopback][bind = lan/tailnet/custom]alt[Tailscale identity present][No identity]alt[Token matches][Token mismatch]alt[Password matches][Password mismatch]alt[No auth configured][Token auth][Password auth]Connection establishedWebSocket connectCheck bind modeAuth recommended but optionalAuth REQUIREDSend protocol handshake requestreq{method:"connect", params:{auth}}Check allowTailscaleAllow (identity headers)res{ok:false, error:"unauthorized"}Close connection (1008)Verify tokenAllowres{ok:false, error:"invalid token"}Close connection (1008)Verify passwordAllowres{ok:false, error:"invalid password"}Close connection (1008)res{ok:true, payload:hello-ok}
```

**Authentication Flow for Different Binding Modes**

This diagram shows how the Gateway authenticates clients based on binding mode and configuration.

**Sources:**[docs/gateway/index.md 116-121](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L116-L121) [docs/gateway/protocol.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/protocol.md) [docs/gateway/troubleshooting.md 196-214](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L196-L214)

---

## Configuration Precedence

Authentication and binding settings follow this precedence (highest to lowest):

```
overridesoverridesoverridesExampleExampleExampleCLI Flags
--bind --port --token --passwordEnvironment Variables
OPENCLAW_GATEWAY_*Config File
~/.openclaw/openclaw.jsonBuilt-in Defaults
bind=loopback, port=18789--bind lan --token abc123OPENCLAW_GATEWAY_TOKEN=abc123gateway.auth.token
```

**Configuration Precedence Chain**

**Environment Variables:**

- `OPENCLAW_GATEWAY_PORT`: Gateway port
- `OPENCLAW_GATEWAY_BIND`: Binding mode
- `OPENCLAW_GATEWAY_TOKEN`: Authentication token
- `OPENCLAW_STATE_DIR`: State directory (affects config path)
- `OPENCLAW_CONFIG_PATH`: Explicit config file path

**Sources:**[docs/gateway/index.md 42-43](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L42-L43) [docs/gateway/troubleshooting.md 189-223](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L189-L223)

---

## Remote Mode Configuration

When the Gateway runs on a different machine, clients use "remote mode" to connect.

### Local vs Remote Mode

**Local mode** (default):

- CLI manages the Gateway lifecycle
- Config: `gateway.mode: "local"`
- Use case: Gateway runs on the same machine as the CLI

**Remote mode:**

- CLI connects to an existing Gateway elsewhere
- Config: `gateway.mode: "remote"`
- Use case: Gateway runs on VPS/server, CLI on laptop

### Setting Up Remote Mode

**Via wizard:**

```
openclaw onboard --mode remote
# Prompts for URL and token
```

**Manual configuration:**

```
openclaw config set gateway.mode remote
openclaw config set gateway.remote.url "ws://gateway-host:18789"
openclaw config set gateway.remote.token "your-token"
```

Or in `openclaw.json`:

```
{
  "gateway": {
    "mode": "remote",
    "remote": {
      "url": "ws://gateway-host:18789",
      "token": "your-token"
    }
  }
}
```

**Verification:**

```
openclaw gateway status
# Should show:
# Runtime: remote
# Probe target: ws://gateway-host:18789

openclaw status
# Shows connection to remote Gateway
```

**Sources:**[docs/start/wizard.md 152-162](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/start/wizard.md#L152-L162) [docs/gateway/troubleshooting.md 193-206](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L193-L206)

---

## Common Deployment Patterns

```
Pattern 4: LAN Accesshttp://192.168.x.x:18789LAN Clients
(same network)Gateway
bind=lan
0.0.0.0:18789
+ REQUIRED tokenPattern 3: Tailscale Networkhttps://name.ts.netAny DeviceTailscale Serve
HTTPS ProxyGateway
bind=loopback
--tailscale servePattern 2: VPS with SSH Tunnelssh user@vpsLaptop CLI/UISSH Tunnel
-L 18789:127.0.0.1:18789VPS Gateway
bind=loopbackPattern 1: Local DevelopmentSame machineSame machineCLIGateway
bind=loopback
127.0.0.1:18789Control UI
http://127.0.0.1:18789
```

**Common Remote Access Deployment Patterns**

Each pattern balances security, convenience, and complexity.

**Pattern selection guide:**

| Pattern | Security | Setup Complexity | Use Case |
| --- | --- | --- | --- |
| Local Development | High (loopback only) | Low | Dev/testing on same machine |
| VPS + SSH Tunnel | High (encrypted tunnel) | Medium | Production with SSH access |
| Tailscale Network | High (mesh VPN + identity) | Medium | Multi-device, team access |
| LAN Access | Low (requires strong auth) | Low | Trusted local network only |

**Sources:**[docs/help/faq.md 323-333](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L323-L333) [docs/platforms/fly.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md) [docs/platforms/exe-dev.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md) [docs/vps.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/vps.md)

---

## Control UI Remote Access

The Control UI requires special consideration for remote access due to WebCrypto requirements.

### HTTPS Requirement for Device Identity

**Problem:**

- Control UI uses WebCrypto for device identity/pairing
- WebCrypto requires a "secure context" (HTTPS or localhost)
- Plain HTTP over LAN/WAN blocks WebCrypto

**Error symptoms:**

```
"device identity required"
"connect failed"
"WebCrypto not available"
```

**Solutions:**

**Option 1: Tailscale Serve (Recommended)**

```
openclaw gateway --bind loopback --tailscale serve
# Access via: https://gateway-host.tailnet.ts.net/
```

**Option 2: SSH Tunnel**

```
# On client machine
ssh -N -L 18789:127.0.0.1:18789 user@gateway-host
# Access via: http://127.0.0.1:18789/ (localhost is secure context)
```

**Option 3: Disable Device Identity (Insecure)**

Only use for testing or trusted networks:

```
{
  "gateway": {
    "controlUi": {
      "allowInsecureAuth": true
    },
    "auth": {
      "mode": "token",
      "token": "your-strong-token"
    }
  }
}
```

Then access via: `http://<gateway-ip>:18789/`

**Sources:**[docs/gateway/troubleshooting.md 75-86](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L75-L86) [docs/web/control-ui.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/web/control-ui.md) [docs/help/faq.md 323-334](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L323-L334)

---

## Mobile App Remote Access

iOS and Android apps discover and connect to the Gateway using Bonjour/DNS-SD.

### Discovery Methods

**Local network (automatic):**

- Apps use Bonjour/DNS-SD to find `_openclaw-gw._tcp` services
- Works on same LAN/WiFi network
- No configuration needed

**Tailscale network:**

- Apps can discover via Tailscale DNS when connected to tailnet
- Gateway must advertise service on Tailscale interface
- May require `gateway.discovery.enabled: true`

**Manual configuration:**

- Apps allow manual Gateway URL entry
- Use `ws://gateway-ip:18789` or `wss://gateway-host.tailnet.ts.net`
- Requires token if auth is configured

### Pairing Flow

```
"Operator""Gateway""DNS-SD""Mobile App""Operator""Gateway""DNS-SD""Mobile App"alt[Not paired][Already paired]Connection establishedBrowse for _openclaw-gw._tcpFound servicesConnect (WebSocket)Handshake (protocol version)node.pair.request{deviceInfo}Pairing code notificationopenclaw pairing approve <code>node.pair.approve{pairingId}Store pairing credentialsConnect with pairing tokenAuthenticatednode.invoke{command, params}Response
```

**Mobile App Discovery and Pairing Flow**

**Sources:**[docs/nodes/index.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/nodes/index.md) [docs/gateway/pairing.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/pairing.md) [apps/ios/Sources/Info.plist 30-33](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/ios/Sources/Info.plist#L30-L33) [apps/android/app/build.gradle.kts](https://github.com/openclaw/openclaw/blob/bf6ec64f/apps/android/app/build.gradle.kts)

---

## Security Best Practices

### Authentication

**Use strong tokens:**

```
# Generate 32-byte hex token
openssl rand -hex 32

# Or use the wizard
openclaw configure
# Select Gateway → Auth → Token → Generate
```

**Token storage:**

- Tokens stored in `gateway.auth.token` (config file)
- Environment variable: `OPENCLAW_GATEWAY_TOKEN`
- Never commit tokens to version control
- Use `.env` files or secret management for production

**Password authentication:**

```
{
  "gateway": {
    "auth": {
      "mode": "password",
      "password": "your-secure-password"
    }
  }
}
```

### Network Security

**Recommended binding modes by deployment:**

| Deployment | Recommended Bind | Auth | Access Method |
| --- | --- | --- | --- |
| Local dev | `loopback` | Token (generated) | Direct localhost |
| Personal VPS | `loopback` | Token | SSH tunnel or Tailscale Serve |
| Team server | `tailnet` | Token + allowTailscale | Tailscale network |
| Trusted LAN | `lan` | Strong token | Direct LAN access |

**Never do this:**

- ❌ `bind=lan` without authentication
- ❌ Weak tokens (short, predictable)
- ❌ Public internet exposure without HTTPS
- ❌ Shared tokens across multiple deployments

**Firewall rules (if using `bind=lan`):**

```
# Example: iptables (Linux)
# Allow only from specific subnet
iptables -A INPUT -p tcp --dport 18789 -s 192.168.1.0/24 -j ACCEPT
iptables -A INPUT -p tcp --dport 18789 -j DROP
```

**Sources:**[docs/gateway/security.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/security.md) [docs/gateway/troubleshooting.md 196-214](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L196-L214) [docs/help/faq.md 182-189](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L182-L189)

---

## Troubleshooting

### Gateway Not Reachable

**Symptoms:**

- `openclaw status` shows `RPC probe: failed`
- `openclaw gateway status` shows `Runtime: running` but `RPC probe: failed`
- Control UI shows "connecting..." forever

**Checks:**

```
# 1. Verify Gateway is listening
openclaw gateway status
# Look for: Probe target, Config (service), Runtime status

# 2. Check what's listening on the port
# Linux/macOS:
ss -ltnp | grep 18789
# or
lsof -i :18789

# 3. Test raw connection
nc -zv gateway-host 18789
# or
curl http://gateway-host:18789/

# 4. Check Gateway logs
openclaw logs --follow
```

**Common causes:**

**1\. Gateway bound to wrong interface:**

```
# Fix: Set correct bind mode
openclaw config set gateway.bind loopback
openclaw gateway restart
```

**2\. Firewall blocking port:**

```
# Linux: check firewall
sudo iptables -L -n | grep 18789
sudo ufw status

# macOS: check firewall
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate
```

**3\. Auth mismatch:**

```
# Check what auth is configured
openclaw config get gateway.auth.mode
openclaw config get gateway.auth.token

# Update client config
openclaw config set gateway.remote.token "correct-token"
```

**4\. Wrong Gateway URL:**

```
# Check what URL CLI is using
openclaw gateway status
# Look for: Probe target

# Update remote URL
openclaw config set gateway.remote.url "ws://correct-host:18789"
```

**Sources:**[docs/gateway/troubleshooting.md 189-223](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L189-L223) [docs/help/faq.md 159-178](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L159-L178)

### SSH Tunnel Connection Issues

**Symptoms:**

- Tunnel disconnects frequently
- `Connection refused` errors
- Tunnel works initially then stops

**Fixes:**

**1\. Add keepalive to SSH tunnel:**

```
ssh -N -L 18789:127.0.0.1:18789 \
    -o ServerAliveInterval=60 \
    -o ServerAliveCountMax=3 \
    user@gateway-host
```

**2\. Use autossh for automatic reconnection:**

```
# Install autossh (Debian/Ubuntu)
sudo apt-get install autossh

# Run with autossh
autossh -M 0 -N -L 18789:127.0.0.1:18789 \
    -o ServerAliveInterval=60 \
    -o ServerAliveCountMax=3 \
    user@gateway-host
```

**3\. Check Gateway is actually running on remote:**

```
# SSH into Gateway host
ssh user@gateway-host

# Check Gateway status
openclaw gateway status

# Check logs
openclaw logs --tail 50
```

**Sources:**[docs/gateway/index.md 44-50](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L44-L50) [docs/install/migrating.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/install/migrating.md)

### Tailscale Serve Not Working

**Symptoms:**

- `https://gateway-host.tailnet.ts.net/` returns 404 or connection refused
- Tailscale status shows serve not configured

**Checks:**

```
# 1. Verify Tailscale is running
tailscale status

# 2. Check Tailscale serve status
tailscale serve status

# 3. Check Gateway is trying to use Tailscale
openclaw config get gateway.tailscale.mode
# Should be: "serve" or "funnel"

# 4. Check Gateway logs for Tailscale errors
openclaw logs --follow | grep -i tailscale
```

**Fixes:**

**1\. Ensure Gateway is starting Tailscale Serve:**

```
# Start with Tailscale Serve explicitly
openclaw gateway --bind loopback --tailscale serve --force

# Check serve was configured
tailscale serve status
```

**2\. Verify Tailscale binary is in PATH:**

```
which tailscale
# Should return: /usr/bin/tailscale or similar

# If not found, add to service PATH
# Edit service file (systemd example):
# Environment="PATH=/usr/local/bin:/usr/bin:/bin"
```

**3\. Check Tailscale permissions:**

```
# Tailscale serve may require sudo or specific user permissions
# Run Gateway as the same user that can run \`tailscale serve\`
```

**Sources:**[docs/gateway/tailscale.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/tailscale.md) [docs/help/faq.md 328-333](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/help/faq.md#L328-L333)

**Symptoms:**

- Control UI shows "unauthorized"
- "device identity required" error
- "connect failed" error
- WebCrypto errors in browser console

**Fixes:**

**1\. Verify token is correct:**

```
# Get token from Gateway
openclaw config get gateway.auth.token

# In Control UI:
# Settings → Gateway Token → Paste token → Save
```

**2\. Use HTTPS (Tailscale Serve):**

```
openclaw gateway --bind loopback --tailscale serve
# Then access via: https://gateway-host.tailnet.ts.net/
```

**3\. Use SSH tunnel for secure context:**

```
ssh -N -L 18789:127.0.0.1:18789 user@gateway-host
# Then access via: http://127.0.0.1:18789/
```

**4\. Enable insecure auth (testing only):**

```
{
  "gateway": {
    "controlUi": {
      "allowInsecureAuth": true
    }
  }
}
```

**Sources:**[docs/gateway/troubleshooting.md 75-86](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/troubleshooting.md#L75-L86) [docs/web/control-ui.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/web/control-ui.md)

---

## VPS-Specific Patterns

### Cloud Provider Port Requirements

Different cloud providers have different networking defaults:

**Fly.io:**

- Uses `internal_port` for health checks
- Must bind to `0.0.0.0` (use `--bind lan`)
- Provides automatic HTTPS via `force_https: true`
- See [Fly.io deployment guide](https://deepwiki.com/openclaw/openclaw/13.3-cloud-deployment)

**DigitalOcean/Hetzner/Oracle:**

- Direct VPS access via public IP
- Firewall rules needed for port 18789
- SSH tunnel recommended over direct exposure
- See VPS guides in section 13

**exe.dev:**

- Provides HTTPS proxy automatically
- Gateway can stay on loopback
- nginx reverse proxy handles external access
- See [exe.dev guide](https://deepwiki.com/openclaw/openclaw/13.2-vps-deployment)

**Sources:**[docs/platforms/fly.md 62-90](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L62-L90) [docs/platforms/exe-dev.md 1-40](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/exe-dev.md#L1-L40) [docs/platforms/digitalocean.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/digitalocean.md)

### Docker Deployment Networking

When running in Docker, networking requires special consideration:

**Container port mapping:**

```
# docker-compose.yml
services:
  openclaw:
    image: openclaw:latest
    ports:
      - "18789:18789"  # Map host:container
    environment:
      - OPENCLAW_GATEWAY_BIND=lan  # Must bind to 0.0.0.0 in container
```

**Dockerfile CMD:**

```
CMD ["node", "dist/index.js", "gateway", "--bind", "lan", "--port", "3000"]
```

**Sources:**[docs/platforms/fly.md 46-77](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/fly.md#L46-L77) [docs/platforms/hetzner.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/platforms/hetzner.md) [fly.toml 1-30](https://github.com/openclaw/openclaw/blob/bf6ec64f/fly.toml#L1-L30)

---

## Multiple Gateway Instances

You can run multiple isolated Gateway instances on the same host or network using profiles.

**Dev profile (`--dev`):**

```
# Uses isolated state and ports
openclaw --dev gateway
# State: ~/.openclaw-dev
# Port: 19001 (default)
# Canvas: 19005
```

**Named profiles:**

```
# Main instance
openclaw --profile main gateway --port 18789

# Rescue instance
openclaw --profile rescue gateway --port 18790
```

**Configuration per profile:**

- State dir: `~/.openclaw-<profile>`
- Config: `~/.openclaw-<profile>/openclaw.json`
- Workspace: `~/.openclaw/workspace-<profile>` (if configured)

**Service names:**

- macOS: `bot.molt.<profile>`
- Linux: `openclaw-gateway-<profile>.service`

**Sources:**[docs/gateway/index.md 55-114](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/index.md#L55-L114) [docs/gateway/multiple-gateways.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/gateway/multiple-gateways.md)

---

### Gateway Management

```
# Status and health
openclaw gateway status
openclaw gateway probe
openclaw health

# Service lifecycle
openclaw gateway install
openclaw gateway start
openclaw gateway stop
openclaw gateway restart

# Manual run
openclaw gateway --bind loopback --port 18789
openclaw gateway --bind lan --token "abc123"
openclaw gateway --tailscale serve
```

### Remote Mode Configuration

```
# Set remote mode
openclaw config set gateway.mode remote
openclaw config set gateway.remote.url "ws://host:18789"
openclaw config set gateway.remote.token "token"

# Check connection
openclaw status
openclaw health
```

### Discovery and Troubleshooting

```
# Discover Gateway instances
openclaw gateway discover

# Check what's listening
ss -ltnp | grep 18789
lsof -i :18789

# View logs
openclaw logs --follow
tail -f /tmp/openclaw/openclaw-*.log
```

**Sources:**[docs/cli/gateway.md](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/gateway.md) [docs/cli/index.md 589-659](https://github.com/openclaw/openclaw/blob/bf6ec64f/docs/cli/index.md#L589-L659)

<svg id="mermaid-fu8dstus3vp" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 2412 512" style="max-width: 512px;" role="graphics-document document" aria-roledescription="error"><g></g><g><path class="error-icon" d="m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"></path><path class="error-icon" d="m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"></path><path class="error-icon" d="m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"></path><path class="error-icon" d="m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"></path><path class="error-icon" d="m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"></path><path class="error-icon" d="m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"></path><text class="error-text" x="1440" y="250" font-size="150px" style="text-anchor: middle;">Syntax error in text</text> <text class="error-text" x="1250" y="400" font-size="100px" style="text-anchor: middle;">mermaid version 11.12.2</text></g></svg>