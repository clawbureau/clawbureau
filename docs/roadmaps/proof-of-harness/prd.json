{
  "name": "clawbureau",
  "project": "clawbureau",
  "description": "Proof-of-harness adapters & specs â€” tie OpenClaw + external harnesses (Claude Code, Codex, Pi, Opencode, Factory Droid, scripts) into verifiable URM/event-chain/receipt proof bundles.",
  "branchName": "ralph/proof-of-harness-adapters",
  "userStories": [
    {
      "id": "POH-US-001",
      "title": "Proof-of-Harness Adapter Spec v1",
      "description": "As a platform engineer, I want a canonical harness adapter spec so that different runtimes emit compatible proof bundles.",
      "acceptanceCriteria": [
        "Document URM + event-chain + receipt binding requirements",
        "Define required harness metadata fields (id/version/config_hash/runtime)",
        "Specify receipt binding headers (run_id/event_hash/idempotency)",
        "Document event types + hashing rules",
        "Spec includes examples for OpenClaw + CLI harnesses"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Implemented: adapter spec draft + roadmap scaffolding."
    },
    {
      "id": "POH-US-002",
      "title": "Proof-of-Harness schemas",
      "description": "As a verifier, I want versioned schemas for URM/event-chain/proof-bundle/attestation so that validation is deterministic.",
      "acceptanceCriteria": [
        "Add JSON schemas for URM, event_chain, proof_bundle, execution_attestation",
        "Register schemas in clawverify allowlist",
        "Update schema README / index",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Implemented: added PoH payload schemas (proof_bundle, event_chain, urm, execution_attestation) + updated schema README."
    },
    {
      "id": "POH-US-003",
      "title": "Clawverify proof-bundle validation",
      "description": "As a marketplace, I want clawverify to validate harness proofs fail-closed so that trust tiers are reliable.",
      "acceptanceCriteria": [
        "Validate proof_bundle payload against schema",
        "Verify receipt envelopes with clawproxy DID",
        "Verify event-chain hash linkage",
        "Return trust tier based on validated components",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Implemented: payload validation aligned with PoH proof_bundle.v1 schema, cryptographic receipt verification via verifyReceipt(), event-chain hash linkage with chain_root_hash, trust tier computation.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-004",
      "title": "Receipt binding + harness metadata",
      "description": "As a verifier, I want receipts bound to runs/harness metadata so that LLM calls are traceable.",
      "acceptanceCriteria": [
        "Define and document standard binding headers",
        "Attach run_id/event_hash/idempotency fields to receipts",
        "Include harness metadata in receipt binding or proof bundle",
        "Update clawproxy docs/skill.md",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Builds on existing X-Run-Id/X-Event-Hash support in clawproxy.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-005",
      "title": "OpenClaw clawproxy provider plugin",
      "description": "As an OpenClaw user, I want model calls routed through clawproxy with run bindings so that receipts are automatic.",
      "acceptanceCriteria": [
        "Provider plugin routes all model calls via clawproxy",
        "Inject binding headers (run_id/event_hash/idempotency)",
        "Attach receipts into run log/artifacts",
        "Configurable base URL + token",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Implements the reference harness adapter for OpenClaw.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-006",
      "title": "OpenClaw harness recorder",
      "description": "As a worker, I want OpenClaw to emit URM + event chain + proof bundle so that submissions are verifiable.",
      "acceptanceCriteria": [
        "Capture tool + model events into hash-linked chain",
        "Generate URM with harness config hash",
        "Assemble proof bundle with receipts + event chain",
        "Sign proof bundle with DID-work",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Recorder used by worker plugin + manual exports.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-007",
      "title": "External harness adapters",
      "description": "As an operator, I want adapters for Claude Code/Codex/Pi/Opencode/Factory Droid so that external runs are verifiable.",
      "acceptanceCriteria": [
        "Provide wrapper scripts for each harness",
        "Route LLM calls through clawproxy",
        "Emit event chain + URM + proof bundle",
        "Publish usage docs + examples",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Wrappers should be opt-in and non-invasive.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-008",
      "title": "clawproof SDK for API scripts",
      "description": "As a developer, I want a small SDK to emit proof bundles from scripts so that API workloads are auditable.",
      "acceptanceCriteria": [
        "SDK records event chain + URM",
        "SDK collects receipts via clawproxy",
        "SDK outputs proof bundle + DID signature",
        "Provide minimal Node.js example",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Enables integrations outside OpenClaw.",
      "completionNotes": "Completed by agent"
    },
    {
      "id": "POH-US-009",
      "title": "Canonical gateway receipts + signer allowlist",
      "description": "As a marketplace, I want clawproxy to emit canonical signed receipt envelopes and clawverify to fail-closed verify only allowlisted gateway signers so that gateway-tier proofs are non-forgeable end-to-end.",
      "acceptanceCriteria": [
        "clawproxy returns `_receipt_envelope` as SignedEnvelope<GatewayReceiptPayload> for /v1/proxy/:provider",
        "Receipt signer_did is did:key derived from PROXY_SIGNING_KEY public key",
        "clawverify requires GATEWAY_RECEIPT_SIGNER_DIDS allowlist for receipt verification (fail-closed when missing)",
        "verify/bundle, verify/batch, and verify/agent propagate allowlist into receipt verification",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Completes the end-to-end gateway tier path by making receipts verifiable and non-forgeable.",
      "completionNotes": "Implemented canonical gateway receipt envelopes in clawproxy and fail-closed signer allowlisting in clawverify."
    },
    {
      "id": "POH-US-010",
      "title": "Receipt binding enforcement for gateway tier",
      "description": "As a verifier, I want gateway receipts to be required to bind to the proof bundle event chain so that signature-valid receipts cannot be replayed across unrelated bundles to obtain gateway tier.",
      "acceptanceCriteria": [
        "When verifying a proof bundle, receipts only count as verified if they are signature-valid AND have binding.run_id + binding.event_hash_b64u",
        "binding.run_id must match the bundle event_chain run_id",
        "binding.event_hash_b64u must reference an event_hash_b64u present in the bundle event_chain",
        "If event_chain is missing or invalid, receipts must not count toward gateway tier (fail-closed)",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Hardens gateway-tier derivation against receipt replay by requiring binding linkage to the event chain.",
      "completionNotes": "Implemented in clawverify proof-bundle verification."
    },
    {
      "id": "POH-US-011",
      "title": "Commit proof allowlist wiring for code bounties",
      "description": "As a marketplace, I want code bounties to verify commit proofs without DEPENDENCY_NOT_CONFIGURED so that code-based submissions can be trusted and auto-approval can run safely.",
      "acceptanceCriteria": [
        "clawverify commit-proof verification is enabled by configuring CLAWCLAIM_REPO_CLAIM_ALLOWLIST in staging + prod",
        "Document the expected repo_claim_id values for the initial allowlist",
        "Provide a minimal smoke script that generates a commit_proof envelope and verifies it against /v1/verify/commit-proof",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Operational wiring + documentation so code bounties can use commit proofs with fail-closed verification.",
      "completionNotes": "Configured clawverify allowlist and added docs/smoke tooling."
    },
    {
      "id": "POH-US-012",
      "title": "External harness shim proxy + harness registry",
      "description": "As a platform engineer, I want external harness CLIs to produce gateway-tier PoH bundles and I want a single registry of supported harnesses so the system stays coherent as we add more runtimes.",
      "acceptanceCriteria": [
        "External harness wrappers capture canonical _receipt_envelope receipts and inject PoH binding headers",
        "Add a canonical harness registry file that lists supported harness IDs + connection patterns",
        "Generate a markdown registry doc from the canonical registry",
        "Add validation + CI checks to keep docs in sync",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Inspired by vercel-labs/skills agent registry + sync scripts; keeps our PoH harness map centralized.",
      "completionNotes": "Implemented a local shim server in clawproof-adapters + added a PoH harness registry + sync/validate scripts + CI workflow."
    }
  ],
  "metadata": {
    "updatedAt": "2026-02-07T18:52:44.000Z"
  }
}