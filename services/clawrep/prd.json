{
  "project": "clawbureau",
  "branchName": "feat/trust/CRP-OPS-001-clawrep-mvp",
  "description": "clawrep.com (Reputation) â€” canonical deterministic reputation and reviewer selection service.",
  "userStories": [
    {
      "id": "CRP-US-001",
      "title": "Reputation minting from verified closures",
      "description": "As marketplace infrastructure, we need deterministic non-transferable reputation events so verified work outcomes increase reputation fairly.",
      "acceptanceCriteria": [
        "POST /v1/events/ingest accepts closure events with strict schema validation",
        "Ingest is idempotent by source_event_id",
        "Score contribution uses a concave value function and closure/proof/owner weights",
        "Typecheck and tests pass"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Delivered with idempotent ingest + concave deterministic scoring in services/clawrep/src/index.ts and src/core.ts."
    },
    {
      "id": "CRP-US-002",
      "title": "Daily reputation decay",
      "description": "As trust operations, we need deterministic daily decay so stale reputation naturally decreases over time.",
      "acceptanceCriteria": [
        "POST /v1/decay/run applies decay with deterministic idempotency by run day",
        "Cron trigger runs decay automatically",
        "Decay operations are auditable",
        "Typecheck and tests pass"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Delivered with decay_runs idempotency + cron schedule and POST /v1/decay/run."
    },
    {
      "id": "CRP-US-003",
      "title": "Trust tier calculation",
      "description": "As marketplaces, we need deterministic tier calculations so gating decisions are reproducible.",
      "acceptanceCriteria": [
        "GET /v1/tiers/:did returns deterministic tier outputs",
        "Tier logic includes dispute-rate gating",
        "Tier values are derived from authoritative D1 profile state",
        "Typecheck and tests pass"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Delivered via deriveTier() and GET /v1/tiers/:did."
    },
    {
      "id": "CRP-US-004",
      "title": "Deterministic dispute penalties",
      "description": "As trust operations, we need deterministic penalty schedules so dispute outcomes have predictable reputation impacts.",
      "acceptanceCriteria": [
        "POST /v1/penalties/apply enforces deterministic penalty schedule",
        "Penalty severity handling is bounded and deterministic",
        "Penalty events are auditable and idempotent by source_event_id",
        "Typecheck and tests pass"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Delivered via deterministic penalty schedule + POST /v1/penalties/apply."
    },
    {
      "id": "CRP-US-005",
      "title": "Reviewer selection API compatibility",
      "description": "As clawbounties integration clients, we need stable reviewer selection/read APIs so quorum flows remain deterministic.",
      "acceptanceCriteria": [
        "POST /v1/reviewers/select matches existing request/response contract",
        "GET /v1/reviewers/:did matches existing response contract",
        "Selection ordering is deterministic",
        "Typecheck and tests pass"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Delivered with contract-compatible reviewer endpoints and compatibility note file."
    },
    {
      "id": "CRP-US-006",
      "title": "Public reputation read API",
      "description": "As platforms, we need a deterministic reputation read endpoint for trust display and policy decisions.",
      "acceptanceCriteria": [
        "GET /v1/rep/:did returns score/profile/tier context",
        "Non-existent DID returns deterministic NOT_FOUND",
        "Responses are schema-stable",
        "Typecheck and tests pass"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Delivered with GET /v1/rep/:did and deterministic NOT_FOUND behavior."
    },
    {
      "id": "CRP-US-007",
      "title": "Owner-verified weighting",
      "description": "As trust systems, we need owner-verified weighting to reduce sybil risk while preserving deterministic scoring.",
      "acceptanceCriteria": [
        "Owner-verified multiplier is applied deterministically in closure scoring",
        "Reviewer responses surface owner-verified state",
        "Audit trail preserves owner verification context",
        "Typecheck and tests pass"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Delivered with owner_verified weighting and reviewer owner verification fields."
    },
    {
      "id": "CRP-US-008",
      "title": "Canonical ingest-loop envelopes",
      "description": "As trust platform infrastructure, we need queue-backed canonical ingest-loop envelopes so external outcome producers feed clawrep deterministically.",
      "acceptanceCriteria": [
        "POST /v1/events/ingest-loop validates canonical envelope schema and enqueues event",
        "Queue processing supports closure, penalty, and recovery envelopes",
        "source_event_id idempotency remains authoritative",
        "Typecheck and tests pass"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Delivered canonical queue-backed ingest-loop in clawrep (`POST /v1/events/ingest-loop`) with closure|penalty|recovery envelopes and idempotent source_event_id processing."
    },
    {
      "id": "CRP-US-009",
      "title": "Appeal recovery scoring",
      "description": "As trust governance, we need deterministic appeal recovery score deltas to offset upheld-dispute penalties.",
      "acceptanceCriteria": [
        "Core supports recovery event type with bounded severity",
        "Recovery event ingest is idempotent and auditable",
        "Score deltas are deterministic and positive",
        "Typecheck and tests pass"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Delivered deterministic recovery scoring lane (`computeRecoveryScoreDelta`) and recovery ingest path with bounded severity + audit trail."
    },
    {
      "id": "CRP-US-010",
      "title": "Reviewer anti-collusion deterministic signals",
      "description": "As marketplaces, we need anti-collusion controls in reviewer selection without breaking existing API clients.",
      "acceptanceCriteria": [
        "Selection considers requester/worker exclusion, cooldown, and historical pairing",
        "Selection metadata is deterministic and auditable",
        "Existing reviewer payload compatibility is preserved",
        "Typecheck and tests pass"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Delivered anti-collusion reviewer selection with requester/worker exclusion, cooldown/history/pair penalties, and additive selection_metadata response."
    },
    {
      "id": "CRP-US-011",
      "title": "DLQ + replay operations",
      "description": "As ops, we need DLQ safety and replay tooling for failed ingest-loop events.",
      "acceptanceCriteria": [
        "Wrangler queue consumer binds dead_letter_queue for staging and prod",
        "Replay endpoint can replay failed events by source_event_id or batch",
        "Queue status endpoint surfaces failure/replay counters",
        "Typecheck and tests pass"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Delivered DLQ + replay controls: dead_letter_queue config, queue failure audit events, `GET /v1/ops/queue/status`, and `POST /v1/ops/queue/replay`."
    },
    {
      "id": "CRP-US-012",
      "title": "Drift recompute + ingest SLO endpoints",
      "description": "As reliability operations, we need deterministic drift reports and ingest SLO telemetry endpoints.",
      "acceptanceCriteria": [
        "POST /v1/ops/drift/recompute emits deterministic report and optional repairs",
        "GET /v1/ops/drift/latest returns latest persisted drift report",
        "GET /v1/ops/slo/ingest reports bounded success/error/latency metrics",
        "Typecheck and tests pass"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Delivered drift + SLO contracts: `POST /v1/ops/drift/recompute`, `GET /v1/ops/drift/latest`, `GET /v1/ops/slo/ingest`, cron drift reporting, and D1 `rep_drift_reports` persistence."
    }
  ]
}
