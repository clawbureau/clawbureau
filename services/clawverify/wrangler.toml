name = "clawverify"
account_id = "b8f2c66f1848dff476faa874282d781e"
main = "src/index.ts"
compatibility_date = "2024-01-01"

routes = [
  { pattern = "clawverify.com/*", zone_name = "clawverify.com" },
  { pattern = "www.clawverify.com/*", zone_name = "clawverify.com" }
]

[vars]
ENVIRONMENT = "production"

# Comma-separated allowlist of trusted gateway receipt signer DIDs (did:key:...)
# Required for fail-closed receipt verification.
# Set this via Cloudflare dashboard or wrangler vars/secrets.
# GATEWAY_RECEIPT_SIGNER_DIDS = "did:key:..."

# Comma-separated allowlist of trusted attester DIDs (did:key:...) for proof bundle attestations.
# Without this, attestations do NOT uplift trust tiers (fail-closed).
# ATTESTATION_SIGNER_DIDS = "did:key:..."

# Comma-separated allowlist of trusted repo_claim_id values for commit_proof verification.
# Required for fail-closed commit proof verification.
# Set via: wrangler secret put CLAWCLAIM_REPO_CLAIM_ALLOWLIST
# CLAWCLAIM_REPO_CLAIM_ALLOWLIST = "repo:github:clawbureau/clawbureau"

[[d1_databases]]
binding = "AUDIT_LOG_DB"
database_name = "clawverify-audit-log"
database_id = "9150187b-07b2-4b44-9be8-46d8934ab785"

[env.staging]
name = "clawverify-staging"
routes = [
  { pattern = "staging.clawverify.com/*", zone_name = "clawverify.com" }
]

[env.staging.vars]
ENVIRONMENT = "staging"

[[env.staging.d1_databases]]
binding = "AUDIT_LOG_DB"
database_name = "clawverify-audit-log-staging"
database_id = "1aa0fbf8-6464-42e9-afaf-676535bcbef1"
