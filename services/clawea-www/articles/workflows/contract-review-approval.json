{
  "slug": "workflows/contract-review-approval",
  "title": "Contract review and approval workflow | Secure Agent Workflow | Claw EA",
  "category": "workflows",
  "html": "<h1>Contract review and approval workflow (Permissioned Execution)</h1>\n<p>This workflow runs contract review and redline generation under machine-enforced constraints, then requires step-up human approval before anything leaves your boundary. It is designed for OpenClaw as the baseline agent runtime, with Claw EA adding policy binding, receipted model traffic, and auditable outputs.</p>\n<p>The key design choice is permissioned execution (policy-as-code) rather than prompt-only instructions. Prompts can be ignored or subverted, but a Work Policy Contract (WPC) and scoped token (CST) can fail closed and produce proof of what was allowed and what happened.</p>\n\n<h2>Direct Answer</h2>\n<p>Use a WPC to define exactly what the agent may read, transform, and output during contract review, then run the job with a CST pinned to that WPC. Route all model calls through clawproxy so you receive gateway receipts, and package the run as a proof bundle for audit and later verification.</p>\n<p>Treat “approve contract language” and “send redlines” as irreversible actions that always require step-up approvals. Enforce DLP and redaction at the execution layer, so the system can block or redact sensitive content even when the prompt is manipulated.</p>\n\n<h2>Step-by-step runbook</h2>\n<ol>\n  <li>\n    <p><strong>Define the contract-review WPC.</strong> Write a WPC that restricts tools to read-only document ingestion, approved clause libraries, and limited drafting tools. Include explicit output rules (what can be produced) plus DLP and redaction requirements.</p>\n    <p>Store the signed WPC in the WPC registry so it can be fetched and verified at runtime.</p>\n  </li>\n  <li>\n    <p><strong>Issue a CST pinned to the policy.</strong> Request a CST from clawscope with a scope hash that matches the allowed actions for this workflow, and optionally pin the policy hash so the token is only usable with the intended WPC. Bind the CST to a single job where possible to reduce replay risk.</p>\n    <p>If you map humans to identities in Microsoft Entra ID, keep the approval identity checks in your existing access patterns (for example, Conditional Access and PIM for approvers), and pass the approval result into the run as an external signal via official API.</p>\n  </li>\n  <li>\n    <p><strong>Run the agent in OpenClaw with sandbox and tool policy tightened.</strong> Enable sandboxing for tool execution and keep tool allowlists minimal, so the agent cannot “discover” extra capabilities. Use OpenClaw’s security audit regularly to catch footguns like open inbound access and weak redaction settings.</p>\n    <p>Keep elevated execution disabled for this workflow unless you have a documented exception and a separate WPC for that exception.</p>\n  </li>\n  <li>\n    <p><strong>Route model traffic through clawproxy for receipting.</strong> Configure the agent’s model provider path so calls are proxied and receipted, producing gateway receipts for each model call. If you use OpenRouter via fal, route it through clawproxy so receipts still cover the model exchange.</p>\n    <p>This is the difference between “we think the agent followed the rules” and “we can verify what was called and under which token and policy binding.”</p>\n  </li>\n  <li>\n    <p><strong>Apply DLP and redaction before any externalization.</strong> Require a redaction pass that removes or masks sensitive fields (for example: bank details, personal addresses, customer lists, pricing tables) based on policy rules. Keep both the raw draft and the redacted version as separate artifacts, with the raw draft restricted to the smallest set of reviewers.</p>\n    <p>If the agent cannot satisfy redaction rules deterministically, force a human review step and block sending.</p>\n  </li>\n  <li>\n    <p><strong>Step-up approval gate for irreversible actions.</strong> Before “send redlines” or “approve contract language,” require an explicit human approval event that references the job id, the WPC hash, and the output artifact hashes. The agent may prepare the packet, but it cannot execute the action until approval is recorded.</p>\n    <p>When the approval is absent or ambiguous, fail closed and produce an exception report in the proof bundle.</p>\n  </li>\n  <li>\n    <p><strong>Finalize and archive as a proof bundle.</strong> Bundle gateway receipts, policy identifiers, token binding metadata, and output hashes into a proof bundle. Store the proof bundle for audit, and optionally publish a Trust Pulse for centralized viewing.</p>\n    <p>This gives legal and security teams a stable artifact for later verification, without re-running the agent.</p>\n  </li>\n</ol>\n\n<h2>Threat model</h2>\n<p>This workflow assumes the agent can be influenced by prompt injection in documents, emails, or chat threads. The controls focus on preventing unauthorized actions and proving what occurred when the agent handled sensitive contract content.</p>\n\n<table>\n  <thead>\n    <tr>\n      <th>Threat</th>\n      <th>What happens</th>\n      <th>Control</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Prompt injection inside the contract PDF or email thread</td>\n      <td>The agent is instructed to reveal secrets, skip redaction, or send redlines to an attacker-controlled address.</td>\n      <td>Permissioned execution: WPC tool and output constraints, CST scope hash, and a hard step-up approval gate before sending.</td>\n    </tr>\n    <tr>\n      <td>Data leakage in generated redlines</td>\n      <td>Confidential annexes, pricing, or personal data appear in comments or markup that gets shared externally.</td>\n      <td>DLP and redaction rules enforced by policy; block externalization unless redaction passes and artifacts are hashed and recorded.</td>\n    </tr>\n    <tr>\n      <td>Unverifiable model behavior during review</td>\n      <td>After an incident, you cannot prove which model was called or what was sent to it.</td>\n      <td>Gateway receipts from clawproxy for model calls, stored in a proof bundle for verification.</td>\n    </tr>\n    <tr>\n      <td>Token replay across jobs</td>\n      <td>A token captured from logs or a misconfigured runner is reused to run unauthorized contract reviews.</td>\n      <td>Marketplace anti-replay binding using job-scoped CST binding, plus optional policy hash pinning to prevent token reuse under different WPCs.</td>\n    </tr>\n    <tr>\n      <td>Tool escape or overbroad tool access</td>\n      <td>The agent writes files, runs shell commands, or reaches unapproved network destinations during review.</td>\n      <td>OpenClaw sandboxing and strict tool allowlists; keep elevated execution disabled for this workflow.</td>\n    </tr>\n  </tbody>\n</table>\n\n<h2>Policy-as-code example</h2>\n<p>This is a minimal JSON-like sketch of a WPC for contract review. It shows the core idea: lock tool access, require redaction, and force human approval for irreversible actions.</p>\n\n<pre>\n{\n  \"wpc_version\": \"v1\",\n  \"workflow\": \"contract_review_approval\",\n  \"inputs\": {\n    \"allowed_document_types\": [\"pdf\", \"docx\", \"txt\"],\n    \"max_document_pages\": 250\n  },\n  \"tools\": {\n    \"allow\": [\n      \"doc.read\",\n      \"doc.extract_text\",\n      \"clause_library.search\",\n      \"draft.redlines.generate\"\n    ],\n    \"deny\": [\n      \"shell.exec\",\n      \"fs.write\",\n      \"network.send\",\n      \"email.send\"\n    ]\n  },\n  \"output_policy\": {\n    \"allowed_outputs\": [\"redline_suggestions\", \"risk_summary\", \"issue_list\"],\n    \"blocked_outputs\": [\"final_approved_language_without_human_signoff\"],\n    \"redaction_required\": true,\n    \"dlp_rules\": [\n      {\"type\": \"pii\", \"action\": \"mask\"},\n      {\"type\": \"bank_account\", \"action\": \"remove\"},\n      {\"type\": \"pricing_table\", \"action\": \"mask_unless_approved\"}\n    ]\n  },\n  \"approvals\": {\n    \"step_up_required_for\": [\"send_redlines\", \"approve_contract_language\"],\n    \"approval_binding\": [\"job_id\", \"wpc_hash\", \"output_hashes\"]\n  }\n}\n</pre>\n\n<p>In production, the signed WPC is stored as a hash-addressed artifact in clawcontrols. The CST from clawscope can carry an optional policy hash pinning value so the runtime can refuse mismatched policies.</p>\n\n<h2>What proof do you get?</h2>\n<p>Each model call routed through clawproxy produces gateway receipts. These receipts can be used to verify that calls were made under the expected token binding and that the proxy path was used for the job.</p>\n<p>At the end of the run, Claw EA produces a proof bundle that ties together the WPC identifier, CST binding metadata, gateway receipts, and hashes of outputs (drafts, redacted drafts, and the approval packet). If you need a centralized place for audit viewing, you can store the run artifact as a Trust Pulse.</p>\n\n<h2>Rollback posture</h2>\n<p>Rollback in contract workflows is mostly about stopping externalization and proving what was shared. The system should assume that once redlines are sent, you cannot fully retract them, so the goal is to prevent sending until approvals and redaction are complete.</p>\n\n<table>\n  <thead>\n    <tr>\n      <th>Action</th>\n      <th>Safe rollback</th>\n      <th>Evidence</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Agent generated an unsafe redline draft</td>\n      <td>Quarantine the artifact, re-run redaction under the same WPC, and require a new approval event tied to new output hashes.</td>\n      <td>Proof bundle shows the original output hash and the corrected output hash, plus the redaction requirement and job metadata.</td>\n    </tr>\n    <tr>\n      <td>Attempted “send redlines” without approval</td>\n      <td>Fail closed and record a blocked action outcome; do not allow the tool call to proceed.</td>\n      <td>WPC step-up requirement plus a run record in the proof bundle; gateway receipts confirm model calls but not an outbound send.</td>\n    </tr>\n    <tr>\n      <td>Approval granted to the wrong artifact version</td>\n      <td>Invalidate the approval for this job, issue a new CST for a new job, and re-run with corrected inputs.</td>\n      <td>Approval binding includes output hashes; mismatch is detectable when the hashes do not line up with the approved packet.</td>\n    </tr>\n    <tr>\n      <td>Policy mistake discovered mid-rollout</td>\n      <td>Rotate to a new WPC version and stop issuing CSTs pinned to the old policy hash.</td>\n      <td>WPC hashes are distinct; proof bundles show which jobs used which policy version.</td>\n    </tr>\n  </tbody>\n</table>\n\n<h2>FAQ</h2>\n\n<h3>Why is prompt-only control not enough for contract review?</h3>\n<p>Contracts can contain adversarial instructions and sensitive data, and the model can be coerced into ignoring “do not send” guidance. Policy-as-code lets you block tools and outputs deterministically, then prove which policy governed the run.</p>\n\n<h3>Where do WPC and CST fit in the workflow?</h3>\n<p>The WPC defines what is allowed, and the CST authorizes a specific job to run under that scope. With optional policy hash pinning, a CST can be made unusable if the runtime tries to swap policies.</p>\n\n<h3>What exactly is the step-up approval gate?</h3>\n<p>It is a hard stop before irreversible actions like “send redlines” and “approve contract language.” The approval event should bind to the job id, the WPC hash, and output hashes so approval cannot be replayed onto different content.</p>\n\n<h3>Can we integrate this with Microsoft Entra ID approvals?</h3>\n<p>Yes, typically via official API, with approvers governed by your existing Conditional Access and PIM practices. Claw EA focuses on binding the external approval result to the job and preserving it inside the proof bundle.</p>\n\n<h3>What do gateway receipts cover and what do they not cover?</h3>\n<p>Gateway receipts cover model calls that go through clawproxy, including metadata needed for verification. They do not automatically prove what happened in tools that run outside the receipted path unless you also capture and hash those artifacts in the proof bundle.</p>\n\n<h2>Sources</h2>\n<ul>\n  <li><a href=\"https://github.com/openclaw/openclaw/blob/5d4f42016f3afdbd5218843648d3ea594541dedc/docs/gateway/security/index.md\">OpenClaw Gateway Security (audit + footguns)</a></li>\n  <li><a href=\"https://github.com/openclaw/openclaw/blob/5d4f42016f3afdbd5218843648d3ea594541dedc/docs/gateway/sandboxing.md\">OpenClaw: Sandboxing</a></li>\n  <li><a href=\"https://learn.microsoft.com/en-us/azure/architecture/ai-ml/idea/multiple-agent-workflow-automation\">Build a multiple-agent workflow automation solution by using Microsoft Agent Framework (Azure Architecture Center)</a></li>\n  <li><a href=\"https://learn.microsoft.com/en-us/entra/id-governance/access-review-agent\">Microsoft Security Copilot Access Review Agent in Microsoft Entra ID Governance</a></li>\n</ul>\n\n<div class=\"cta-banner\" data-cta=\"bofu-endcap\">\n  <h2>Ready to put this workflow into production?</h2>\n  <p>Get a scoped deployment plan with Work Policy Contracts, approval gates, and cryptographic proof bundles for your team.</p>\n  <a href=\"/contact\" class=\"cta-btn cta-btn-lg\" data-cta=\"bofu-talk-to-sales\">Talk to Sales</a>\n  <a href=\"/trust\" class=\"cta-btn cta-btn-outline cta-btn-lg\" style=\"margin-left:.75rem\" data-cta=\"bofu-trust-layer\">Review Trust Layer</a>\n</div>\n",
  "description": "This workflow runs contract review and redline generation under machine-enforced constraints, then requires step-up human approval before anything leaves your boundary. It is designed for OpenClaw as the baseline agent r",
  "faqs": [
    {
      "q": "Why is prompt-only control not enough for contract review?",
      "a": "Contracts can contain adversarial instructions and sensitive data, and the model can be coerced into ignoring “do not send” guidance. Policy-as-code lets you block tools and outputs deterministically, then prove which policy governed the run."
    },
    {
      "q": "Where do WPC and CST fit in the workflow?",
      "a": "The WPC defines what is allowed, and the CST authorizes a specific job to run under that scope. With optional policy hash pinning, a CST can be made unusable if the runtime tries to swap policies."
    },
    {
      "q": "What exactly is the step-up approval gate?",
      "a": "It is a hard stop before irreversible actions like “send redlines” and “approve contract language.” The approval event should bind to the job id, the WPC hash, and output hashes so approval cannot be replayed onto different content."
    },
    {
      "q": "Can we integrate this with Microsoft Entra ID approvals?",
      "a": "Yes, typically via official API, with approvers governed by your existing Conditional Access and PIM practices. Claw EA focuses on binding the external approval result to the job and preserving it inside the proof bundle."
    },
    {
      "q": "What do gateway receipts cover and what do they not cover?",
      "a": "Gateway receipts cover model calls that go through clawproxy, including metadata needed for verification. They do not automatically prove what happened in tools that run outside the receipted path unless you also capture and hash those artifacts in the proof bundle."
    }
  ],
  "sources": [
    {
      "title": "Build a Multiple-Agent Workflow Automation Solution by using ...",
      "uri": "https://learn.microsoft.com/en-us/azure/architecture/ai-ml/idea/multiple-agent-workflow-automation"
    },
    {
      "title": "Microsoft Security Copilot Access Review Agent in Microsoft Entra - Microsoft Entra ID Governance",
      "uri": "https://learn.microsoft.com/en-us/entra/id-governance/access-review-agent"
    },
    {
      "title": "Scaling content review operations with multi-agent workflow",
      "uri": "https://aws.amazon.com/blogs/machine-learning/scaling-content-review-operations-with-multi-agent-workflow/"
    },
    {
      "title": "Building Agentic Workflows with IBM watsonx Orchestrate on AWS",
      "uri": "https://aws.amazon.com/blogs/ibm-redhat/building-agentic-workflows-with-ibm-watsonx-orchestrate-on-aws/"
    },
    {
      "title": "Your Complete Guide to AI Agent Testing - Salesforce",
      "uri": "https://www.salesforce.com/agentforce/ai-agents/security/"
    },
    {
      "title": "Best Practices for Secure Agentforce Implementation - Salesforce",
      "uri": "https://www.salesforce.com/blog/best-practices-for-secure-agentforce-implementation-2/"
    }
  ],
  "model": "candidate-01",
  "generatedAt": "2026-02-11T11:37:19.657Z",
  "indexable": true
}