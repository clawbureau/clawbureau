{
  "slug": "tools/confluence",
  "title": "Confluence for Permissioned Agents | Claw EA",
  "category": "tools",
  "html": "<h1>Confluence for Permissioned Agents | Claw EA</h1>\n\n<p>Confluence is a high-leverage target for enterprise agents because it contains internal procedures, architecture notes, incident writeups, and links to other systems. If an agent can read and write Confluence, it can also leak sensitive context, quietly rewrite operational docs, or create durable misinformation.</p>\n<p>Claw EA treats Confluence access as permissioned execution: actions are allowed only when a Work Policy Contract (WPC) is verified and the run is authenticated with a CST. This is stricter than prompt-only rules because the execution layer can fail closed, emit gateway receipts, and produce a proof bundle for audit.</p>\n\n<h2>Step-by-step runbook</h2>\n<p>Use this runbook when you want OpenClaw as the baseline agent runtime, and you want Confluence access via official API or via an MCP server with enterprise buildout controls. The goal is to keep Confluence actions narrow, reviewable, and reversible.</p>\n\n<ol>\n  <li>\n    <p>Define the Confluence blast radius in plain terms. Pick specific spaces, page labels, or a page subtree where the agent may operate, and explicitly list prohibited areas such as HR, Legal, Security, and Incident Response.</p>\n  </li>\n  <li>\n    <p>Encode that scope as a WPC and store it in the WPC registry. The WPC is signed and hash-addressed, so the agent runtime can fetch and verify the exact policy artifact before executing tools.</p>\n  </li>\n  <li>\n    <p>Issue a CST for the job from clawscope, and pin it to the WPC hash when you need strict change control. Use short TTLs and job-scoped binding to reduce replay risk for long-running agents.</p>\n  </li>\n  <li>\n    <p>Connect Confluence via official API or via an MCP server, using least-privilege auth scopes. Treat write and admin actions as separate capabilities that require explicit WPC approval gates and separate credentials.</p>\n  </li>\n  <li>\n    <p>Route model calls through clawproxy so gateway receipts are emitted for each call. If you use OpenRouter via fal, keep it behind clawproxy so receipts remain consistent across model providers.</p>\n  </li>\n  <li>\n    <p>Run in a sandboxed tool environment where possible, and keep OpenClaw tool policy tight. Regularly run OpenClaw security audit checks after config changes, especially if you modify tool allowlists or expose inbound chat surfaces.</p>\n  </li>\n  <li>\n    <p>Require evidence capture for every Confluence mutation. Store the resulting proof bundle and publish a Trust Pulse when you need an internal audit trail that is easy to review.</p>\n  </li>\n</ol>\n\n<h2>Threat model</h2>\n<p>Confluence is not just a document store. It is a control surface for human behavior, and agents can change that surface at machine speed if you let them.</p>\n\n<table>\n  <thead>\n    <tr>\n      <th>Threat</th>\n      <th>What happens</th>\n      <th>Control</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Prompt injection from a Confluence page</td>\n      <td>An agent reads a page containing hostile instructions and then uses tool access to exfiltrate data or perform unwanted edits.</td>\n      <td>Constrain tool capabilities via WPC, keep reads and writes separate, and require explicit approval gates for mutations. Treat page content as untrusted input even when it is internal.</td>\n    </tr>\n    <tr>\n      <td>Over-broad Confluence credential</td>\n      <td>A single leaked token grants access across many spaces, enabling mass reads or destructive edits.</td>\n      <td>Use least-privilege auth scopes and job-scoped CST binding. Pin the CST to a WPC hash when you need a strict one-policy-per-job posture.</td>\n    </tr>\n    <tr>\n      <td>Malicious or misconfigured tool plugin</td>\n      <td>A plugin claims it is doing a safe read but actually performs writes, or it sends content to an unintended destination.</td>\n      <td>Fail closed with WPC allowlists that are action-specific, and keep OpenClaw tool policy minimal. Prefer a sandboxed execution mode for tool runs and audit tool configuration drift.</td>\n    </tr>\n    <tr>\n      <td>Silent documentation tampering</td>\n      <td>The agent edits runbooks or architecture pages, creating subtle operational risk that is only found later.</td>\n      <td>Route model calls through clawproxy for gateway receipts and require proof bundles for write actions. Require change summaries and tie edits to a job identifier in the WPC metadata.</td>\n    </tr>\n    <tr>\n      <td>Replay of prior “approved” job tokens</td>\n      <td>An attacker reuses an old token to re-run a destructive job after the fact.</td>\n      <td>Use marketplace anti-replay binding with job-scoped CST binding, plus short TTLs. Make WPC hashes part of your job record so stale runs are obvious.</td>\n    </tr>\n  </tbody>\n</table>\n\n<h2>Policy-as-code example</h2>\n<p>This example shows the shape of a WPC that allows Confluence reads in a bounded space and gates writes behind explicit approval. The point is that enforcement happens in the execution layer, not in a prompt, so the run fails closed if the policy is missing or mismatched.</p>\n\n<pre>{\n  \"wpc_version\": \"v1\",\n  \"tool\": \"confluence\",\n  \"connection_mode\": [\"official_api\", \"mcp_server\"],\n  \"resources\": {\n    \"spaces_allowlist\": [\"ENG\", \"PLATFORM-RUNBOOKS\"],\n    \"page_prefix_allowlist\": [\"ENG/Runbooks/\", \"PLATFORM-RUNBOOKS/Oncall/\"]\n  },\n  \"actions\": {\n    \"read\": {\n      \"allowed\": true,\n      \"max_pages_per_job\": 200\n    },\n    \"search\": {\n      \"allowed\": true,\n      \"query_filters_required\": [\"space\"]\n    },\n    \"write\": {\n      \"allowed\": false,\n      \"approval_gate\": \"required\"\n    },\n    \"admin\": {\n      \"allowed\": false\n    }\n  },\n  \"auth\": {\n    \"least_privilege_scopes\": true,\n    \"credential_separation\": {\n      \"read_credential\": \"required\",\n      \"write_credential\": \"separate_and_disabled_by_default\"\n    }\n  },\n  \"attestation\": {\n    \"require_gateway_receipts\": true,\n    \"require_proof_bundle_on_write\": true\n  }\n}</pre>\n\n<p>In practice, you bind the job CST to this policy. That gives you an enforceable constraint set that the runtime can verify, rather than relying on the model to “remember” what it is allowed to do.</p>\n\n<h2>What proof do you get?</h2>\n<p>For model calls, clawproxy emits gateway receipts that let you verify what was sent to the model and what came back, under the policy and token context used for the run. These receipts are designed to support verification later, not just logging.</p>\n<p>For a job, Claw EA produces a proof bundle that packages the relevant receipts and metadata needed to audit the run. When you need a durable review artifact, you can store and view a Trust Pulse that corresponds to that proof bundle.</p>\n<p>This matters for Confluence because the risk is not only data leaving your environment. The other risk is durable internal state changes, and you want a record that ties “who approved what” to “what actually ran.”</p>\n\n<h2>Rollback posture</h2>\n<p>Rollback planning for Confluence should assume that some edits will be wrong or unsafe. Build rollback into the WPC as an operational requirement, and make sure every write has enough evidence to revert quickly.</p>\n\n<table>\n  <thead>\n    <tr>\n      <th>Action</th>\n      <th>Safe rollback</th>\n      <th>Evidence</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Create a new page</td>\n      <td>Delete the page or move it to a quarantine space for review.</td>\n      <td>Proof bundle referencing the job CST, plus the tool-side identifiers recorded in the job metadata.</td>\n    </tr>\n    <tr>\n      <td>Edit an existing page</td>\n      <td>Revert to the prior version and add a human-authored note explaining the revert.</td>\n      <td>Gateway receipts for the model decision path, and the WPC hash that proves which rules were in force.</td>\n    </tr>\n    <tr>\n      <td>Bulk label or taxonomy change</td>\n      <td>Undo the label changes using the same bounded allowlist, then lock further automation until reviewed.</td>\n      <td>Job-scoped CST binding to prevent reruns, plus a proof bundle that enumerates affected resources.</td>\n    </tr>\n    <tr>\n      <td>Permission-affecting action</td>\n      <td>Do not allow by default. If implemented, require a break-glass WPC and a human approval gate.</td>\n      <td>WPC registry record for the break-glass policy, and proof bundle showing the approval context and run timeline.</td>\n    </tr>\n  </tbody>\n</table>\n\n<h2>FAQ</h2>\n\n<h3>Can Claw EA connect to Confluence today?</h3>\n<p>Confluence can be connected via official API and MCP-compatible tooling with enterprise buildout controls. This page does not imply a native connector is already shipped.</p>\n\n<h3>Why is prompt-only control not enough for Confluence agents?</h3>\n<p>Prompt rules are not an execution boundary, so a model can be tricked or can drift into unsafe actions. A permissioned layer enforces policy-as-code, fails closed, and ties each run to a WPC and CST that can be audited later.</p>\n\n<h3>What is the minimal safe permission set for a Confluence agent?</h3>\n<p>Start with read-only access to a small set of spaces, with query filters that prevent cross-space searching. Add write permissions only for a dedicated space or subtree, and require an explicit WPC approval gate for each mutation class.</p>\n\n<h3>How do we audit what the model actually did?</h3>\n<p>Route model calls through clawproxy to get gateway receipts. Store a proof bundle per job so you can verify policy, token binding, and the sequence of model calls that led to Confluence actions.</p>\n\n<h3>How does this relate to enterprise agent governance programs?</h3>\n<p>It complements them by making controls enforceable at run time instead of only at design time. Microsoft’s agent governance guidance focuses on organizational guardrails, and Claw EA supplies concrete artifacts like WPCs, CSTs, receipts, and proof bundles to back those guardrails with evidence.</p>\n\n<h2>Sources</h2>\n<ul>\n  <li><a href=\"https://github.com/openclaw/openclaw/blob/5d4f42016f3afdbd5218843648d3ea594541dedc/docs/gateway/security/index.md\">OpenClaw Gateway Security (audit + footguns)</a></li>\n  <li><a href=\"https://github.com/openclaw/openclaw/blob/5d4f42016f3afdbd5218843648d3ea594541dedc/docs/gateway/sandbox-vs-tool-policy-vs-elevated.md\">OpenClaw: Sandbox vs Tool Policy vs Elevated</a></li>\n  <li><a href=\"https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ai-agents/governance-security-across-organization\">Governance and security for AI agents across the organization (Microsoft Learn)</a></li>\n  <li><a href=\"https://learn.microsoft.com/en-us/microsoftsearch/confluence-onpremises-deployment\">Deploy the Confluence On-premises Microsoft 365 Copilot connector (Microsoft Learn)</a></li>\n</ul>\n\n<div class=\"cta-banner\" data-cta=\"bofu-endcap\">\n  <h2>Ready to put this workflow into production?</h2>\n  <p>Get a scoped deployment plan with Work Policy Contracts, approval gates, and cryptographic proof bundles for your team.</p>\n  <a href=\"/contact\" class=\"cta-btn cta-btn-lg\" data-cta=\"bofu-talk-to-sales\">Talk to Sales</a>\n  <a href=\"/trust\" class=\"cta-btn cta-btn-outline cta-btn-lg\" style=\"margin-left:.75rem\" data-cta=\"bofu-trust-layer\">Review Trust Layer</a>\n</div>\n",
  "description": "Confluence is a high-leverage target for enterprise agents because it contains internal procedures, architecture notes, incident writeups, and links to other systems. If an agent can read and write Confluence, it can als",
  "faqs": [
    {
      "q": "Can Claw EA connect to Confluence today?",
      "a": "Confluence can be connected via official API and MCP-compatible tooling with enterprise buildout controls. This page does not imply a native connector is already shipped."
    },
    {
      "q": "Why is prompt-only control not enough for Confluence agents?",
      "a": "Prompt rules are not an execution boundary, so a model can be tricked or can drift into unsafe actions. A permissioned layer enforces policy-as-code, fails closed, and ties each run to a WPC and CST that can be audited later."
    },
    {
      "q": "What is the minimal safe permission set for a Confluence agent?",
      "a": "Start with read-only access to a small set of spaces, with query filters that prevent cross-space searching. Add write permissions only for a dedicated space or subtree, and require an explicit WPC approval gate for each mutation class."
    },
    {
      "q": "How do we audit what the model actually did?",
      "a": "Route model calls through clawproxy to get gateway receipts. Store a proof bundle per job so you can verify policy, token binding, and the sequence of model calls that led to Confluence actions."
    },
    {
      "q": "How does this relate to enterprise agent governance programs?",
      "a": "It complements them by making controls enforceable at run time instead of only at design time. Microsoft’s agent governance guidance focuses on organizational guardrails, and Claw EA supplies concrete artifacts like WPCs, CSTs, receipts, and proof bundles to back those guardrails with evidence."
    }
  ],
  "sources": [
    {
      "title": "Governance and security for AI agents across the organization",
      "uri": "https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ai-agents/governance-security-across-organization"
    },
    {
      "title": "Deploy the Confluence On-premises Microsoft 365 Copilot connector",
      "uri": "https://learn.microsoft.com/en-us/microsoftsearch/confluence-onpremises-deployment"
    },
    {
      "title": "Confluence Cloud configuration | Gemini Enterprise",
      "uri": "https://docs.cloud.google.com/gemini/enterprise/docs/confluence-cloud/third-party-config"
    },
    {
      "title": "IAM roles and permissions | Gemini Enterprise",
      "uri": "https://docs.cloud.google.com/gemini/enterprise/docs/access-control"
    },
    {
      "title": "Identity and permissions",
      "uri": "https://cloud.google.com/agentspace/agentspace-enterprise/docs/identity"
    },
    {
      "title": "Gemini Enterprise: Best of Google AI for Business",
      "uri": "https://cloud.google.com/gemini-enterprise"
    }
  ],
  "model": "candidate-01",
  "generatedAt": "2026-02-11T12:15:05.647Z",
  "indexable": true
}